const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BPPBxbc-.js","./CWelvRdo.js","./gsAQBcon.js","./DKi7S-AL.js","./entry.CXMbEI2O.css","./DlAUqK2U.js","./interact.CHhqP6pt.css"])))=>i.map(i=>d[i]);
import{o as A,r as f,k as X,I as C,x as g,z as D,B as Y,P as G,Q as Z,S as P,U as ee,_ as te,g as oe,y as h,V as b,R as re,J as le,K as ie,A as ae,W as z}from"./DKi7S-AL.js";import{i as T,_ as ne}from"./CWelvRdo.js";import{_ as se}from"./DlAUqK2U.js";import"./gsAQBcon.js";const pe=["data-element-id","onClick"],ce=["data-element-id","onInput","onKeydown","dir"],ue=["src"],de={components:{qrcode:{props:["content","size"],template:'<div><canvas :width="size" :height="size" ref="qr"></canvas></div>',mounted(){this.updateQR()},watch:{content(){this.updateQR()},size(){this.updateQR()}},methods:{async updateQR(){if(!(!this.$refs.qr||!this.content||!this.size))try{const x=await te(()=>import("./BPPBxbc-.js").then(a=>a.b),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),d=x.default?.toCanvas||x.toCanvas;d?d(this.$refs.qr,this.content,{width:this.size,errorCorrectionLevel:"H"},a=>{a&&console.error("Failed to render QR code:",a)}):console.error("toCanvas function not found in qrcode module")}catch(x){console.error("Failed to load qrcode module:",x)}}}}}},fe=Object.assign(de,{__name:"create",setup(x){A(()=>{const t=document.createElement("script");t.src="https://code.iconify.design/iconify-icon/3.0.0/iconify-icon.min.js",t.async=!0,document.head.appendChild(t)});const d=f(null);f({width:210,height:297});const a=f([]),n=f(null),m=f(null),p=f([]),c=f("both sides"),o=f({}),y=X(()=>{if(n.value===null)return null;const t=a.value.find(e=>e.id===n.value);return t?t.type:null}),R={text:{properties:{x:40.1,y:130,width:317,height:55,rotation:0,font:"Roboto",fontStyle:"Regular",fontSize:16,color:"#000000",text:"",exampleText:"Sample Text",fillTransparency:!1,textDecoration:"none",lock:!1,fillColor:"#ffffff",textAlign:"left",verticalAlign:"top",textTransform:"none"}},image:{properties:{x:148.5,y:284,width:100,height:100,rotation:0,src:"https://via.placeholder.com/150",lock:!1,strokeColor:"#eb2f2f",strokeWidth:1,associatedData:"User ID"}},qrcode:{properties:{x:20.5,y:25,width:100,height:100,rotation:0,content:"https://example.com",size:100,lock:!1}},line:{properties:{x:0,y:0,width:100,height:2,rotation:0,color:"#000000",thickness:2,lock:!1}},background:{properties:{x:0,y:0,width:210,height:297,rotation:0,color:"#ffffff",lock:!1}},eventlogo:{properties:{x:0,y:0,width:100,height:100,rotation:0,src:"https://via.placeholder.com/100",lock:!1}},useravatar:{properties:{x:0,y:0,width:50,height:50,rotation:0,src:"https://via.placeholder.com/50",lock:!1}},punching_area:{properties:{x:0,y:0,width:100,height:20,rotation:0,color:"#000000",lock:!1}}},q=(t,e)=>{if(c.value!=="right side only")return;const l=a.value.find(i=>i.id===t);if(!(!l||l.type!=="text")&&(e.key===" "||e.key==="Spacebar")){e.preventDefault();const i=e.target,r=i.textContent||"";i.textContent=r+" ",l.properties.text=i.textContent,o.value.text=i.textContent;const s=document.createRange(),_=window.getSelection();s.selectNodeContents(i),s.collapse(!1),_.removeAllRanges(),_.addRange(s)}},I=(t,e=100,l=100)=>{const i=Date.now(),r=R[t];if(!r)return;const s={id:i,type:t,properties:{...r.properties,x:e,y:l}};return a.value.push(s),p.value.push({id:i,name:`Layer ${p.value.length+1}`,type:t,visible:!0,locked:!1}),z(()=>S(s)),s},S=t=>{const e=document.querySelector(`[data-element-id="${t.id}"]`);e&&T(e).draggable({enabled:!t.properties.lock,inertia:!0,modifiers:[T.modifiers.restrictRect({restriction:d.value,endOnly:!0})],onmove:l=>{if(t.properties.lock)return;const i=a.value.findIndex(r=>r.id===t.id);i!==-1&&(a.value[i].properties.x+=l.dx,a.value[i].properties.y+=l.dy,v())}}).resizable({enabled:!t.properties.lock,edges:{left:!0,right:!0,bottom:!0,top:!0},modifiers:[T.modifiers.restrictSize({min:{width:10,height:10}})],onmove:l=>{if(t.properties.lock)return;const i=a.value.findIndex(r=>r.id===t.id);i!==-1&&(a.value[i].properties.width=l.rect.width,a.value[i].properties.height=l.rect.height,a.value[i].properties.x+=l.deltaRect.left,a.value[i].properties.y+=l.deltaRect.top,v())}}).on("tap",()=>w(t.id))},w=t=>{console.log("Selecting element:",t),n.value=t,m.value=p.value.findIndex(e=>e.id===t),v()},$=t=>{console.log("Selecting layer:",t),m.value=t,n.value=p.value[t].id,v()},v=(t=null)=>{if(n.value===null)return;const e=a.value.find(l=>l.id===n.value);e&&(t&&(e.type==="text"?e.properties={...e.properties,...t,width:t.w,height:t.h,rotation:t.r}:e.type==="image"||e.type==="eventlogo"||e.type==="useravatar"?e.properties={...e.properties,...t,width:t.w,height:t.h,rotation:t.r}:e.type==="qrcode"?e.properties={...e.properties,...t,width:t.w,height:t.h,rotation:t.r}:e.properties={...e.properties,...t,width:t.w,height:t.h,rotation:t.r}),e.type==="text"?o.value={x:e.properties.x||40.1,y:e.properties.y||130,w:e.properties.width||317,h:e.properties.height||55,r:e.properties.rotation||0,font:e.properties.font||"Roboto",fontStyle:e.properties.fontStyle||"Regular",fontSize:e.properties.fontSize||16,fillColor:e.properties.fillColor||"#ffffff",fillTransparency:e.properties.fillTransparency||!1,text:e.properties.text||e.properties.exampleText||"",textDecoration:e.properties.textDecoration||"none",color:e.properties.color||"#000000",textAlign:e.properties.textAlign||"left",verticalAlign:e.properties.verticalAlign||"top",textTransform:e.properties.textTransform||"none"}:e.type==="image"||e.type==="eventlogo"||e.type==="useravatar"?o.value={x:e.properties.x||148.5,y:e.properties.y||284,w:e.properties.width||100,h:e.properties.height||100,r:e.properties.rotation||0,src:e.properties.src||"https://via.placeholder.com/150",strokeColor:e.properties.strokeColor||"#eb2f2f",strokeWidth:e.properties.strokeWidth||1,associatedData:e.properties.associatedData||"User ID"}:e.type==="qrcode"?o.value={x:e.properties.x||20.5,y:e.properties.y||25,w:e.properties.width||100,h:e.properties.height||100,r:e.properties.rotation||0,content:e.properties.content||"https://example.com",size:e.properties.size||100}:o.value={x:e.properties.x||0,y:e.properties.y||0,w:e.properties.width||100,h:e.properties.height||100,r:e.properties.rotation||0})},B=()=>{if(!n.value)return;const t=a.value.findIndex(e=>e.id===n.value);t!==-1&&(a.value.splice(t,1),p.value=p.value.filter(e=>e.id!==n.value),n.value=null,m.value=null,o.value={})},k=()=>{if(n.value===null)return;const t=a.value.findIndex(l=>l.id===n.value);if(t===-1)return;const e=a.value[t];e.type==="text"?e.properties={...e.properties,x:o.value.x,y:o.value.y,width:o.value.w,height:o.value.h,rotation:o.value.r,font:o.value.font,fontStyle:o.value.fontStyle,fontSize:o.value.fontSize,fillColor:o.value.fillColor,fillTransparency:o.value.fillTransparency,text:o.value.text,textDecoration:o.value.textDecoration,color:o.value.color,textAlign:o.value.textAlign,verticalAlign:o.value.verticalAlign,textTransform:o.value.textTransform}:e.type==="image"||e.type==="eventlogo"||e.type==="useravatar"?e.properties={...e.properties,x:o.value.x,y:o.value.y,width:o.value.w,height:o.value.h,rotation:o.value.r,src:o.value.src,strokeColor:o.value.strokeColor,strokeWidth:o.value.strokeWidth,associatedData:o.value.associatedData}:e.type==="qrcode"?e.properties={...e.properties,x:o.value.x,y:o.value.y,width:o.value.w,height:o.value.h,rotation:o.value.r,content:o.value.content,size:o.value.size}:e.properties={...e.properties,x:o.value.x,y:o.value.y,width:o.value.w,height:o.value.h,rotation:o.value.r}},E=t=>{t.target.closest("[data-element-id]")||(n.value=null,m.value=null,o.value={})},V=(t,e)=>{const l=a.value.find(i=>i.id===t);l&&l.type==="text"&&(l.properties.text=e.target.textContent,o.value.text=e.target.textContent,u())},W=t=>{event.dataTransfer.setData("text/plain",t)},L=t=>{t.preventDefault();const e=d.value.getBoundingClientRect(),l=t.clientX-e.left,i=t.clientY-e.top,r=t.dataTransfer.getData("text");if(r){const s=I(r,l,i);s&&w(s.id)}},K=t=>{p.value[t].visible=!p.value[t].visible;const e=a.value.findIndex(l=>l.id===p.value[t].id);e!==-1&&(a.value[e].properties.lock=!p.value[t].visible,v())},O=t=>{if(n.value===null)return;const e=a.value.find(r=>r.id===n.value);if(!e)return;const l=d.value.getBoundingClientRect(),i=o.value.w||e.properties.width;switch(t){case"left":o.value.x=0;break;case"center":o.value.x=(l.width-i)/2;break;case"right":o.value.x=l.width-i;break}k()},Q=t=>{if(n.value===null)return;const e=a.value.find(r=>r.id===n.value);if(!e)return;const l=d.value.getBoundingClientRect(),i=o.value.h||e.properties.height;switch(t){case"top":o.value.y=0;break;case"middle":o.value.y=(l.height-i)/2;break;case"bottom":o.value.y=l.height-i;break}k()},F=t=>{if(n.value===null)return;const e=a.value.find(l=>l.id===n.value);!e||e.type!=="text"||(t==="bold"?o.value.fontStyle=o.value.fontStyle==="Bold"?"Regular":"Bold":t==="italic"?o.value.fontStyle=o.value.fontStyle==="Italic"?"Regular":"Italic":t==="underline"&&(o.value.textDecoration=o.value.textDecoration==="underline"?"none":"underline"),u())},u=(t=null)=>{if(n.value===null)return;const e=a.value.find(i=>i.id===n.value);if(!e||e.type!=="text")return;t&&(o.value={...o.value,...t});const l=document.querySelector(`[data-element-id="${e.id}"] div[contenteditable]`);if(l&&(l.style.fontFamily=o.value.font,l.style.fontSize=`${o.value.fontSize}px`,l.style.fontWeight=o.value.fontStyle==="Bold"?"bold":"normal",l.style.fontStyle=o.value.fontStyle==="Italic"?"italic":"normal",l.style.color=o.value.color,l.style.backgroundColor=o.value.fillTransparency?"transparent":o.value.fillColor,l.style.textDecoration=o.value.textDecoration,l.style.textAlign=c.value==="right side only"?"right":o.value.textAlign,l.style.verticalAlign=o.value.verticalAlign,l.style.textTransform=o.value.textTransform,l.style.direction=c.value==="right side only"?"rtl":"ltr",l.setAttribute("dir",c.value==="right side only"?"rtl":"ltr"),l.textContent=o.value.text||e.properties.exampleText,c.value==="right side only")){const i=document.createRange(),r=window.getSelection();i.selectNodeContents(l),i.collapse(!1),r.removeAllRanges(),r.addRange(i)}k()},N=()=>{y.value==="text"&&(o.value.fillColor="rgba(0, 0, 0, 0)",o.value.fillTransparency=!0,u())},H=t=>{y.value==="text"&&(o.value.fillColor=t,o.value.fillTransparency=!1,u(),z(()=>{const e=document.querySelector(`[data-element-id="${n.value}"] div[contenteditable]`);e&&(e.style.backgroundColor=o.value.fillColor)}))},M=t=>{y.value==="text"&&(o.value.textAlign=t,u())},U=t=>{y.value==="text"&&(o.value.verticalAlign=t,u())},j=t=>{y.value==="text"&&(o.value.textTransform=t,u())},J=t=>{c.value=t,u()};return C(n,()=>{v(),n.value&&u()}),C(o,()=>k(),{deep:!0}),A(()=>{a.value.forEach(S)}),C(c,()=>{u()}),(t,e)=>{const l=oe("qrcode"),i=ne;return h(),g("div",{class:"flex h-screen",onKeydown:ee(B,["delete"])},[D("div",{class:"w-3/4 bg-gray-200 p-4",onDragover:e[0]||(e[0]=P(()=>{},["prevent"])),onDrop:L},[D("div",{class:"w-[210mm] h-[297mm] bg-white mx-auto relative shadow-lg",ref_key:"canvas",ref:d,tabindex:"0",onClick:E},[(h(!0),g(G,null,Z(a.value,r=>(h(),g("div",{key:r.id,"data-element-id":r.id,class:re(["draggable absolute",{"ring-2 ring-blue-500":n.value===r.id}]),style:b({left:r.properties.x+"px",top:r.properties.y+"px",width:r.properties.width+"px",height:r.properties.height+"px",transform:`rotate(${r.properties.rotation}deg)`,fontFamily:r.properties.font,color:r.properties.fillTransparency?"transparent":r.properties.color,backgroundColor:r.properties.fillTransparency?"transparent":r.properties.fillColor,cursor:r.properties.lock?"not-allowed":"move",display:p.value.find(s=>s.id===r.id)?.visible?"block":"none"}),onClick:s=>w(r.id)},[r.type==="text"?(h(),g("div",{key:0,contenteditable:"",ref_for:!0,ref:"textElements","data-element-id":r.id,onInput:s=>V(r.id,s),onKeydown:s=>q(r.id,s),style:b({color:r.properties.color,fontSize:`${r.properties.fontSize}px`,fontWeight:r.properties.fontStyle==="Bold"?"bold":"normal",fontStyle:r.properties.fontStyle==="Italic"?"italic":"normal",textDecoration:r.properties.textDecoration==="underline"?"underline":"none",backgroundColor:r.properties.fillTransparency?"transparent":r.properties.fillColor,textAlign:c.value==="right side only"?"right":r.properties.textAlign||"left",verticalAlign:r.properties.verticalAlign||"top",textTransform:r.properties.textTransform||"none",direction:c.value==="right side only"?"rtl":"ltr"}),dir:c.value==="right side only"?"rtl":"ltr"},ae(r.properties.text||r.properties.exampleText),45,ce)):r.type==="image"?(h(),g("img",{key:1,src:r.properties.src,class:"w-full h-full object-contain",style:b({border:`1px solid ${r.properties.strokeColor||"#eb2f2f"}`,borderWidth:`${r.properties.strokeWidth||1}px`})},null,12,ue)):r.type==="qrcode"?(h(),le(l,{key:2,content:r.properties.content,size:r.properties.size,class:"w-full h-full"},null,8,["content","size"])):r.type==="line"?(h(),g("div",{key:3,style:b({width:"100%",height:`${r.properties.thickness}px`,backgroundColor:r.properties.color})},null,4)):ie("",!0)],14,pe))),128))],512)],32),Y(i,{"selected-element":n.value,"selected-element-type":y.value,layers:p.value,"selected-layer":m.value,"current-properties":o.value,"display-option":c.value,onDragStart:W,onAlignHorizontal:O,onAlignVertical:Q,onUpdateProperties:v,onApplyTextStyle:u,onMakeTransparent:N,onApplyColor:H,onApplyTextAlign:M,onApplyVerticalAlign:U,onApplyTextTransform:j,onToggleTextStyle:F,onApplyDisplayOption:J,onSelectLayer:$,onToggleLayerVisibility:K},null,8,["selected-element","selected-element-type","layers","selected-layer","current-properties","display-option"])],32)}}}),xe=se(fe,[["__scopeId","data-v-1939116a"]]);export{xe as default};
//# sourceMappingURL=D7o5ChWg.js.map
