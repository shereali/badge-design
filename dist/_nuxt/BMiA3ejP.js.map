{"version":3,"mappings":"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","names":["__default__","qrcode","__vitePreload","n","toCanvas","error","err","onMounted","script","canvas","ref","elements","selectedElement","selectedLayer","layers","displayOption","currentProperties","selectedElementType","computed","element","elementTypeMap","handleKeydown","elementId","event","e","target","text","range","selection","addElement","type","x","y","id","elementType","nextTick","setupInteract","interact","index","updateProperties","selectElement","layer","selectLayer","newProperties","deleteElement","savePosition","handleCanvasClick","updateText","applyTextStyle","dragStart","onDrop","rect","toggleLayerVisibility","elementIndex","alignHorizontal","alignment","canvasRect","elementWidth","alignVertical","elementHeight","toggleTextStyle","style","makeTransparent","applyColor","color","applyTextAlign","align","applyVerticalAlign","applyTextTransform","transform","applyDisplayOption","option","watch","_createElementBlock","_createElementVNode","_Fragment","_renderList","_normalizeStyle","l","$event","_hoisted_2","_createBlock","_component_qrcode","_createVNode","_component_Sidebar"],"ignoreList":[],"sources":["../../../../../../../modules/designbadge/pages/design-badge-copy/create.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex h-screen\" @keydown.delete=\"deleteElement\">\r\n    <!-- Canvas Area -->\r\n    <div class=\"w-3/4 bg-gray-200 p-4\" @dragover.prevent @drop=\"onDrop\">\r\n      <div\r\n        class=\"w-[210mm] h-[297mm] bg-white mx-auto relative shadow-lg\"\r\n        ref=\"canvas\"\r\n        tabindex=\"0\"\r\n        @click=\"handleCanvasClick\"\r\n      >\r\n        <div\r\n          v-for=\"element in elements\"\r\n          :key=\"element.id\"\r\n          :data-element-id=\"element.id\"\r\n          class=\"draggable absolute\"\r\n          :class=\"{ 'ring-2 ring-blue-500': selectedElement === element.id }\"\r\n          :style=\"{\r\n            left: element.properties.x + 'px',\r\n            top: element.properties.y + 'px',\r\n            width: element.properties.width + 'px',\r\n            height: element.properties.height + 'px',\r\n            transform: `rotate(${element.properties.rotation}deg)`,\r\n            fontFamily: element.properties.font,\r\n            color: element.properties.fillTransparency\r\n              ? 'transparent'\r\n              : element.properties.color,\r\n            backgroundColor: element.properties.fillTransparency\r\n              ? 'transparent'\r\n              : element.properties.fillColor,\r\n            cursor: element.properties.lock ? 'not-allowed' : 'move',\r\n            display: layers.find((l) => l.id === element.id)?.visible\r\n              ? 'block'\r\n              : 'none',\r\n          }\"\r\n          @click=\"selectElement(element.id)\"\r\n        >\r\n          <div\r\n            v-if=\"element.type === 'text'\"\r\n            contenteditable\r\n            ref=\"textElements\"\r\n            :data-element-id=\"element.id\"\r\n            @input=\"updateText(element.id, $event)\"\r\n            @keydown=\"handleKeydown(element.id, $event)\"\r\n            :style=\"{\r\n              color: element.properties.color,\r\n              fontSize: `${element.properties.fontSize}px`,\r\n              fontWeight:\r\n                element.properties.fontStyle === 'Bold' ? 'bold' : 'normal',\r\n              fontStyle:\r\n                element.properties.fontStyle === 'Italic' ? 'italic' : 'normal',\r\n              textDecoration:\r\n                element.properties.textDecoration === 'underline'\r\n                  ? 'underline'\r\n                  : 'none',\r\n              backgroundColor: element.properties.fillTransparency\r\n                ? 'transparent'\r\n                : element.properties.fillColor,\r\n              textAlign:\r\n                displayOption === 'right side only'\r\n                  ? 'right'\r\n                  : element.properties.textAlign || 'left',\r\n              verticalAlign: element.properties.verticalAlign || 'top',\r\n              textTransform: element.properties.textTransform || 'none',\r\n              direction: displayOption === 'right side only' ? 'rtl' : 'ltr',\r\n            }\"\r\n            :dir=\"displayOption === 'right side only' ? 'rtl' : 'ltr'\"\r\n          >\r\n            {{ element.properties.text || element.properties.exampleText }}\r\n          </div>\r\n          <img\r\n            v-else-if=\"element.type === 'image'\"\r\n            :src=\"element.properties.src\"\r\n            class=\"w-full h-full object-contain\"\r\n            :style=\"{\r\n              border: `1px solid ${\r\n                element.properties.strokeColor || '#eb2f2f'\r\n              }`,\r\n              borderWidth: `${element.properties.strokeWidth || 1}px`,\r\n            }\"\r\n          />\r\n          <qrcode\r\n            v-else-if=\"element.type === 'qrcode'\"\r\n            :content=\"element.properties.content\"\r\n            :size=\"element.properties.size\"\r\n            class=\"w-full h-full\"\r\n          />\r\n          <div\r\n            v-else-if=\"element.type === 'line'\"\r\n            :style=\"{\r\n              width: '100%',\r\n              height: `${element.properties.thickness}px`,\r\n              backgroundColor: element.properties.color,\r\n            }\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Sidebar -->\r\n    <Sidebar\r\n      :selected-element=\"selectedElement\"\r\n      :selected-element-type=\"selectedElementType\"\r\n      :layers=\"layers\"\r\n      :selected-layer=\"selectedLayer\"\r\n      :current-properties=\"currentProperties\"\r\n      :display-option=\"displayOption\"\r\n      @drag-start=\"dragStart\"\r\n      @align-horizontal=\"alignHorizontal\"\r\n      @align-vertical=\"alignVertical\"\r\n      @update-properties=\"updateProperties\"\r\n      @apply-text-style=\"applyTextStyle\"\r\n      @make-transparent=\"makeTransparent\"\r\n      @apply-color=\"applyColor\"\r\n      @apply-text-align=\"applyTextAlign\"\r\n      @apply-vertical-align=\"applyVerticalAlign\"\r\n      @apply-text-transform=\"applyTextTransform\"\r\n      @toggle-text-style=\"toggleTextStyle\"\r\n      @apply-display-option=\"applyDisplayOption\"\r\n      @select-layer=\"selectLayer\"\r\n      @toggle-layer-visibility=\"toggleLayerVisibility\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, nextTick, watch } from \"vue\";\r\nimport interact from \"interactjs\";\r\n\r\n// Load Iconify script\r\nonMounted(() => {\r\n  const script = document.createElement(\"script\");\r\n  script.src =\r\n    \"https://code.iconify.design/iconify-icon/3.0.0/iconify-icon.min.js\";\r\n  script.async = true;\r\n  document.head.appendChild(script);\r\n});\r\n\r\n// Canvas and elements\r\nconst canvas = ref(null);\r\nconst canvasSize = ref({ width: 210, height: 297 }); // A4 size in mm\r\nconst elements = ref([]);\r\nconst selectedElement = ref(null);\r\nconst selectedLayer = ref(null);\r\nconst layers = ref([]);\r\nconst displayOption = ref(\"both sides\");\r\nconst currentProperties = ref({});\r\n\r\n// Computed property to get the selected element type\r\nconst selectedElementType = computed(() => {\r\n  if (selectedElement.value === null) return null;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  return element ? element.type : null;\r\n});\r\n\r\n// Element types\r\nconst elementTypeMap = {\r\n  text: {\r\n    properties: {\r\n      x: 40.1,\r\n      y: 130,\r\n      width: 317,\r\n      height: 55,\r\n      rotation: 0,\r\n      font: \"Roboto\",\r\n      fontStyle: \"Regular\",\r\n      fontSize: 16,\r\n      color: \"#000000\",\r\n      text: \"\",\r\n      exampleText: \"Sample Text\",\r\n      fillTransparency: false,\r\n      textDecoration: \"none\",\r\n      lock: false,\r\n      fillColor: \"#ffffff\",\r\n      textAlign: \"left\",\r\n      verticalAlign: \"top\",\r\n      textTransform: \"none\",\r\n    },\r\n  },\r\n  image: {\r\n    properties: {\r\n      x: 148.5,\r\n      y: 284,\r\n      width: 100,\r\n      height: 100,\r\n      rotation: 0,\r\n      src: \"https://via.placeholder.com/150\",\r\n      lock: false,\r\n      strokeColor: \"#eb2f2f\",\r\n      strokeWidth: 1,\r\n      associatedData: \"User ID\",\r\n    },\r\n  },\r\n  qrcode: {\r\n    properties: {\r\n      x: 20.5,\r\n      y: 25,\r\n      width: 100,\r\n      height: 100,\r\n      rotation: 0,\r\n      content: \"https://example.com\",\r\n      size: 100,\r\n      lock: false,\r\n    },\r\n  },\r\n  line: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 100,\r\n      height: 2,\r\n      rotation: 0,\r\n      color: \"#000000\",\r\n      thickness: 2,\r\n      lock: false,\r\n    },\r\n  },\r\n  background: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 210,\r\n      height: 297,\r\n      rotation: 0,\r\n      color: \"#ffffff\",\r\n      lock: false,\r\n    },\r\n  },\r\n  eventlogo: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 100,\r\n      height: 100,\r\n      rotation: 0,\r\n      src: \"https://via.placeholder.com/100\",\r\n      lock: false,\r\n    },\r\n  },\r\n  useravatar: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 50,\r\n      height: 50,\r\n      rotation: 0,\r\n      src: \"https://via.placeholder.com/50\",\r\n      lock: false,\r\n    },\r\n  },\r\n  punching_area: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 100,\r\n      height: 20,\r\n      rotation: 0,\r\n      color: \"#000000\",\r\n      lock: false,\r\n    },\r\n  },\r\n};\r\n\r\nconst handleKeydown = (elementId, event) => {\r\n  if (displayOption.value !== \"right side only\") return;\r\n  const element = elements.value.find((e) => e.id === elementId);\r\n  if (!element || element.type !== \"text\") return;\r\n\r\n  // Handle space key\r\n  if (event.key === \" \" || event.key === \"Spacebar\") {\r\n    event.preventDefault(); // Prevent default space behavior\r\n    const target = event.target;\r\n    const text = target.textContent || \"\";\r\n    target.textContent = text + \" \"; // Append space to the end\r\n    element.properties.text = target.textContent; // Update element text\r\n    currentProperties.value.text = target.textContent; // Update current properties\r\n\r\n    // Move cursor to the end\r\n    const range = document.createRange();\r\n    const selection = window.getSelection();\r\n    range.selectNodeContents(target);\r\n    range.collapse(false); // Collapse to the end\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n  }\r\n};\r\n\r\n// Element management\r\nconst addElement = (type, x = 100, y = 100) => {\r\n  const id = Date.now();\r\n  const elementType = elementTypeMap[type];\r\n  if (!elementType) return;\r\n\r\n  const element = {\r\n    id,\r\n    type,\r\n    properties: { ...elementType.properties, x, y },\r\n  };\r\n\r\n  elements.value.push(element);\r\n  layers.value.push({\r\n    id,\r\n    name: `Layer ${layers.value.length + 1}`,\r\n    type,\r\n    visible: true,\r\n    locked: false,\r\n  });\r\n\r\n  nextTick(() => setupInteract(element));\r\n  return element;\r\n};\r\n\r\nconst setupInteract = (element) => {\r\n  const target = document.querySelector(`[data-element-id=\"${element.id}\"]`);\r\n  if (!target) return;\r\n\r\n  interact(target)\r\n    .draggable({\r\n      enabled: !element.properties.lock,\r\n      inertia: true,\r\n      modifiers: [\r\n        interact.modifiers.restrictRect({\r\n          restriction: canvas.value,\r\n          endOnly: true,\r\n        }),\r\n      ],\r\n      onmove: (event) => {\r\n        if (element.properties.lock) return;\r\n        const index = elements.value.findIndex((e) => e.id === element.id);\r\n        if (index !== -1) {\r\n          elements.value[index].properties.x += event.dx;\r\n          elements.value[index].properties.y += event.dy;\r\n          updateProperties();\r\n        }\r\n      },\r\n    })\r\n    .resizable({\r\n      enabled: !element.properties.lock,\r\n      edges: { left: true, right: true, bottom: true, top: true },\r\n      modifiers: [\r\n        interact.modifiers.restrictSize({\r\n          min: { width: 10, height: 10 },\r\n        }),\r\n      ],\r\n      onmove: (event) => {\r\n        if (element.properties.lock) return;\r\n        const index = elements.value.findIndex((e) => e.id === element.id);\r\n        if (index !== -1) {\r\n          elements.value[index].properties.width = event.rect.width;\r\n          elements.value[index].properties.height = event.rect.height;\r\n          elements.value[index].properties.x += event.deltaRect.left;\r\n          elements.value[index].properties.y += event.deltaRect.top;\r\n          updateProperties();\r\n        }\r\n      },\r\n    })\r\n    .on(\"tap\", () => selectElement(element.id));\r\n};\r\n\r\nconst selectElement = (elementId) => {\r\n  console.log(\"Selecting element:\", elementId);\r\n  selectedElement.value = elementId;\r\n  selectedLayer.value = layers.value.findIndex(\r\n    (layer) => layer.id === elementId\r\n  );\r\n  updateProperties();\r\n};\r\n\r\nconst selectLayer = (index) => {\r\n  console.log(\"Selecting layer:\", index);\r\n  selectedLayer.value = index;\r\n  selectedElement.value = layers.value[index].id;\r\n  updateProperties();\r\n};\r\n\r\nconst updateProperties = (newProperties = null) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element) return;\r\n\r\n  if (newProperties) {\r\n    if (element.type === \"text\") {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    } else if (\r\n      element.type === \"image\" ||\r\n      element.type === \"eventlogo\" ||\r\n      element.type === \"useravatar\"\r\n    ) {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    } else if (element.type === \"qrcode\") {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    } else {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    }\r\n  }\r\n\r\n  if (element.type === \"text\") {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 40.1,\r\n      y: element.properties.y || 130,\r\n      w: element.properties.width || 317,\r\n      h: element.properties.height || 55,\r\n      r: element.properties.rotation || 0,\r\n      font: element.properties.font || \"Roboto\",\r\n      fontStyle: element.properties.fontStyle || \"Regular\",\r\n      fontSize: element.properties.fontSize || 16,\r\n      fillColor: element.properties.fillColor || \"#ffffff\",\r\n      fillTransparency: element.properties.fillTransparency || false,\r\n      text: element.properties.text || element.properties.exampleText || \"\",\r\n      textDecoration: element.properties.textDecoration || \"none\",\r\n      color: element.properties.color || \"#000000\",\r\n      textAlign: element.properties.textAlign || \"left\",\r\n      verticalAlign: element.properties.verticalAlign || \"top\",\r\n      textTransform: element.properties.textTransform || \"none\",\r\n    };\r\n  } else if (\r\n    element.type === \"image\" ||\r\n    element.type === \"eventlogo\" ||\r\n    element.type === \"useravatar\"\r\n  ) {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 148.5,\r\n      y: element.properties.y || 284,\r\n      w: element.properties.width || 100,\r\n      h: element.properties.height || 100,\r\n      r: element.properties.rotation || 0,\r\n      src: element.properties.src || \"https://via.placeholder.com/150\",\r\n      strokeColor: element.properties.strokeColor || \"#eb2f2f\",\r\n      strokeWidth: element.properties.strokeWidth || 1,\r\n      associatedData: element.properties.associatedData || \"User ID\",\r\n    };\r\n  } else if (element.type === \"qrcode\") {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 20.5,\r\n      y: element.properties.y || 25,\r\n      w: element.properties.width || 100,\r\n      h: element.properties.height || 100,\r\n      r: element.properties.rotation || 0,\r\n      content: element.properties.content || \"https://example.com\",\r\n      size: element.properties.size || 100,\r\n    };\r\n  } else {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 0,\r\n      y: element.properties.y || 0,\r\n      w: element.properties.width || 100,\r\n      h: element.properties.height || 100,\r\n      r: element.properties.rotation || 0,\r\n    };\r\n  }\r\n};\r\n\r\nconst deleteElement = () => {\r\n  if (!selectedElement.value) return;\r\n\r\n  const index = elements.value.findIndex((e) => e.id === selectedElement.value);\r\n  if (index === -1) return;\r\n\r\n  elements.value.splice(index, 1);\r\n  layers.value = layers.value.filter(\r\n    (layer) => layer.id !== selectedElement.value\r\n  );\r\n  selectedElement.value = null;\r\n  selectedLayer.value = null;\r\n  currentProperties.value = {};\r\n};\r\n\r\nconst savePosition = () => {\r\n  if (selectedElement.value === null) return;\r\n\r\n  const index = elements.value.findIndex((e) => e.id === selectedElement.value);\r\n  if (index === -1) return;\r\n\r\n  const element = elements.value[index];\r\n  if (element.type === \"text\") {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n      font: currentProperties.value.font,\r\n      fontStyle: currentProperties.value.fontStyle,\r\n      fontSize: currentProperties.value.fontSize,\r\n      fillColor: currentProperties.value.fillColor,\r\n      fillTransparency: currentProperties.value.fillTransparency,\r\n      text: currentProperties.value.text,\r\n      textDecoration: currentProperties.value.textDecoration,\r\n      color: currentProperties.value.color,\r\n      textAlign: currentProperties.value.textAlign,\r\n      verticalAlign: currentProperties.value.verticalAlign,\r\n      textTransform: currentProperties.value.textTransform,\r\n    };\r\n  } else if (\r\n    element.type === \"image\" ||\r\n    element.type === \"eventlogo\" ||\r\n    element.type === \"useravatar\"\r\n  ) {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n      src: currentProperties.value.src,\r\n      strokeColor: currentProperties.value.strokeColor,\r\n      strokeWidth: currentProperties.value.strokeWidth,\r\n      associatedData: currentProperties.value.associatedData,\r\n    };\r\n  } else if (element.type === \"qrcode\") {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n      content: currentProperties.value.content,\r\n      size: currentProperties.value.size,\r\n    };\r\n  } else {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n    };\r\n  }\r\n};\r\n\r\nconst saveDesign = () => {\r\n  const designData = {\r\n    elements: elements.value.map((element) => ({\r\n      ...element,\r\n      properties: { ...element.properties },\r\n    })),\r\n    layers: layers.value,\r\n    canvasSize: canvasSize.value,\r\n  };\r\n  console.log(\"Saving design:\", designData);\r\n  return designData;\r\n};\r\n\r\nconst loadDesign = (data) => {\r\n  elements.value = data.elements;\r\n  layers.value = data.layers;\r\n  canvasSize.value = data.canvasSize;\r\n  nextTick(() => elements.value.forEach(setupInteract));\r\n};\r\n\r\nconst handleCanvasClick = (event) => {\r\n  if (!event.target.closest(\"[data-element-id]\")) {\r\n    selectedElement.value = null;\r\n    selectedLayer.value = null;\r\n    currentProperties.value = {};\r\n  }\r\n};\r\n\r\nconst updateText = (elementId, event) => {\r\n  const element = elements.value.find((e) => e.id === elementId);\r\n  if (element && element.type === \"text\") {\r\n    element.properties.text = event.target.textContent;\r\n    currentProperties.value.text = event.target.textContent;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst dragStart = (type) => {\r\n  event.dataTransfer.setData(\"text/plain\", type);\r\n};\r\n\r\nconst onDrop = (event) => {\r\n  event.preventDefault();\r\n  const rect = canvas.value.getBoundingClientRect();\r\n  const x = event.clientX - rect.left;\r\n  const y = event.clientY - rect.top;\r\n  const type = event.dataTransfer.getData(\"text\");\r\n\r\n  if (type) {\r\n    const element = addElement(type, x, y);\r\n    if (element) {\r\n      selectElement(element.id);\r\n    }\r\n  }\r\n};\r\n\r\nconst toggleLayerVisibility = (index) => {\r\n  layers.value[index].visible = !layers.value[index].visible;\r\n  const elementIndex = elements.value.findIndex(\r\n    (e) => e.id === layers.value[index].id\r\n  );\r\n  if (elementIndex !== -1) {\r\n    elements.value[elementIndex].properties.lock = !layers.value[index].visible;\r\n    updateProperties();\r\n  }\r\n};\r\n\r\n// Alignment methods\r\nconst alignHorizontal = (alignment) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element) return;\r\n\r\n  const canvasRect = canvas.value.getBoundingClientRect();\r\n  const elementWidth = currentProperties.value.w || element.properties.width;\r\n\r\n  switch (alignment) {\r\n    case \"left\":\r\n      currentProperties.value.x = 0;\r\n      break;\r\n    case \"center\":\r\n      currentProperties.value.x = (canvasRect.width - elementWidth) / 2;\r\n      break;\r\n    case \"right\":\r\n      currentProperties.value.x = canvasRect.width - elementWidth;\r\n      break;\r\n  }\r\n  savePosition();\r\n};\r\n\r\nconst alignVertical = (alignment) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element) return;\r\n\r\n  const canvasRect = canvas.value.getBoundingClientRect();\r\n  const elementHeight = currentProperties.value.h || element.properties.height;\r\n\r\n  switch (alignment) {\r\n    case \"top\":\r\n      currentProperties.value.y = 0;\r\n      break;\r\n    case \"middle\":\r\n      currentProperties.value.y = (canvasRect.height - elementHeight) / 2;\r\n      break;\r\n    case \"bottom\":\r\n      currentProperties.value.y = canvasRect.height - elementHeight;\r\n      break;\r\n  }\r\n  savePosition();\r\n};\r\n\r\n// Text style methods\r\nconst toggleTextStyle = (style) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element || element.type !== \"text\") return;\r\n\r\n  if (style === \"bold\") {\r\n    currentProperties.value.fontStyle =\r\n      currentProperties.value.fontStyle === \"Bold\" ? \"Regular\" : \"Bold\";\r\n  } else if (style === \"italic\") {\r\n    currentProperties.value.fontStyle =\r\n      currentProperties.value.fontStyle === \"Italic\" ? \"Regular\" : \"Italic\";\r\n  } else if (style === \"underline\") {\r\n    currentProperties.value.textDecoration =\r\n      currentProperties.value.textDecoration === \"underline\"\r\n        ? \"none\"\r\n        : \"underline\";\r\n  }\r\n  applyTextStyle();\r\n};\r\n\r\nconst applyTextStyle = (newProperties = null) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element || element.type !== \"text\") return;\r\n\r\n  if (newProperties) {\r\n    currentProperties.value = { ...currentProperties.value, ...newProperties };\r\n  }\r\n\r\n  const target = document.querySelector(\r\n    `[data-element-id=\"${element.id}\"] div[contenteditable]`\r\n  );\r\n  if (target) {\r\n    target.style.fontFamily = currentProperties.value.font;\r\n    target.style.fontSize = `${currentProperties.value.fontSize}px`;\r\n    target.style.fontWeight =\r\n      currentProperties.value.fontStyle === \"Bold\" ? \"bold\" : \"normal\";\r\n    target.style.fontStyle =\r\n      currentProperties.value.fontStyle === \"Italic\" ? \"italic\" : \"normal\";\r\n    target.style.color = currentProperties.value.color;\r\n    target.style.backgroundColor = currentProperties.value.fillTransparency\r\n      ? \"transparent\"\r\n      : currentProperties.value.fillColor;\r\n    target.style.textDecoration = currentProperties.value.textDecoration;\r\n    target.style.textAlign =\r\n      displayOption.value === \"right side only\"\r\n        ? \"right\"\r\n        : currentProperties.value.textAlign;\r\n    target.style.verticalAlign = currentProperties.value.verticalAlign;\r\n    target.style.textTransform = currentProperties.value.textTransform;\r\n    target.style.direction =\r\n      displayOption.value === \"right side only\" ? \"rtl\" : \"ltr\";\r\n    target.setAttribute(\r\n      \"dir\",\r\n      displayOption.value === \"right side only\" ? \"rtl\" : \"ltr\"\r\n    );\r\n    target.textContent =\r\n      currentProperties.value.text || element.properties.exampleText;\r\n\r\n    // Ensure cursor is at the end for RTL\r\n    if (displayOption.value === \"right side only\") {\r\n      const range = document.createRange();\r\n      const selection = window.getSelection();\r\n      range.selectNodeContents(target);\r\n      range.collapse(false); // Collapse to the end\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n    }\r\n  }\r\n  savePosition();\r\n};\r\n\r\nconst makeTransparent = () => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.fillColor = \"rgba(0, 0, 0, 0)\";\r\n    currentProperties.value.fillTransparency = true;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyColor = (color) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.fillColor = color;\r\n    currentProperties.value.fillTransparency = false;\r\n    applyTextStyle();\r\n    nextTick(() => {\r\n      const target = document.querySelector(\r\n        `[data-element-id=\"${selectedElement.value}\"] div[contenteditable]`\r\n      );\r\n      if (target)\r\n        target.style.backgroundColor = currentProperties.value.fillColor;\r\n    });\r\n  }\r\n};\r\n\r\nconst applyTextAlign = (align) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.textAlign = align;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyVerticalAlign = (align) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.verticalAlign = align;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyTextTransform = (transform) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.textTransform = transform;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyDisplayOption = (option) => {\r\n  displayOption.value = option;\r\n  applyTextStyle();\r\n};\r\n\r\n// Watch selectedElement to update properties\r\nwatch(selectedElement, () => {\r\n  updateProperties();\r\n  if (selectedElement.value) applyTextStyle();\r\n});\r\n\r\n// Watch currentProperties to save changes\r\nwatch(currentProperties, () => savePosition(), { deep: true });\r\n\r\n// Initialize interact.js\r\nonMounted(() => {\r\n  elements.value.forEach(setupInteract);\r\n});\r\n\r\nwatch(displayOption, () => {\r\n  applyTextStyle();\r\n});\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  components: {\r\n    qrcode: {\r\n      props: [\"content\", \"size\"],\r\n      template: `<div><canvas :width=\"size\" :height=\"size\" ref=\"qr\"></canvas></div>`,\r\n      mounted() {\r\n        this.updateQR();\r\n      },\r\n      watch: {\r\n        content() {\r\n          this.updateQR();\r\n        },\r\n        size() {\r\n          this.updateQR();\r\n        },\r\n      },\r\n      methods: {\r\n        async updateQR() {\r\n          if (!this.$refs.qr || !this.content || !this.size) return;\r\n          try {\r\n            const qrcode = await import(\"qrcode\");\r\n            const toCanvas = qrcode.default?.toCanvas || qrcode.toCanvas;\r\n            if (toCanvas) {\r\n              toCanvas(\r\n                this.$refs.qr,\r\n                this.content,\r\n                {\r\n                  width: this.size,\r\n                  errorCorrectionLevel: \"H\",\r\n                },\r\n                (error) => {\r\n                  if (error) console.error(\"Failed to render QR code:\", error);\r\n                }\r\n              );\r\n            } else {\r\n              console.error(\"toCanvas function not found in qrcode module\");\r\n            }\r\n          } catch (err) {\r\n            console.error(\"Failed to load qrcode module:\", err);\r\n          }\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.draggable {\r\n  user-select: none;\r\n  touch-action: none;\r\n}\r\n\r\n[contenteditable] {\r\n  outline: none;\r\n  user-select: text;\r\n  white-space: pre-wrap;\r\n  unicode-bidi: embed;\r\n  overflow-wrap: break-word;\r\n}\r\n\r\nimg {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  border: 1px solid;\r\n  border-width: 1px;\r\n}\r\n\r\ncanvas {\r\n  display: block;\r\n}\r\n</style>\r\n"],"file":"_nuxt/BMiA3ejP.js"}