{"version":3,"mappings":"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","names":["__default__","qrcode","__vitePreload","n","toCanvas","error","err","onMounted","script","canvas","ref","elements","selectedElement","selectedLayer","layers","displayOption","currentProperties","selectedElementType","computed","element","elementTypeMap","handleKeydown","elementId","event","e","target","text","range","selection","addElement","type","x","y","id","elementType","nextTick","setupInteract","interact","index","updateProperties","selectElement","layer","selectLayer","newProperties","deleteElement","savePosition","handleCanvasClick","updateText","applyTextStyle","dragStart","onDrop","rect","toggleLayerVisibility","elementIndex","alignHorizontal","alignment","canvasRect","elementWidth","alignVertical","elementHeight","toggleTextStyle","style","makeTransparent","applyColor","color","applyTextAlign","align","applyVerticalAlign","applyTextTransform","transform","applyDisplayOption","option","watch","_createElementBlock","_createElementVNode","_Fragment","_renderList","_normalizeStyle","l","$event","_hoisted_2","_createBlock","_component_qrcode","_createVNode","_component_Sidebar"],"ignoreList":[],"sources":["../../../../../../../modules/designbadge/pages/design-badge/create.vue"],"sourcesContent":["<template>\n  <div class=\"flex h-screen\" @keydown.delete=\"deleteElement\">\n    <!-- Canvas Area -->\n    <div class=\"w-3/4 bg-gray-200 p-4\" @dragover.prevent @drop=\"onDrop\">\n      <div\n        class=\"w-[210mm] h-[297mm] bg-white mx-auto relative shadow-lg\"\n        ref=\"canvas\"\n        tabindex=\"0\"\n        @click=\"handleCanvasClick\"\n      >\n        <div\n          v-for=\"element in elements\"\n          :key=\"element.id\"\n          :data-element-id=\"element.id\"\n          class=\"draggable absolute\"\n          :class=\"{ 'ring-2 ring-blue-500': selectedElement === element.id }\"\n          :style=\"{\n            left: element.properties.x + 'px',\n            top: element.properties.y + 'px',\n            width: element.properties.width + 'px',\n            height: element.properties.height + 'px',\n            transform: `rotate(${element.properties.rotation}deg)`,\n            fontFamily: element.properties.font,\n            color: element.properties.fillTransparency\n              ? 'transparent'\n              : element.properties.color,\n            backgroundColor: element.properties.fillTransparency\n              ? 'transparent'\n              : element.properties.fillColor,\n            cursor: element.properties.lock ? 'not-allowed' : 'move',\n            display: layers.find((l) => l.id === element.id)?.visible\n              ? 'block'\n              : 'none',\n          }\"\n          @click=\"selectElement(element.id)\"\n        >\n          <div\n            v-if=\"element.type === 'text'\"\n            contenteditable\n            ref=\"textElements\"\n            :data-element-id=\"element.id\"\n            @input=\"updateText(element.id, $event)\"\n            @keydown=\"handleKeydown(element.id, $event)\"\n            :style=\"{\n              color: element.properties.color,\n              fontSize: `${element.properties.fontSize}px`,\n              fontWeight:\n                element.properties.fontStyle === 'Bold' ? 'bold' : 'normal',\n              fontStyle:\n                element.properties.fontStyle === 'Italic' ? 'italic' : 'normal',\n              textDecoration:\n                element.properties.textDecoration === 'underline'\n                  ? 'underline'\n                  : 'none',\n              backgroundColor: element.properties.fillTransparency\n                ? 'transparent'\n                : element.properties.fillColor,\n              textAlign:\n                displayOption === 'right side only'\n                  ? 'right'\n                  : element.properties.textAlign || 'left',\n              verticalAlign: element.properties.verticalAlign || 'top',\n              textTransform: element.properties.textTransform || 'none',\n              direction: displayOption === 'right side only' ? 'rtl' : 'ltr',\n            }\"\n            :dir=\"displayOption === 'right side only' ? 'rtl' : 'ltr'\"\n          >\n            {{ element.properties.text || element.properties.exampleText }}\n          </div>\n          <img\n            v-else-if=\"element.type === 'image'\"\n            :src=\"element.properties.src\"\n            class=\"w-full h-full object-contain\"\n            :style=\"{\n              border: `1px solid ${\n                element.properties.strokeColor || '#eb2f2f'\n              }`,\n              borderWidth: `${element.properties.strokeWidth || 1}px`,\n            }\"\n          />\n          <qrcode\n            v-else-if=\"element.type === 'qrcode'\"\n            :content=\"element.properties.content\"\n            :size=\"element.properties.size\"\n            class=\"w-full h-full\"\n          />\n          <div\n            v-else-if=\"element.type === 'line'\"\n            :style=\"{\n              width: '100%',\n              height: `${element.properties.thickness}px`,\n              backgroundColor: element.properties.color,\n            }\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Sidebar -->\n    <Sidebar\n      :selected-element=\"selectedElement\"\n      :selected-element-type=\"selectedElementType\"\n      :layers=\"layers\"\n      :selected-layer=\"selectedLayer\"\n      :current-properties=\"currentProperties\"\n      :display-option=\"displayOption\"\n      @drag-start=\"dragStart\"\n      @align-horizontal=\"alignHorizontal\"\n      @align-vertical=\"alignVertical\"\n      @update-properties=\"updateProperties\"\n      @apply-text-style=\"applyTextStyle\"\n      @make-transparent=\"makeTransparent\"\n      @apply-color=\"applyColor\"\n      @apply-text-align=\"applyTextAlign\"\n      @apply-vertical-align=\"applyVerticalAlign\"\n      @apply-text-transform=\"applyTextTransform\"\n      @toggle-text-style=\"toggleTextStyle\"\n      @apply-display-option=\"applyDisplayOption\"\n      @select-layer=\"selectLayer\"\n      @toggle-layer-visibility=\"toggleLayerVisibility\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, nextTick, watch } from \"vue\";\nimport interact from \"interactjs\";\n\n// Load Iconify script\nonMounted(() => {\n  const script = document.createElement(\"script\");\n  script.src =\n    \"https://code.iconify.design/iconify-icon/3.0.0/iconify-icon.min.js\";\n  script.async = true;\n  document.head.appendChild(script);\n});\n\n// Canvas and elements\nconst canvas = ref(null);\nconst canvasSize = ref({ width: 210, height: 297 }); // A4 size in mm\nconst elements = ref([]);\nconst selectedElement = ref(null);\nconst selectedLayer = ref(null);\nconst layers = ref([]);\nconst displayOption = ref(\"both sides\");\nconst currentProperties = ref({});\n\n// Computed property to get the selected element type\nconst selectedElementType = computed(() => {\n  if (selectedElement.value === null) return null;\n  const element = elements.value.find((e) => e.id === selectedElement.value);\n  return element ? element.type : null;\n});\n\n// Element types\nconst elementTypeMap = {\n  text: {\n    properties: {\n      x: 40.1,\n      y: 130,\n      width: 317,\n      height: 55,\n      rotation: 0,\n      font: \"Roboto\",\n      fontStyle: \"Regular\",\n      fontSize: 16,\n      color: \"#000000\",\n      text: \"\",\n      exampleText: \"Sample Text\",\n      fillTransparency: false,\n      textDecoration: \"none\",\n      lock: false,\n      fillColor: \"#ffffff\",\n      textAlign: \"left\",\n      verticalAlign: \"top\",\n      textTransform: \"none\",\n    },\n  },\n  image: {\n    properties: {\n      x: 148.5,\n      y: 284,\n      width: 100,\n      height: 100,\n      rotation: 0,\n      src: \"https://via.placeholder.com/150\",\n      lock: false,\n      strokeColor: \"#eb2f2f\",\n      strokeWidth: 1,\n      associatedData: \"User ID\",\n    },\n  },\n  qrcode: {\n    properties: {\n      x: 20.5,\n      y: 25,\n      width: 100,\n      height: 100,\n      rotation: 0,\n      content: \"https://example.com\",\n      size: 100,\n      lock: false,\n    },\n  },\n  line: {\n    properties: {\n      x: 0,\n      y: 0,\n      width: 100,\n      height: 2,\n      rotation: 0,\n      color: \"#000000\",\n      thickness: 2,\n      lock: false,\n    },\n  },\n  background: {\n    properties: {\n      x: 0,\n      y: 0,\n      width: 210,\n      height: 297,\n      rotation: 0,\n      color: \"#ffffff\",\n      lock: false,\n    },\n  },\n  eventlogo: {\n    properties: {\n      x: 0,\n      y: 0,\n      width: 100,\n      height: 100,\n      rotation: 0,\n      src: \"https://via.placeholder.com/100\",\n      lock: false,\n    },\n  },\n  useravatar: {\n    properties: {\n      x: 0,\n      y: 0,\n      width: 50,\n      height: 50,\n      rotation: 0,\n      src: \"https://via.placeholder.com/50\",\n      lock: false,\n    },\n  },\n  punching_area: {\n    properties: {\n      x: 0,\n      y: 0,\n      width: 100,\n      height: 20,\n      rotation: 0,\n      color: \"#000000\",\n      lock: false,\n    },\n  },\n};\n\nconst handleKeydown = (elementId, event) => {\n  if (displayOption.value !== \"right side only\") return;\n  const element = elements.value.find((e) => e.id === elementId);\n  if (!element || element.type !== \"text\") return;\n\n  // Handle space key\n  if (event.key === \" \" || event.key === \"Spacebar\") {\n    event.preventDefault(); // Prevent default space behavior\n    const target = event.target;\n    const text = target.textContent || \"\";\n    target.textContent = text + \" \"; // Append space to the end\n    element.properties.text = target.textContent; // Update element text\n    currentProperties.value.text = target.textContent; // Update current properties\n\n    // Move cursor to the end\n    const range = document.createRange();\n    const selection = window.getSelection();\n    range.selectNodeContents(target);\n    range.collapse(false); // Collapse to the end\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n};\n\n// Element management\nconst addElement = (type, x = 100, y = 100) => {\n  const id = Date.now();\n  const elementType = elementTypeMap[type];\n  if (!elementType) return;\n\n  const element = {\n    id,\n    type,\n    properties: { ...elementType.properties, x, y },\n  };\n\n  elements.value.push(element);\n  layers.value.push({\n    id,\n    name: `Layer ${layers.value.length + 1}`,\n    type,\n    visible: true,\n    locked: false,\n  });\n\n  nextTick(() => setupInteract(element));\n  return element;\n};\n\nconst setupInteract = (element) => {\n  const target = document.querySelector(`[data-element-id=\"${element.id}\"]`);\n  if (!target) return;\n\n  interact(target)\n    .draggable({\n      enabled: !element.properties.lock,\n      inertia: true,\n      modifiers: [\n        interact.modifiers.restrictRect({\n          restriction: canvas.value,\n          endOnly: true,\n        }),\n      ],\n      onmove: (event) => {\n        if (element.properties.lock) return;\n        const index = elements.value.findIndex((e) => e.id === element.id);\n        if (index !== -1) {\n          elements.value[index].properties.x += event.dx;\n          elements.value[index].properties.y += event.dy;\n          updateProperties();\n        }\n      },\n    })\n    .resizable({\n      enabled: !element.properties.lock,\n      edges: { left: true, right: true, bottom: true, top: true },\n      modifiers: [\n        interact.modifiers.restrictSize({\n          min: { width: 10, height: 10 },\n        }),\n      ],\n      onmove: (event) => {\n        if (element.properties.lock) return;\n        const index = elements.value.findIndex((e) => e.id === element.id);\n        if (index !== -1) {\n          elements.value[index].properties.width = event.rect.width;\n          elements.value[index].properties.height = event.rect.height;\n          elements.value[index].properties.x += event.deltaRect.left;\n          elements.value[index].properties.y += event.deltaRect.top;\n          updateProperties();\n        }\n      },\n    })\n    .on(\"tap\", () => selectElement(element.id));\n};\n\nconst selectElement = (elementId) => {\n  console.log(\"Selecting element:\", elementId);\n  selectedElement.value = elementId;\n  selectedLayer.value = layers.value.findIndex(\n    (layer) => layer.id === elementId\n  );\n  updateProperties();\n};\n\nconst selectLayer = (index) => {\n  console.log(\"Selecting layer:\", index);\n  selectedLayer.value = index;\n  selectedElement.value = layers.value[index].id;\n  updateProperties();\n};\n\nconst updateProperties = (newProperties = null) => {\n  if (selectedElement.value === null) return;\n  const element = elements.value.find((e) => e.id === selectedElement.value);\n  if (!element) return;\n\n  if (newProperties) {\n    if (element.type === \"text\") {\n      element.properties = {\n        ...element.properties,\n        ...newProperties,\n        width: newProperties.w,\n        height: newProperties.h,\n        rotation: newProperties.r,\n      };\n    } else if (\n      element.type === \"image\" ||\n      element.type === \"eventlogo\" ||\n      element.type === \"useravatar\"\n    ) {\n      element.properties = {\n        ...element.properties,\n        ...newProperties,\n        width: newProperties.w,\n        height: newProperties.h,\n        rotation: newProperties.r,\n      };\n    } else if (element.type === \"qrcode\") {\n      element.properties = {\n        ...element.properties,\n        ...newProperties,\n        width: newProperties.w,\n        height: newProperties.h,\n        rotation: newProperties.r,\n      };\n    } else {\n      element.properties = {\n        ...element.properties,\n        ...newProperties,\n        width: newProperties.w,\n        height: newProperties.h,\n        rotation: newProperties.r,\n      };\n    }\n  }\n\n  if (element.type === \"text\") {\n    currentProperties.value = {\n      x: element.properties.x || 40.1,\n      y: element.properties.y || 130,\n      w: element.properties.width || 317,\n      h: element.properties.height || 55,\n      r: element.properties.rotation || 0,\n      font: element.properties.font || \"Roboto\",\n      fontStyle: element.properties.fontStyle || \"Regular\",\n      fontSize: element.properties.fontSize || 16,\n      fillColor: element.properties.fillColor || \"#ffffff\",\n      fillTransparency: element.properties.fillTransparency || false,\n      text: element.properties.text || element.properties.exampleText || \"\",\n      textDecoration: element.properties.textDecoration || \"none\",\n      color: element.properties.color || \"#000000\",\n      textAlign: element.properties.textAlign || \"left\",\n      verticalAlign: element.properties.verticalAlign || \"top\",\n      textTransform: element.properties.textTransform || \"none\",\n    };\n  } else if (\n    element.type === \"image\" ||\n    element.type === \"eventlogo\" ||\n    element.type === \"useravatar\"\n  ) {\n    currentProperties.value = {\n      x: element.properties.x || 148.5,\n      y: element.properties.y || 284,\n      w: element.properties.width || 100,\n      h: element.properties.height || 100,\n      r: element.properties.rotation || 0,\n      src: element.properties.src || \"https://via.placeholder.com/150\",\n      strokeColor: element.properties.strokeColor || \"#eb2f2f\",\n      strokeWidth: element.properties.strokeWidth || 1,\n      associatedData: element.properties.associatedData || \"User ID\",\n    };\n  } else if (element.type === \"qrcode\") {\n    currentProperties.value = {\n      x: element.properties.x || 20.5,\n      y: element.properties.y || 25,\n      w: element.properties.width || 100,\n      h: element.properties.height || 100,\n      r: element.properties.rotation || 0,\n      content: element.properties.content || \"https://example.com\",\n      size: element.properties.size || 100,\n    };\n  } else {\n    currentProperties.value = {\n      x: element.properties.x || 0,\n      y: element.properties.y || 0,\n      w: element.properties.width || 100,\n      h: element.properties.height || 100,\n      r: element.properties.rotation || 0,\n    };\n  }\n};\n\nconst deleteElement = () => {\n  if (!selectedElement.value) return;\n\n  const index = elements.value.findIndex((e) => e.id === selectedElement.value);\n  if (index === -1) return;\n\n  elements.value.splice(index, 1);\n  layers.value = layers.value.filter(\n    (layer) => layer.id !== selectedElement.value\n  );\n  selectedElement.value = null;\n  selectedLayer.value = null;\n  currentProperties.value = {};\n};\n\nconst savePosition = () => {\n  if (selectedElement.value === null) return;\n\n  const index = elements.value.findIndex((e) => e.id === selectedElement.value);\n  if (index === -1) return;\n\n  const element = elements.value[index];\n  if (element.type === \"text\") {\n    element.properties = {\n      ...element.properties,\n      x: currentProperties.value.x,\n      y: currentProperties.value.y,\n      width: currentProperties.value.w,\n      height: currentProperties.value.h,\n      rotation: currentProperties.value.r,\n      font: currentProperties.value.font,\n      fontStyle: currentProperties.value.fontStyle,\n      fontSize: currentProperties.value.fontSize,\n      fillColor: currentProperties.value.fillColor,\n      fillTransparency: currentProperties.value.fillTransparency,\n      text: currentProperties.value.text,\n      textDecoration: currentProperties.value.textDecoration,\n      color: currentProperties.value.color,\n      textAlign: currentProperties.value.textAlign,\n      verticalAlign: currentProperties.value.verticalAlign,\n      textTransform: currentProperties.value.textTransform,\n    };\n  } else if (\n    element.type === \"image\" ||\n    element.type === \"eventlogo\" ||\n    element.type === \"useravatar\"\n  ) {\n    element.properties = {\n      ...element.properties,\n      x: currentProperties.value.x,\n      y: currentProperties.value.y,\n      width: currentProperties.value.w,\n      height: currentProperties.value.h,\n      rotation: currentProperties.value.r,\n      src: currentProperties.value.src,\n      strokeColor: currentProperties.value.strokeColor,\n      strokeWidth: currentProperties.value.strokeWidth,\n      associatedData: currentProperties.value.associatedData,\n    };\n  } else if (element.type === \"qrcode\") {\n    element.properties = {\n      ...element.properties,\n      x: currentProperties.value.x,\n      y: currentProperties.value.y,\n      width: currentProperties.value.w,\n      height: currentProperties.value.h,\n      rotation: currentProperties.value.r,\n      content: currentProperties.value.content,\n      size: currentProperties.value.size,\n    };\n  } else {\n    element.properties = {\n      ...element.properties,\n      x: currentProperties.value.x,\n      y: currentProperties.value.y,\n      width: currentProperties.value.w,\n      height: currentProperties.value.h,\n      rotation: currentProperties.value.r,\n    };\n  }\n};\n\nconst saveDesign = () => {\n  const designData = {\n    elements: elements.value.map((element) => ({\n      ...element,\n      properties: { ...element.properties },\n    })),\n    layers: layers.value,\n    canvasSize: canvasSize.value,\n  };\n  console.log(\"Saving design:\", designData);\n  return designData;\n};\n\nconst loadDesign = (data) => {\n  elements.value = data.elements;\n  layers.value = data.layers;\n  canvasSize.value = data.canvasSize;\n  nextTick(() => elements.value.forEach(setupInteract));\n};\n\nconst handleCanvasClick = (event) => {\n  if (!event.target.closest(\"[data-element-id]\")) {\n    selectedElement.value = null;\n    selectedLayer.value = null;\n    currentProperties.value = {};\n  }\n};\n\nconst updateText = (elementId, event) => {\n  const element = elements.value.find((e) => e.id === elementId);\n  if (element && element.type === \"text\") {\n    element.properties.text = event.target.textContent;\n    currentProperties.value.text = event.target.textContent;\n    applyTextStyle();\n  }\n};\n\nconst dragStart = (type) => {\n  event.dataTransfer.setData(\"text/plain\", type);\n};\n\nconst onDrop = (event) => {\n  event.preventDefault();\n  const rect = canvas.value.getBoundingClientRect();\n  const x = event.clientX - rect.left;\n  const y = event.clientY - rect.top;\n  const type = event.dataTransfer.getData(\"text\");\n\n  if (type) {\n    const element = addElement(type, x, y);\n    if (element) {\n      selectElement(element.id);\n    }\n  }\n};\n\nconst toggleLayerVisibility = (index) => {\n  layers.value[index].visible = !layers.value[index].visible;\n  const elementIndex = elements.value.findIndex(\n    (e) => e.id === layers.value[index].id\n  );\n  if (elementIndex !== -1) {\n    elements.value[elementIndex].properties.lock = !layers.value[index].visible;\n    updateProperties();\n  }\n};\n\n// Alignment methods\nconst alignHorizontal = (alignment) => {\n  if (selectedElement.value === null) return;\n  const element = elements.value.find((e) => e.id === selectedElement.value);\n  if (!element) return;\n\n  const canvasRect = canvas.value.getBoundingClientRect();\n  const elementWidth = currentProperties.value.w || element.properties.width;\n\n  switch (alignment) {\n    case \"left\":\n      currentProperties.value.x = 0;\n      break;\n    case \"center\":\n      currentProperties.value.x = (canvasRect.width - elementWidth) / 2;\n      break;\n    case \"right\":\n      currentProperties.value.x = canvasRect.width - elementWidth;\n      break;\n  }\n  savePosition();\n};\n\nconst alignVertical = (alignment) => {\n  if (selectedElement.value === null) return;\n  const element = elements.value.find((e) => e.id === selectedElement.value);\n  if (!element) return;\n\n  const canvasRect = canvas.value.getBoundingClientRect();\n  const elementHeight = currentProperties.value.h || element.properties.height;\n\n  switch (alignment) {\n    case \"top\":\n      currentProperties.value.y = 0;\n      break;\n    case \"middle\":\n      currentProperties.value.y = (canvasRect.height - elementHeight) / 2;\n      break;\n    case \"bottom\":\n      currentProperties.value.y = canvasRect.height - elementHeight;\n      break;\n  }\n  savePosition();\n};\n\n// Text style methods\nconst toggleTextStyle = (style) => {\n  if (selectedElement.value === null) return;\n  const element = elements.value.find((e) => e.id === selectedElement.value);\n  if (!element || element.type !== \"text\") return;\n\n  if (style === \"bold\") {\n    currentProperties.value.fontStyle =\n      currentProperties.value.fontStyle === \"Bold\" ? \"Regular\" : \"Bold\";\n  } else if (style === \"italic\") {\n    currentProperties.value.fontStyle =\n      currentProperties.value.fontStyle === \"Italic\" ? \"Regular\" : \"Italic\";\n  } else if (style === \"underline\") {\n    currentProperties.value.textDecoration =\n      currentProperties.value.textDecoration === \"underline\"\n        ? \"none\"\n        : \"underline\";\n  }\n  applyTextStyle();\n};\n\nconst applyTextStyle = (newProperties = null) => {\n  if (selectedElement.value === null) return;\n  const element = elements.value.find((e) => e.id === selectedElement.value);\n  if (!element || element.type !== \"text\") return;\n\n  if (newProperties) {\n    currentProperties.value = { ...currentProperties.value, ...newProperties };\n  }\n\n  const target = document.querySelector(\n    `[data-element-id=\"${element.id}\"] div[contenteditable]`\n  );\n  if (target) {\n    target.style.fontFamily = currentProperties.value.font;\n    target.style.fontSize = `${currentProperties.value.fontSize}px`;\n    target.style.fontWeight =\n      currentProperties.value.fontStyle === \"Bold\" ? \"bold\" : \"normal\";\n    target.style.fontStyle =\n      currentProperties.value.fontStyle === \"Italic\" ? \"italic\" : \"normal\";\n    target.style.color = currentProperties.value.color;\n    target.style.backgroundColor = currentProperties.value.fillTransparency\n      ? \"transparent\"\n      : currentProperties.value.fillColor;\n    target.style.textDecoration = currentProperties.value.textDecoration;\n    target.style.textAlign =\n      displayOption.value === \"right side only\"\n        ? \"right\"\n        : currentProperties.value.textAlign;\n    target.style.verticalAlign = currentProperties.value.verticalAlign;\n    target.style.textTransform = currentProperties.value.textTransform;\n    target.style.direction =\n      displayOption.value === \"right side only\" ? \"rtl\" : \"ltr\";\n    target.setAttribute(\n      \"dir\",\n      displayOption.value === \"right side only\" ? \"rtl\" : \"ltr\"\n    );\n    target.textContent =\n      currentProperties.value.text || element.properties.exampleText;\n\n    // Ensure cursor is at the end for RTL\n    if (displayOption.value === \"right side only\") {\n      const range = document.createRange();\n      const selection = window.getSelection();\n      range.selectNodeContents(target);\n      range.collapse(false); // Collapse to the end\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n  savePosition();\n};\n\nconst makeTransparent = () => {\n  if (selectedElementType.value === \"text\") {\n    currentProperties.value.fillColor = \"rgba(0, 0, 0, 0)\";\n    currentProperties.value.fillTransparency = true;\n    applyTextStyle();\n  }\n};\n\nconst applyColor = (color) => {\n  if (selectedElementType.value === \"text\") {\n    currentProperties.value.fillColor = color;\n    currentProperties.value.fillTransparency = false;\n    applyTextStyle();\n    nextTick(() => {\n      const target = document.querySelector(\n        `[data-element-id=\"${selectedElement.value}\"] div[contenteditable]`\n      );\n      if (target)\n        target.style.backgroundColor = currentProperties.value.fillColor;\n    });\n  }\n};\n\nconst applyTextAlign = (align) => {\n  if (selectedElementType.value === \"text\") {\n    currentProperties.value.textAlign = align;\n    applyTextStyle();\n  }\n};\n\nconst applyVerticalAlign = (align) => {\n  if (selectedElementType.value === \"text\") {\n    currentProperties.value.verticalAlign = align;\n    applyTextStyle();\n  }\n};\n\nconst applyTextTransform = (transform) => {\n  if (selectedElementType.value === \"text\") {\n    currentProperties.value.textTransform = transform;\n    applyTextStyle();\n  }\n};\n\nconst applyDisplayOption = (option) => {\n  displayOption.value = option;\n  applyTextStyle();\n};\n\n// Watch selectedElement to update properties\nwatch(selectedElement, () => {\n  updateProperties();\n  if (selectedElement.value) applyTextStyle();\n});\n\n// Watch currentProperties to save changes\nwatch(currentProperties, () => savePosition(), { deep: true });\n\n// Initialize interact.js\nonMounted(() => {\n  elements.value.forEach(setupInteract);\n});\n\nwatch(displayOption, () => {\n  applyTextStyle();\n});\n</script>\n\n<script>\nexport default {\n  components: {\n    qrcode: {\n      props: [\"content\", \"size\"],\n      template: `<div><canvas :width=\"size\" :height=\"size\" ref=\"qr\"></canvas></div>`,\n      mounted() {\n        this.updateQR();\n      },\n      watch: {\n        content() {\n          this.updateQR();\n        },\n        size() {\n          this.updateQR();\n        },\n      },\n      methods: {\n        async updateQR() {\n          if (!this.$refs.qr || !this.content || !this.size) return;\n          try {\n            const qrcode = await import(\"qrcode\");\n            const toCanvas = qrcode.default?.toCanvas || qrcode.toCanvas;\n            if (toCanvas) {\n              toCanvas(\n                this.$refs.qr,\n                this.content,\n                {\n                  width: this.size,\n                  errorCorrectionLevel: \"H\",\n                },\n                (error) => {\n                  if (error) console.error(\"Failed to render QR code:\", error);\n                }\n              );\n            } else {\n              console.error(\"toCanvas function not found in qrcode module\");\n            }\n          } catch (err) {\n            console.error(\"Failed to load qrcode module:\", err);\n          }\n        },\n      },\n    },\n  },\n};\n</script>\n\n<style scoped>\n.draggable {\n  user-select: none;\n  touch-action: none;\n}\n\n[contenteditable] {\n  outline: none;\n  user-select: text;\n  white-space: pre-wrap;\n  unicode-bidi: embed;\n  overflow-wrap: break-word;\n}\n\nimg {\n  max-width: 100%;\n  max-height: 100%;\n  border: 1px solid;\n  border-width: 1px;\n}\n\ncanvas {\n  display: block;\n}\n</style>\n"],"file":"_nuxt/D7o5ChWg.js"}