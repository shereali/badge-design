{"version":3,"file":"D5Wv_PpS.js","sources":["../../../../../../../modules/designbadge/components/Canvas.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      ref=\"canvas\"\r\n      class=\"absolute w-full h-full bg-white select-none\"\r\n      :style=\"{\r\n        background:\r\n          props.modelValue === store.frontBoxes\r\n            ? store.frontBackground || 'white'\r\n            : store.backBackground || 'white',\r\n      }\"\r\n      @mousedown=\"handleCanvasClick\"\r\n    >\r\n      <!-- Vertical & Horizontal Guide Lines -->\r\n      <template v-if=\"selectedBox && selectedBox.isDragging\">\r\n        <div\r\n          class=\"absolute top-0 bottom-0 w-px bg-blue-500 z-0\"\r\n          :style=\"{\r\n            left:\r\n              selectedBox.position.left +\r\n              selectedBox.properties.size.width / 2 +\r\n              'px',\r\n          }\"\r\n        ></div>\r\n        <div\r\n          class=\"absolute left-0 right-0 h-px bg-blue-500 z-0\"\r\n          :style=\"{\r\n            top:\r\n              selectedBox.position.top +\r\n              selectedBox.properties.size.height / 2 +\r\n              'px',\r\n          }\"\r\n        ></div>\r\n      </template>\r\n\r\n      <!-- Draggable Elements -->\r\n      <template v-for=\"(box, index) in store.boxes\" :key=\"box.id\">\r\n        <div\r\n          v-if=\"box.visible\"\r\n          class=\"absolute border group border-blue-500\"\r\n          :class=\"{\r\n            'border-2 border-blue-500': box.isSelected,\r\n            'border border-transparent': !box.isSelected,\r\n          }\"\r\n          :style=\"{\r\n            top: box.position.top + 'px',\r\n            left: box.position.left + 'px',\r\n            width: box.properties.size.width + 'px',\r\n            height: box.properties.size.height + 'px',\r\n            transform: `rotate(${box.properties.rotation}deg)`,\r\n            transformOrigin: 'center center',\r\n            backgroundColor: box.properties.fillTransparency\r\n              ? 'transparent'\r\n              : box.properties.fillColor || '#ffffff',\r\n            border:\r\n              box.properties.strokeWidth > 0\r\n                ? `${box.properties.strokeWidth}px solid ${box.properties.strokeColor}`\r\n                : 'none',\r\n            zIndex: box.zIndex || 0,\r\n          }\"\r\n          @mousedown.stop=\"activateElement(index, $event)\"\r\n          @keydown=\"deleteItem($event)\"\r\n        >\r\n          <!-- Selected-only elements -->\r\n          <template v-if=\"box.isSelected\">\r\n            <!-- Label (Dynamic) -->\r\n            <div\r\n              v-if=\"box.label\"\r\n              class=\"absolute -top-5 left-0 px-1 text-xs text-white bg-blue-600\"\r\n            >\r\n              {{ box.label }}\r\n            </div>\r\n\r\n            <!-- Distance (Only on Drag) -->\r\n            <template v-if=\"box.isDragging\">\r\n              <div\r\n                class=\"absolute left-1/2 -top-10 -translate-x-1/2 text-xs text-red-500\"\r\n              >\r\n                Y: {{ Math.round(box.position.top) }}\r\n              </div>\r\n              <div\r\n                class=\"absolute -left-6 top-1/2 -translate-y-1/2 text-xs text-red-500\"\r\n              >\r\n                {{\r\n                  Math.round(box.position.left + box.properties.size.width / 2)\r\n                }}\r\n              </div>\r\n              <div\r\n                class=\"absolute -right-6 top-1/2 -translate-y-1/2 text-xs text-red-500\"\r\n              >\r\n                {{\r\n                  Math.round(\r\n                    canvasWidth -\r\n                      box.position.left -\r\n                      box.properties.size.width / 2\r\n                  )\r\n                }}\r\n              </div>\r\n              <div\r\n                class=\"absolute left-1/2 -bottom-5 -translate-x-1/2 text-xs text-red-500\"\r\n              >\r\n                {{\r\n                  Math.round(\r\n                    canvasHeight -\r\n                      box.position.top -\r\n                      box.properties.size.height / 2\r\n                  )\r\n                }}\r\n              </div>\r\n            </template>\r\n\r\n            <!-- Rotate Icon -->\r\n            <div\r\n              class=\"rotate-icon\"\r\n              @mousedown.stop.prevent=\"startRotate(index, $event)\"\r\n            >\r\n              <Icon name=\"line-md:rotate-270\" class=\"text-blue-600\" />\r\n            </div>\r\n\r\n            <!-- Resizing Handles -->\r\n            <div\r\n              v-for=\"dir in directions\"\r\n              :key=\"dir\"\r\n              :class=\"['handle', dir]\"\r\n              @mousedown.stop.prevent=\"startResize(index, dir)\"\r\n            ></div>\r\n          </template>\r\n\r\n          <!-- Content -->\r\n          <component\r\n            v-if=\"\r\n              checkElementTypes.find((item) =>\r\n                checkElementTypes.includes(box.type)\r\n              )\r\n            \"\r\n            :is=\"box.type\"\r\n            contenteditable\r\n            class=\"focus:border focus:outline-none focus:border-blue-500 cursor-move leading-tight w-full h-full flex\"\r\n            :class=\"[verticalAlignClass(box), horizontalAlignClass(box)]\"\r\n            :style=\"textStyles(box)\"\r\n            :ref=\"(el) => setTextElementRef(box.id, el)\"\r\n            @input=\"updateText(box, $event)\"\r\n            @click=\"preserveCursorPosition($event)\"\r\n          >\r\n            {{ box.text }}\r\n          </component>\r\n\r\n          <img\r\n            v-if=\"box.type === 'img'\"\r\n            :src=\"box.properties.src.src\"\r\n            class=\"w-full h-full object-contain cursor-pointer select-none\"\r\n            @keydown=\"deleteItem($event)\"\r\n            @error=\"handleImageError\"\r\n          />\r\n          <img\r\n            v-if=\"box.type === 'background'\"\r\n            :src=\"box.properties.src.src\"\r\n            class=\"h-full w-screen bg-cover bg-center cursor-pointer select-none\"\r\n            @keydown=\"deleteItem($event)\"\r\n            @error=\"handleImageError\"\r\n          />\r\n\r\n          <Qrcode\r\n            v-if=\"box.type === 'qrcode'\"\r\n            :value=\"box.properties.qrcode.value\"\r\n            :variant=\"box.properties.qrcode.variant\"\r\n            :radius=\"box.properties.qrcode.radius\"\r\n            :blackColor=\"box.properties.qrcode.blackColor\"\r\n            :whiteColor=\"box.properties.qrcode.whiteColor\"\r\n            @keydown=\"deleteItem(index, $event)\"\r\n          />\r\n        </div>\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useCanvasStore } from \"@/stores/useCanvasStore\";\r\nimport { ref, computed, watch, nextTick } from \"vue\";\r\n\r\nconst store = useCanvasStore();\r\nconst props = defineProps({\r\n  modelValue: Array,\r\n});\r\n\r\nconst canvas = ref(null);\r\nconst checkElementTypes = [\"h1\", \"h2\", \"h3\", \"h4\", \"h6\", \"p\", \"a\", \"span\"];\r\nconst directions = [\r\n  \"top-left\",\r\n  \"top\",\r\n  \"top-right\",\r\n  \"right\",\r\n  \"bottom-right\",\r\n  \"bottom\",\r\n  \"bottom-left\",\r\n  \"left\",\r\n];\r\n\r\nconst canvasWidth = ref(0);\r\nconst canvasHeight = ref(0);\r\nlet resizeDir = \"\";\r\nlet dragOffset = { x: 0, y: 0 };\r\nlet selectedBoxIndex = -1;\r\nconst textElements = ref({});\r\n\r\nonMounted(() => {\r\n  const resizeObserver = new ResizeObserver(() => {\r\n    canvasWidth.value = canvas.value?.offsetWidth;\r\n    canvasHeight.value = canvas.value?.offsetHeight;\r\n  });\r\n  resizeObserver.observe(canvas.value);\r\n});\r\n\r\nfunction setTextElementRef(id, el) {\r\n  if (el) {\r\n    textElements.value[id] = el;\r\n  }\r\n}\r\n\r\nfunction handleCanvasClick() {\r\n  store.boxes.forEach((b) => (b.isSelected = false));\r\n  selectedBoxIndex = -1;\r\n  store.selectedElement = null;\r\n  store.updateProperties();\r\n}\r\n\r\nfunction activateElement(index, event) {\r\n  store.boxes.forEach((b, i) => (b.isSelected = i === index));\r\n  selectedBoxIndex = index;\r\n  startDrag(index, event);\r\n  store.selectedElement = store.boxes[index].id;\r\n  store.selectedElementType = store.boxes[index].type;\r\n  store.activeTab = \"properties\";\r\n  store.updateProperties();\r\n  console.log(\"element type\", store.selectedElementType);\r\n\r\n  if ([\"h1\", \"p\"].includes(store.boxes[index].type)) {\r\n    nextTick(() => {\r\n      const el = textElements.value[store.boxes[index].id];\r\n      if (el) el.focus();\r\n    });\r\n  }\r\n}\r\n\r\nfunction deleteItem(event) {\r\n  if (event.key === \"Delete\" && store.selectedElement) {\r\n    const index = store.boxes.findIndex(\r\n      (item) => item.id === store.selectedElement\r\n    );\r\n    if (index !== -1) {\r\n      store.boxes.splice(index, 1);\r\n      store.selectedElement = null;\r\n    }\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  document.addEventListener(\"keydown\", deleteItem);\r\n});\r\n\r\nfunction startDrag(index, event) {\r\n  const box = store.boxes[index];\r\n  dragOffset.x = event.clientX - box.position.left;\r\n  dragOffset.y = event.clientY - box.position.top;\r\n  box.isDragging = true;\r\n  document.addEventListener(\"mousemove\", onDrag);\r\n  document.addEventListener(\"mouseup\", stopActions);\r\n}\r\n\r\nfunction onDrag(event) {\r\n  const box = store.boxes[selectedBoxIndex];\r\n  const canvasRect = canvas.value.getBoundingClientRect();\r\n  let newLeft = event.clientX - dragOffset.x;\r\n  let newTop = event.clientY - dragOffset.y;\r\n\r\n  newLeft = Math.max(\r\n    0,\r\n    Math.min(canvasRect.width - box.properties.size.width, newLeft)\r\n  );\r\n  newTop = Math.max(\r\n    0,\r\n    Math.min(canvasRect.height - box.properties.size.height, newTop)\r\n  );\r\n\r\n  box.position.left = newLeft;\r\n  box.position.top = newTop;\r\n  store.currentProperties.x = newLeft;\r\n  store.currentProperties.y = newTop;\r\n  store.updateProperties(store.currentProperties);\r\n}\r\n\r\nfunction startResize(index, dir) {\r\n  selectedBoxIndex = index;\r\n  resizeDir = dir;\r\n  document.addEventListener(\"mousemove\", onResize);\r\n  document.addEventListener(\"mouseup\", stopActions);\r\n}\r\n\r\nfunction onResize(event) {\r\n  const box = store.boxes[selectedBoxIndex];\r\n  const minSize = 40;\r\n  const dx = event.movementX;\r\n  const dy = event.movementY;\r\n\r\n  if (resizeDir.includes(\"right\"))\r\n    box.properties.size.width = Math.max(\r\n      minSize,\r\n      box.properties.size.width + dx\r\n    );\r\n\r\n  if (resizeDir.includes(\"left\")) {\r\n    box.properties.size.width = Math.max(\r\n      minSize,\r\n      box.properties.size.width - dx\r\n    );\r\n    box.position.left += dx;\r\n  }\r\n  if (resizeDir.includes(\"bottom\"))\r\n    box.properties.size.height = Math.max(\r\n      minSize,\r\n      box.properties.size.height + dy\r\n    );\r\n  if (resizeDir.includes(\"top\")) {\r\n    box.properties.size.height = Math.max(\r\n      minSize,\r\n      box.properties.size.height - dy\r\n    );\r\n    box.position.top += dy;\r\n  }\r\n\r\n  store.currentProperties.size = { ...box.properties.size };\r\n  store.currentProperties.x = box.position.left;\r\n  store.currentProperties.y = box.position.top;\r\n  store.updateProperties(store.currentProperties);\r\n}\r\n\r\nfunction startRotate(index, event) {\r\n  const box = store.boxes[index];\r\n  const centerX = box.position.left + box.properties.size.width / 2;\r\n  const centerY = box.position.top + box.properties.size.height / 2;\r\n\r\n  const startX = event.clientX;\r\n  const startY = event.clientY;\r\n\r\n  const dxStart = startX - centerX;\r\n  const dyStart = startY - centerY;\r\n  const startAngle = Math.atan2(dyStart, dxStart) * (360 / Math.PI);\r\n  const initialRotation = box.properties.rotation;\r\n\r\n  function rotate(e) {\r\n    const dx = e.clientX - centerX;\r\n    const dy = e.clientY - centerY;\r\n    const currentAngle = Math.atan2(dy, dx) * (360 / Math.PI);\r\n\r\n    const delta = (currentAngle - startAngle) * 12;\r\n\r\n    box.properties.rotation = (initialRotation + delta + 360) % 360;\r\n    store.currentProperties.rotation = Math.floor(box.properties.rotation);\r\n    store.updateProperties(store.currentProperties);\r\n  }\r\n\r\n  function stopRotate() {\r\n    document.removeEventListener(\"mousemove\", rotate);\r\n    document.removeEventListener(\"mouseup\", stopRotate);\r\n  }\r\n\r\n  document.addEventListener(\"mousemove\", rotate);\r\n  document.addEventListener(\"mouseup\", stopRotate);\r\n}\r\n\r\nfunction stopActions() {\r\n  store.boxes.forEach((b) => (b.isDragging = false));\r\n  document.removeEventListener(\"mousemove\", onDrag);\r\n  document.removeEventListener(\"mousemove\", onResize);\r\n  document.removeEventListener(\"mouseup\", stopActions);\r\n}\r\n\r\nfunction preserveCursorPosition(event) {\r\n  const selection = window.getSelection();\r\n  if (selection && selection.rangeCount > 0) {\r\n    const range = selection.getRangeAt(0);\r\n    store.cursorPosition = {\r\n      node: range.startContainer,\r\n      offset: range.startOffset,\r\n    };\r\n  }\r\n}\r\n\r\nfunction updateText(box, event) {\r\n  const el = event.target;\r\n  const selection = window.getSelection();\r\n  let cursorOffset = 0;\r\n  let cursorNode = null;\r\n\r\n  if (selection && selection.rangeCount > 0) {\r\n    const range = selection.getRangeAt(0);\r\n    cursorNode = range.startContainer;\r\n    cursorOffset = range.startOffset;\r\n  }\r\n\r\n  const newText = el.innerText;\r\n  store.updateElementText(box.id, newText);\r\n  store.currentProperties.text = newText;\r\n  store.updateProperties(store.currentProperties);\r\n\r\n  if (cursorNode && cursorOffset !== null) {\r\n    nextTick(() => {\r\n      const range = document.createRange();\r\n      try {\r\n        range.setStart(cursorNode, cursorOffset);\r\n        range.collapse(true);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      } catch (e) {\r\n        console.warn(\"Failed to restore cursor position:\", e);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction handleImageError(event) {\r\n  console.error(\"Image failed to load:\", event.target.src);\r\n}\r\n\r\nconst selectedBox = computed(() => store.boxes.find((b) => b.isSelected));\r\n\r\nfunction textStyles(box) {\r\n  const calculatedSize = Math.max(\r\n    12,\r\n    Math.min(\r\n      48,\r\n      box.type === \"p\"\r\n        ? box.properties.size.height * 0.2\r\n        : box.properties.size.height * 0.4\r\n    )\r\n  );\r\n  return {\r\n    fontSize:\r\n      box.properties.fontSize === \"Auto\" || !box.properties.fontSize\r\n        ? calculatedSize + \"px\"\r\n        : box.properties.fontSize + \"px\",\r\n    fontFamily: box.properties.font || \"poppins, sans-serif\",\r\n    fontWeight: box.properties.fontWeight || \"normal\",\r\n    fontStyle: box.properties.fontStyle || \"normal\",\r\n    textDecoration: box.properties.textDecoration || \"none\",\r\n    textTransform: box.properties.textTransform || \"none\",\r\n    color: box.properties.color || \"black\",\r\n    direction: box.properties.direction || \"ltr\",\r\n  };\r\n}\r\n\r\nfunction horizontalAlignClass(box) {\r\n  let align = \"justify-center\";\r\n  if (box.properties.horizontalAlign === \"left\") align = \"justify-start\";\r\n  if (box.properties.horizontalAlign === \"center\") align = \"justify-center\";\r\n  if (box.properties.horizontalAlign === \"right\") align = \"justify-end\";\r\n  return [align];\r\n}\r\n\r\nfunction verticalAlignClass(box) {\r\n  let align = \"items-center\";\r\n  if (box.properties.verticalAlign === \"top\") align = \"items-start\";\r\n  if (box.properties.verticalAlign === \"middle\") align = \"items-center\";\r\n  if (box.properties.verticalAlign === \"bottom\") align = \"items-end\";\r\n  return [align];\r\n}\r\n\r\nwatch(\r\n  () => store.selectedElement,\r\n  (newId) => {\r\n    if (newId) {\r\n      const box = store.boxes.find((b) => b.id === newId);\r\n      if (box && [\"h1\", \"p\"].includes(box.type)) {\r\n        nextTick(() => {\r\n          const el = textElements.value[newId];\r\n          if (el) {\r\n            el.focus();\r\n            const range = document.createRange();\r\n            const selection = window.getSelection();\r\n            range.selectNodeContents(el);\r\n            range.collapse(false);\r\n            selection.removeAllRanges();\r\n            selection.addRange(range);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n);\r\n</script>\r\n\r\n<style scoped>\r\n.handle {\r\n  width: 8px;\r\n  height: 8px;\r\n  background-color: white;\r\n  border: 1px solid blue;\r\n  position: absolute;\r\n  z-index: 10;\r\n}\r\n\r\n.top-left {\r\n  top: -4px;\r\n  left: -4px;\r\n  cursor: nwse-resize;\r\n}\r\n.top {\r\n  top: -4px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  cursor: ns-resize;\r\n}\r\n.top-right {\r\n  top: -4px;\r\n  right: -4px;\r\n  cursor: nesw-resize;\r\n}\r\n.right {\r\n  top: 50%;\r\n  right: -4px;\r\n  transform: translateY(-50%);\r\n  cursor: ew-resize;\r\n}\r\n.bottom-right {\r\n  bottom: -4px;\r\n  right: -4px;\r\n  cursor: nwse-resize;\r\n}\r\n.bottom {\r\n  bottom: -4px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  cursor: ns-resize;\r\n}\r\n.bottom-left {\r\n  bottom: -4px;\r\n  left: -4px;\r\n  cursor: nesw-resize;\r\n}\r\n.left {\r\n  top: 50%;\r\n  left: -4px;\r\n  transform: translateY(-50%);\r\n  cursor: ew-resize;\r\n}\r\n\r\n.rotate-icon {\r\n  position: absolute;\r\n  top: -30px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  cursor: grab;\r\n  font-size: 18px;\r\n  user-select: none;\r\n}\r\n\r\n[contenteditable] {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n"],"names":["store","useCanvasStore","props","__props","canvas","ref","checkElementTypes","directions","canvasWidth","canvasHeight","resizeDir","dragOffset","selectedBoxIndex","textElements","onMounted","setTextElementRef","id","el","handleCanvasClick","b","activateElement","index","event","i","startDrag","nextTick","deleteItem","item","box","onDrag","stopActions","canvasRect","newLeft","newTop","startResize","dir","onResize","minSize","dx","dy","startRotate","centerX","centerY","startX","startY","dxStart","dyStart","startAngle","initialRotation","rotate","e","delta","stopRotate","preserveCursorPosition","selection","range","updateText","cursorOffset","cursorNode","newText","handleImageError","selectedBox","computed","textStyles","calculatedSize","horizontalAlignClass","align","verticalAlignClass","watch","newId","_createElementBlock","_createElementVNode","_normalizeStyle","_unref","_Fragment","_openBlock","_withModifiers","$event","_cache","_hoisted_2","_toDisplayString","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createVNode","_component_Icon","_renderList","_createBlock","_resolveDynamicComponent","_normalizeClass","_createTextVNode","_component_Qrcode"],"mappings":"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"}