import{k as y,X as C,$ as L,L as rt,ai as ot,a3 as it,a9 as j,aj as st,r as at,ak as lt,d as ct,al as ht,n as ut,h as dt,ag as ft}from"./BrzRvvIN.js";import{u as V}from"./B7XYhvKA.js";function pt(e){if(!C(e))return L(e);const t=new Proxy({},{get(n,r,o){return rt(Reflect.get(e.value,r,o))},set(n,r,o){return C(e.value[r])&&!C(o)?e.value[r].value=o:e.value[r]=o,!0},deleteProperty(n,r){return Reflect.deleteProperty(e.value,r)},has(n,r){return Reflect.has(e.value,r)},ownKeys(){return Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return L(t)}function mt(e){return pt(y(e))}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const gt=()=>{};function $t(...e){if(e.length!==1)return j(...e);const t=e[0];return typeof t=="function"?st(lt(()=>({get:t,set:gt}))):at(t)}function Pt(e,...t){const n=t.flat(),r=n[0];return mt(()=>Object.fromEntries(typeof r=="function"?Object.entries(ot(e)).filter(([o,i])=>r(it(i),o)):n.map(o=>[o,$t(e,o)])))}var b=(e=>(e[e.Border=-1]="Border",e[e.Data=0]="Data",e[e.Function=1]="Function",e[e.Position=2]="Position",e[e.Timing=3]="Timing",e[e.Alignment=4]="Alignment",e))(b||{}),Mt=Object.defineProperty,bt=(e,t,n)=>t in e?Mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t,n)=>(bt(e,typeof t!="symbol"?t+"":t,n),n);const kt=[0,1],U=[1,0],H=[2,3],G=[3,2],vt={L:kt,M:U,Q:H,H:G},Et=/^[0-9]*$/,wt=/^[A-Z0-9 $%*+.\/:-]*$/,I="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",S=1,x=40,W=3,At=3,w=40,Rt=10,Y=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],q=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];class Ct{constructor(t,n,r,o){if(this.version=t,this.ecc=n,E(this,"size"),E(this,"mask"),E(this,"modules",[]),E(this,"types",[]),t<S||t>x)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=t*4+17;const i=Array.from({length:this.size},()=>!1);for(let c=0;c<this.size;c++)this.modules.push(i.slice()),this.types.push(i.map(()=>0));this.drawFunctionPatterns();const s=this.addEccAndInterleave(r);if(this.drawCodewords(s),o===-1){let c=1e9;for(let a=0;a<8;a++){this.applyMask(a),this.drawFormatBits(a);const l=this.getPenaltyScore();l<c&&(o=a,c=l),this.applyMask(a)}}this.mask=o,this.applyMask(o),this.drawFormatBits(o)}getModule(t,n){return t>=0&&t<this.size&&n>=0&&n<this.size&&this.modules[n][t]}drawFunctionPatterns(){for(let r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2===0,b.Timing),this.setFunctionModule(r,6,r%2===0,b.Timing);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),n=t.length;for(let r=0;r<n;r++)for(let o=0;o<n;o++)r===0&&o===0||r===0&&o===n-1||r===n-1&&o===0||this.drawAlignmentPattern(t[r],t[o]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const n=this.ecc[1]<<3|t;let r=n;for(let i=0;i<10;i++)r=r<<1^(r>>>9)*1335;const o=(n<<10|r)^21522;for(let i=0;i<=5;i++)this.setFunctionModule(8,i,P(o,i));this.setFunctionModule(8,7,P(o,6)),this.setFunctionModule(8,8,P(o,7)),this.setFunctionModule(7,8,P(o,8));for(let i=9;i<15;i++)this.setFunctionModule(14-i,8,P(o,i));for(let i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,P(o,i));for(let i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,P(o,i));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let r=0;r<12;r++)t=t<<1^(t>>>11)*7973;const n=this.version<<12|t;for(let r=0;r<18;r++){const o=P(n,r),i=this.size-11+r%3,s=Math.floor(r/3);this.setFunctionModule(i,s,o),this.setFunctionModule(s,i,o)}}drawFinderPattern(t,n){for(let r=-4;r<=4;r++)for(let o=-4;o<=4;o++){const i=Math.max(Math.abs(o),Math.abs(r)),s=t+o,c=n+r;s>=0&&s<this.size&&c>=0&&c<this.size&&this.setFunctionModule(s,c,i!==2&&i!==4,b.Position)}}drawAlignmentPattern(t,n){for(let r=-2;r<=2;r++)for(let o=-2;o<=2;o++)this.setFunctionModule(t+o,n+r,Math.max(Math.abs(o),Math.abs(r))!==1,b.Alignment)}setFunctionModule(t,n,r,o=b.Function){this.modules[n][t]=r,this.types[n][t]=o}addEccAndInterleave(t){const n=this.version,r=this.ecc;if(t.length!==A(n,r))throw new RangeError("Invalid argument");const o=q[r[0]][n],i=Y[r[0]][n],s=Math.floor(B(n)/8),c=o-s%o,a=Math.floor(s/o),l=[],h=Ot(i);for(let u=0,f=0;u<o;u++){const p=t.slice(f,f+a-i+(u<c?0:1));f+=p.length;const m=Ft(p,h);u<c&&p.push(0),l.push(p.concat(m))}const d=[];for(let u=0;u<l[0].length;u++)l.forEach((f,p)=>{(u!==a-i||p>=c)&&d.push(f[u])});return d}drawCodewords(t){if(t.length!==Math.floor(B(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let r=this.size-1;r>=1;r-=2){r===6&&(r=5);for(let o=0;o<this.size;o++)for(let i=0;i<2;i++){const s=r-i,a=(r+1&2)===0?this.size-1-o:o;!this.types[a][s]&&n<t.length*8&&(this.modules[a][s]=P(t[n>>>3],7-(n&7)),n++)}}}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let r=0;r<this.size;r++){let o;switch(t){case 0:o=(r+n)%2===0;break;case 1:o=n%2===0;break;case 2:o=r%3===0;break;case 3:o=(r+n)%3===0;break;case 4:o=(Math.floor(r/3)+Math.floor(n/2))%2===0;break;case 5:o=r*n%2+r*n%3===0;break;case 6:o=(r*n%2+r*n%3)%2===0;break;case 7:o=((r+n)%2+r*n%3)%2===0;break;default:throw new Error("Unreachable")}!this.types[n][r]&&o&&(this.modules[n][r]=!this.modules[n][r])}}getPenaltyScore(){let t=0;for(let i=0;i<this.size;i++){let s=!1,c=0;const a=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[i][l]===s?(c++,c===5?t+=W:c>5&&t++):(this.finderPenaltyAddHistory(c,a),s||(t+=this.finderPenaltyCountPatterns(a)*w),s=this.modules[i][l],c=1);t+=this.finderPenaltyTerminateAndCount(s,c,a)*w}for(let i=0;i<this.size;i++){let s=!1,c=0;const a=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[l][i]===s?(c++,c===5?t+=W:c>5&&t++):(this.finderPenaltyAddHistory(c,a),s||(t+=this.finderPenaltyCountPatterns(a)*w),s=this.modules[l][i],c=1);t+=this.finderPenaltyTerminateAndCount(s,c,a)*w}for(let i=0;i<this.size-1;i++)for(let s=0;s<this.size-1;s++){const c=this.modules[i][s];c===this.modules[i][s+1]&&c===this.modules[i+1][s]&&c===this.modules[i+1][s+1]&&(t+=At)}let n=0;for(const i of this.modules)n=i.reduce((s,c)=>s+(c?1:0),n);const r=this.size*this.size,o=Math.ceil(Math.abs(n*20-r*10)/r)-1;return t+=o*Rt,t}getAlignmentPatternPositions(){if(this.version===1)return[];{const t=Math.floor(this.version/7)+2,n=this.version===32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,r=[6];for(let o=this.size-7;r.length<t;o-=n)r.splice(1,0,o);return r}}finderPenaltyCountPatterns(t){const n=t[1],r=n>0&&t[2]===n&&t[3]===n*3&&t[4]===n&&t[5]===n;return(r&&t[0]>=n*4&&t[6]>=n?1:0)+(r&&t[6]>=n*4&&t[0]>=n?1:0)}finderPenaltyTerminateAndCount(t,n,r){return t&&(this.finderPenaltyAddHistory(n,r),n=0),n+=this.size,this.finderPenaltyAddHistory(n,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(t,n){n[0]===0&&(t+=this.size),n.pop(),n.unshift(t)}}function M(e,t,n){if(t<0||t>31||e>>>t)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function P(e,t){return(e>>>t&1)!==0}class N{constructor(t,n,r){if(this.mode=t,this.numChars=n,this.bitData=r,n<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}getData(){return this.bitData.slice()}}const It=[1,10,12,14],yt=[2,9,11,13],Bt=[4,8,16,16];function X(e,t){return e[Math.floor((t+7)/17)+1]}function Z(e){const t=[];for(const n of e)M(n,8,t);return new N(Bt,e.length,t)}function _t(e){if(!K(e))throw new RangeError("String contains non-numeric characters");const t=[];for(let n=0;n<e.length;){const r=Math.min(e.length-n,3);M(Number.parseInt(e.substring(n,n+r),10),r*3+1,t),n+=r}return new N(It,e.length,t)}function St(e){if(!J(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");const t=[];let n;for(n=0;n+2<=e.length;n+=2){let r=I.indexOf(e.charAt(n))*45;r+=I.indexOf(e.charAt(n+1)),M(r,11,t)}return n<e.length&&M(I.indexOf(e.charAt(n)),6,t),new N(yt,e.length,t)}function xt(e){return e===""?[]:K(e)?[_t(e)]:J(e)?[St(e)]:[Z(Dt(e))]}function K(e){return Et.test(e)}function J(e){return wt.test(e)}function Nt(e,t){let n=0;for(const r of e){const o=X(r.mode,t);if(r.numChars>=1<<o)return Number.POSITIVE_INFINITY;n+=4+o+r.bitData.length}return n}function Dt(e){e=encodeURI(e);const t=[];for(let n=0;n<e.length;n++)e.charAt(n)!=="%"?t.push(e.charCodeAt(n)):(t.push(Number.parseInt(e.substring(n+1,n+3),16)),n+=2);return t}function B(e){if(e<S||e>x)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return t}function A(e,t){return Math.floor(B(e)/8)-Y[t[0]][e]*q[t[0]][e]}function Ot(e){if(e<1||e>255)throw new RangeError("Degree out of range");const t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let n=1;for(let r=0;r<e;r++){for(let o=0;o<t.length;o++)t[o]=_(t[o],n),o+1<t.length&&(t[o]^=t[o+1]);n=_(n,2)}return t}function Ft(e,t){const n=t.map(r=>0);for(const r of e){const o=r^n.shift();n.push(0),t.forEach((i,s)=>n[s]^=_(i,o))}return n}function _(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^(n>>>7)*285,n^=(t>>>r&1)*e;return n}function Tt(e,t,n=1,r=40,o=-1,i=!0){if(!(S<=n&&n<=r&&r<=x)||o<-1||o>7)throw new RangeError("Invalid value");let s,c;for(s=n;;s++){const d=A(s,t)*8,u=Nt(e,s);if(u<=d){c=u;break}if(s>=r)throw new RangeError("Data too long")}for(const d of[U,H,G])i&&c<=A(s,d)*8&&(t=d);const a=[];for(const d of e){M(d.mode[0],4,a),M(d.numChars,X(d.mode,s),a);for(const u of d.getData())a.push(u)}const l=A(s,t)*8;M(0,Math.min(4,l-a.length),a),M(0,(8-a.length%8)%8,a);for(let d=236;a.length<l;d^=253)M(d,8,a);const h=Array.from({length:Math.ceil(a.length/8)},()=>0);return a.forEach((d,u)=>h[u>>>3]|=d<<7-(u&7)),new Ct(s,t,h,o)}function Lt(e,t){const{ecc:n="L",boostEcc:r=!1,minVersion:o=1,maxVersion:i=40,maskPattern:s=-1,border:c=1}=t||{},a=typeof e=="string"?xt(e):Array.isArray(e)?[Z(e)]:void 0;if(!a)throw new Error(`uqr only supports encoding string and binary data, but got: ${typeof e}`);const l=Tt(a,vt[n],o,i,s,r),h=Vt({version:l.version,maskPattern:l.mask,size:l.size,data:l.modules,types:l.types},c);return t?.invert&&(h.data=h.data.map(d=>d.map(u=>!u))),t?.onEncoded?.(h),h}function Vt(e,t=1){if(!t)return e;const{size:n}=e,r=n+t*2;e.size=r,e.data.forEach(i=>{for(let s=0;s<t;s++)i.unshift(!1),i.push(!1)});for(let i=0;i<t;i++)e.data.unshift(Array.from({length:r},s=>!1)),e.data.push(Array.from({length:r},s=>!1));const o=b.Border;e.types.forEach(i=>{for(let s=0;s<t;s++)i.unshift(o),i.push(o)});for(let i=0;i<t;i++)e.types.unshift(Array.from({length:r},s=>o)),e.types.push(Array.from({length:r},s=>o));return e}function Wt(e){const{whiteColor:t="white",blackColor:n="black",invert:r=!1}=e;return{backgroundColor:r?n:t,foregroundColor:r?t:n}}function Q(e,t=z){return{height:e*t,width:e*t}}function jt(e,t=g){const n=typeof e=="number"?e:e?.pixel??t,r=typeof e=="number"?e:e?.marker??t,o=typeof e=="number"?e:e?.inner??r;return{pixelRadius:n,markerRadius:{outer:r,inner:o}}}function Ut(e,t="default"){const n=typeof e=="string"?e:e?.pixel||t,r=typeof e=="string"?e:e?.marker||t,o=typeof e=="string"?e:e?.inner||r;return{pixelVariant:n,markerVariant:{outer:r,inner:o}}}function $(e){return Math.max(0,Math.min(1,e))}function k(e,t){const n=e-t,r=7,o=[[t,t],[t,n-r],[n-r,t]],i=(a,l)=>a>=l&&a<l+r;return{isTopLeft:(a,l)=>a<r&&l<r,isTopRight:(a,l)=>a<r&&l>=n-r,isBottomLeft:(a,l)=>a>=n-r&&l<r,isMarker:(a,l)=>o.some(([h,d])=>i(a,h)&&i(l,d)),isMarkerCenter:(a,l)=>o.some(([h,d])=>a>=h+2&&a<=h+4&&l>=d+2&&l<=d+4),markerPositions:o,markerCenterPositions:o.map(([a,l])=>[a+2,l+2])}}const g=.5,D=.1,z=20;function Ht(e,t,n,r,o=g,i=D){let s="";const c=$(o),a=$(i),l=a*n/2,h=n-2*l,d=c*h/2;for(let u=0;u<e.size;u++)for(let f=0;f<e.size;f++)if(!k(e.size,t).isMarker(u,f)&&e.data[u][f]){const p=f*n+l,m=u*n+l;s+=R(p,m,h,d,r,a)}return s}function Gt(e,t,n,r,o=g,i=D){let s="";const c=$(o),a=$(i),l=a*n/2,h=n-2*l,d=c*h/2;for(let u=0;u<7;u++)for(let f=0;f<7;f++){if(u>=1&&u<=5&&f>=1&&f<=5)continue;const p=u*n+e+l,m=f*n+t+l;s+=R(p,m,h,d,r,a)}return s}function Yt(e,t,n,r,o=g,i=D){let s="";const c=$(o),a=$(i),l=a*n/2,h=n-2*l,d=c*h/2;for(let u=0;u<3;u++)for(let f=0;f<3;f++){const p=u*n+e+l,m=f*n+t+l;s+=R(p,m,h,d,r,a)}return s}function R(e,t,n,r,o,i=0){const s=e+i,c=t+i,a=n-2*i;return`<rect 
    x="${s}" 
    y="${c}" 
    width="${a}" 
    height="${a}" 
    rx="${r}"
    fill="${o}"
  />`}function qt(e,t,n,r,o=g){const i=$(o),s=6*n,c=s/2,a=i*c;return`<rect x="${e+n/2}" y="${t+n/2}" width="${s}" height="${s}" rx="${a}" fill="none" stroke="${r}" stroke-width="${n}"/>`}function Xt(e,t,n,r,o=g){const i=$(o),s=n*3;return R(e,t,s,i*s/2,r)}function Zt(e,t,n,r){const o=[];for(let i=0;i<e.size;i++)for(let s=0;s<e.size;s++)if(!k(e.size,t).isMarker(i,s)&&e.data[i][s]){const c=s*n,a=i*n;o.push(`M${c},${a}h${n}v${n}h-${n}z`)}return`<path fill="${r}" d="${o.join("")}" shape-rendering="crispEdges"/>`}function Kt(e,t,n,r){const o=[];return o.push(`M${e},${t}h${7*n}v${7*n}h-${7*n}z M${e+6*n},${t+n}h-${5*n}v${5*n}h${5*n}z`),`<path fill="${r}" d="${o.join("")}"/>`}function Jt(e,t,n,r){return`<rect x="${e}" y="${t}" width="${3*n}" height="${3*n}" fill="${r}"/>`}function Qt(e,t,n,r){const o=n/4,i=[];for(let s=0;s<e.size;s++)for(let c=0;c<e.size;c++)if(!k(e.size,t).isMarker(s,c)&&e.data[s][c]){const a=c*n,l=s*n;i.push(`M${a},${l}h${n}v${n}h-${n}z`),i.push(ee(e.data,s,c,a,l,n,o))}return`<g shape-rendering="crispEdges">
  <path fill="${r}" d="${i.join("")}"/>
</g>`}function zt(e,t,n,r){const o=n/4,i=[];return i.push(`M${e},${t}h${7*n}v${7*n}h-${7*n}z M${e+6*n},${t+n}h-${5*n}v${5*n}h${5*n}z M${e+o},${t}h-${o}v${o}h${o}z M${e+7*n},${t}h-${o}v${o}h${o}z M${e},${t+7*n}h${o}v-${o}h-${o}z M${e+7*n-o},${t+7*n}h${o}v-${o}h-${o}z`),`<g shape-rendering="crispEdges">
  <path fill="${r}" d="${i.join("")}"/>
</g>`}function te(e,t,n,r){const o=n/4,i=[];return i.push(`M${e},${t}h${3*n}v${3*n}h-${3*n}z M${e+o},${t}h-${o}v${o}h${o}z M${e+3*n},${t}h-${o}v${o}h${o}z M${e},${t+3*n}h${o}v-${o}h-${o}z M${e+3*n-o},${t+3*n}h${o}v-${o}h-${o}z`),`<g shape-rendering="crispEdges">
  <path fill="${r}" d="${i.join("")}"/>
</g>`}function ee(e,t,n,r,o,i,s){const c=(l,h)=>l<0||l>=e.length||h<0||h>=e[0].length?!1:e[l][h];let a="";return!c(t-1,n)&&!c(t,n-1)&&(a+=`M${r+s},${o}h-${s}v${s}h${s}v-${s}z`),!c(t-1,n)&&!c(t,n+1)&&(a+=`M${r+s*2},${o}h${s}v${s}h${s}v-${s}z`),!c(t+0,n+1)&&!c(t+1,n+0)&&(a+=`M${r+i},${o+i-s}h-${s}v${s}h${s}v-${s}z`),!c(t+1,n)&&!c(t+0,n-1)&&(a+=`M${r+s},${o+i-s}h-${s}v${s}h${s}v-${s}z`),a}function ne(e,t,n,r,o=g){const i=[],s=Array(e.size).fill(null).map(()=>Array(e.size).fill(!1)),a=$(o)*n/2;for(let l=0;l<e.size;l++)for(let h=0;h<e.size;h++)!k(e.size,t).isMarker(l,h)&&e.data[l][h]&&!s[l][h]&&i.push(ie(e.data,s,l,h,n,a));return`<path fill="${r}" d="${i.join(" ")}"/>`}function re(e,t,n,r,o=g){const s=$(o)*n/2,c=tt(e,t,7*n,7*n,s),a=ae(e+n,t+n,5*n,5*n,s);return`<path fill="${r}" d="${c} ${a}"/>`}function oe(e,t,n,r,o=g){const s=$(o)*n/2,c=tt(e,t,3*n,3*n,s);return`<path fill="${r}" d="${c}"/>`}function ie(e,t,n,r,o,i){const s=[],c=[[n,r]];for(;c.length>0;){const[a,l]=c.pop();if(a<0||a>=e.length||l<0||l>=e[0].length||!e[a][l]||t[a][l])continue;t[a][l]=!0;const h=l*o,d=a*o,u=a>0&&e[a-1][l],f=l<e[0].length-1&&e[a][l+1],p=a<e.length-1&&e[a+1][l],m=l>0&&e[a][l-1];s.push(se(h,d,o,i,{top:u,right:f,bottom:p,left:m})),c.push([a-1,l],[a,l+1],[a+1,l],[a,l-1])}return s.join(" ")}function se(e,t,n,r=g,{top:o,right:i,bottom:s,left:c}){const a=[],l=Math.min(r,n/2),h=l*(4/3)*Math.tan(Math.PI/8);return!c&&!o?(a.push(`M${e},${t+l}`),a.push(`C${e},${t+l-h} ${e+l-h},${t} ${e+l},${t}`)):a.push(`M${e},${t}`),!o&&!i?(a.push(`L${e+n-l},${t}`),a.push(`C${e+n-l+h},${t} ${e+n},${t+l-h} ${e+n},${t+l}`)):a.push(`L${e+n},${t}`),!i&&!s?(a.push(`L${e+n},${t+n-l}`),a.push(`C${e+n},${t+n-l+h} ${e+n-l+h},${t+n} ${e+n-l},${t+n}`)):a.push(`L${e+n},${t+n}`),!s&&!c?(a.push(`L${e+l},${t+n}`),a.push(`C${e+l-h},${t+n} ${e},${t+n-l+h} ${e},${t+n-l}`)):a.push(`L${e},${t+n}`),a.push("Z"),a.join(" ")}function tt(e,t,n,r,o=g){const i=Math.min(o,Math.min(n,r)/2),s=i*(4/3)*Math.tan(Math.PI/8);return[`M${e+i},${t}`,`H${e+n-i}`,`C${e+n-i+s},${t} ${e+n},${t+i-s} ${e+n},${t+i}`,`V${t+r-i}`,`C${e+n},${t+r-i+s} ${e+n-i+s},${t+r} ${e+n-i},${t+r}`,`H${e+i}`,`C${e+i-s},${t+r} ${e},${t+r-i+s} ${e},${t+r-i}`,`V${t+i}`,`C${e},${t+i-s} ${e+i-s},${t} ${e+i},${t}`,"Z"].join(" ")}function ae(e,t,n,r,o=g){const i=Math.min(o,Math.min(n,r)/2),s=i*(4/3)*Math.tan(Math.PI/8);return[`M${e+n-i},${t}`,`H${e+i}`,`C${e+i-s},${t} ${e},${t+i-s} ${e},${t+i}`,`V${t+r-i}`,`C${e},${t+r-i+s} ${e+i-s},${t+r} ${e+i},${t+r}`,`H${e+n-i}`,`C${e+n-i+s},${t+r} ${e+n},${t+r-i+s} ${e+n},${t+r-i}`,`V${t+i}`,`C${e+n},${t+i-s} ${e+n-i+s},${t} ${e+n-i},${t}`,"Z"].join(" ")}function le(e,t=1,n,r,o,i,s){const{markerPositions:c}=k(e.size,t);let a="";return c.forEach(([l,h])=>{const d=h*n,u=l*n,f=d+2*n,p=u+2*n;a+=ce(o.outer,d,u,n,r,i?.outer,s),a+=he(o.inner,f,p,n,r,i?.inner,s)}),a}function ce(e="default",t,n,r,o,i,s){switch(e){case"dots":return Gt(t,n,r,o,i,s);case"circle":return qt(t,n,r,o,i);case"rounded":return re(t,n,r,o,i);case"pixelated":return zt(t,n,r,o);case"default":default:return Kt(t,n,r,o)}}function he(e="default",t,n,r,o,i,s){switch(e){case"dots":return Yt(t,n,r,o,i,s);case"circle":return Xt(t,n,r,o,i);case"rounded":return oe(t,n,r,o,i);case"pixelated":return te(t,n,r,o);case"default":default:return Jt(t,n,r,o)}}function ue(e,t=1,n,r,o="default",i,s){switch(o){case"circle":case"dots":return Ht(e,t,n,r,i,s);case"rounded":return ne(e,t,n,r,i);case"pixelated":return Qt(e,t,n,r);case"default":default:return Zt(e,t,n,r)}}function de(e,t={}){const{radius:n,pixelSize:r=z,pixelPadding:o,variant:i,border:s}=t,{backgroundColor:c,foregroundColor:a}=Wt(t),{width:l,height:h}=Q(e.size,r);let d=`<rect fill="${c}" width="${l}" height="${h}"/>`;const{pixelRadius:u,markerRadius:f}=jt(n),{pixelVariant:p,markerVariant:m}=Ut(i);return d+=ue(e,s,r,a,p,u,o),d+=le(e,s,r,a,m,f,o),d}const me=ct({name:"Qrcode",props:{value:{type:[String,Array],required:!0},width:{type:[Number,String]},height:{type:[Number,String]},variant:{type:[String,Object]},radius:{type:[Number,Object]},pixelPadding:{type:Number},preserveAspectRatio:{type:String},blackColor:{type:String},whiteColor:{type:String},boostEcc:{type:Boolean},border:{type:Number},ecc:{type:String},invert:{type:Boolean},maskPattern:{type:Number},maxVersion:{type:Number},minVersion:{type:Number},onEncoded:{type:Function},pixelSize:{type:Number}},emits:["encoded"],setup(e,{attrs:t,emit:n}){const r=Pt(e,(c,a)=>a!=="value"),o=j(e,"value"),i=y(()=>ht(r,ut().public.qrcode.options)),s=y(()=>{const{value:c,radius:a,pixelSize:l,pixelPadding:h,variant:d,width:u,height:f,preserveAspectRatio:p,whiteColor:m,blackColor:et,invert:nt,...v}=i.value,O=Lt(o.value,{...v,onEncoded:T=>{v.onEncoded&&v.onEncoded(T),n("encoded",T)}}),F=Q(O.size,l);return dt("svg",{...t,width:u,height:f,preserveAspectRatio:p,xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${F.width} ${F.height}`,innerHTML:de(O,{radius:a,pixelSize:l,pixelPadding:h,variant:d,border:v.border,whiteColor:m,blackColor:et,invert:nt})})});return()=>s.value}}),ge=ft("canvasStore",{state:()=>({activeTab:"design",frontBoxes:[],backBoxes:[],activeSide:"front",selectedElement:null,selectedElementType:null,currentProperties:{},dropzone:null,showImageModal:!1,showGradientModal:!1,showColorModal:!1,frontBackground:null,backBackground:null,pendingImagePosition:null,pendingImageSide:null,cursorPosition:null,dropdownOpen:!1,imageItem:null}),getters:{boxes:e=>e.activeSide==="front"?e.frontBoxes:e.backBoxes,currentBackground:e=>e.activeSide==="front"?e.frontBackground:e.backBackground},actions:{elementMachanism(e){const t=e.item,n=e.position;return{id:Date.now(),text:t.value||"Sample Text",type:t.type,label:`${t.label}`,position:n,properties:{size:{width:e.width??"",height:e.height??""},rotation:0,font:"Roboto",fontWeight:"normal",fontStyle:"normal",fontSize:"Auto",fillColor:t.type==="rectangle"?"blue":"transparent",fillTransparency:!1,textDecoration:"none",color:"black",textAlign:t.type==="h1"||t.type==="p"?"center":"",verticalAlign:t.type==="h1"||t.type==="p"?"middle":"",horizontalAlign:t.type==="h1"||t.type==="p"?"center":"",textTransform:"none",src:e.dataUrl??"",strokeColor:"",strokeWidth:0,associatedData:"",content:"",x:n.left,y:n.top,text:t.label||"Sample Text",displayOption:"both sides",qrcode:e.qrcode??"",direction:"ltr"},isSelected:!0,isDragging:!1,visible:!0}},addElementFromDrag(e,t){const n=V(),r=this.dropzone?.offsetWidth||n.presetWidth*3.78,o=this.dropzone?.offsetHeight||n.presetHeight*3.78,i=200,s=64,c={left:Math.max(0,Math.min(t.left,r-i)),top:Math.max(0,Math.min(t.top,o-s))},a={item:e,position:c,width:i,height:s},l=this.elementMachanism(a);this.addElement(l),this.selectedElement=l.id,this.updateProperties()},handleImageUploaded(e){const t={left:123,top:204};this.pendingImagePosition=t,this.pendingImageSide=this.activeSide;const n=V(),r={left:198,top:277},o=this.dropzone?.offsetWidth||n.presetWidth*3.78,i=this.dropzone?.offsetHeight||n.presetHeight*3.78,s=this.imageItem.type==="background"?n.presetWidth*3.78:150,c=this.imageItem.type==="background"?n.presetHeight*3.78:150,a={left:Math.max(0,Math.min(this.imageItem.type==="background"?r.left:this.pendingImagePosition.left,o-s)),top:Math.max(0,Math.min(this.imageItem.type==="background"?r.top:this.pendingImagePosition.top,i-c))},l={item:{text:this.imageItem.label,type:this.imageItem.type,label:this.imageItem.type==="background"?"background":"Image"},position:a,dataUrl:e,width:s,height:c},h=this.elementMachanism(l);this.pendingImageSide==="front"?this.frontBoxes.push(h):this.backBoxes.push(h),this.pendingImagePosition=null,this.pendingImageSide=null,this.selectedElement=h.id,this.updateProperties()},addElement(e){this.activeSide==="front"?this.frontBoxes.push(e):this.backBoxes.push(e)},handleQRCodeGenerator(e){const n={item:{text:"",type:"qrcode",label:"QR Code"},position:{left:43,top:188},width:150,height:150,qrcode:{value:e,variant:"pixelated",radius:1,blackColor:"#000000",whiteColor:"transparent"}},r=this.elementMachanism(n);this.addElement(r),this.selectedElement=r.id,this.updateProperties()},updateProperties(e){if(this.selectedElement===null){this.currentProperties={};return}const t=this.boxes.find(n=>n.id===this.selectedElement);t&&(e&&(t.position.left=e.x??t.position.left,t.position.top=e.y??t.position.top,t.properties={...t.properties,...e},t.text=e.text??t.text),this.currentProperties={x:Math.floor(t.position.left),y:Math.floor(t.position.top),size:{...t.properties.size},rotation:t.properties.rotation,font:t.properties.font,fontWeight:t.properties.fontWeight,fontStyle:t.properties.fontStyle,fontSize:t.properties.fontSize,fillColor:t.properties.fillColor,fillTransparency:t.properties.fillTransparency,textDecoration:t.properties.textDecoration,color:t.properties.color,textAlign:t.properties.textAlign,verticalAlign:t.properties.verticalAlign,horizontalAlign:t.properties.horizontalAlign,textTransform:t.properties.textTransform,src:t.properties.src,strokeColor:t.properties.strokeColor,strokeWidth:t.properties.strokeWidth,associatedData:t.properties.associatedData,content:t.properties.content,text:t.text,displayOption:t.properties.displayOption,qrcode:t.properties.qrcode,direction:t.properties.direction})},updateElementText(e,t){const r=(this.activeSide==="front"?this.frontBoxes:this.backBoxes).find(o=>o.id===e);r&&(r.text=t,r.properties.text=t)},alignHorizontal(e){if(this.selectedElement===null||!this.dropzone)return;const t=this.boxes.find(o=>o.id===this.selectedElement);if(!t)return;const n=this.dropzone.getBoundingClientRect(),r=t.properties.size.width;switch(e){case"left":t.position.left=0,t.properties.textAlign="left",t.properties.horizontalAlign="left";break;case"center":t.position.left=(n.width-r)/2,t.properties.textAlign="center",t.properties.horizontalAlign="center";break;case"right":t.position.left=n.width-r,t.properties.textAlign="right",t.properties.horizontalAlign="right";break}this.currentProperties.x=t.position.left,this.currentProperties.textAlign=e,this.currentProperties.horizontalAlign=e,this.updateProperties(this.currentProperties)},alignVertical(e){if(this.selectedElement===null||!this.dropzone)return;const t=this.boxes.find(o=>o.id===this.selectedElement);if(!t)return;const n=this.dropzone.getBoundingClientRect(),r=t.properties.size.height;switch(e){case"top":t.position.top=0,t.properties.verticalAlign="top";break;case"middle":t.position.top=(n.height-r)/2,t.properties.verticalAlign="middle";break;case"bottom":t.position.top=n.height-r,t.properties.verticalAlign="bottom";break}this.currentProperties.y=t.position.top,this.currentProperties.verticalAlign=e,this.updateProperties(this.currentProperties)},makeTransparent(e){e==="fillColor"?(this.currentProperties.fillTransparency=!0,this.currentProperties.fillColor="transparent",this.updateProperties(this.currentProperties)):(this.currentProperties.color="transparent",this.updateProperties(this.currentProperties))},applyTextAlign(e){this.currentProperties.textAlign=e,this.currentProperties.horizontalAlign=e;const t=this.boxes.find(n=>n.id===this.selectedElement);t&&(t.properties.textAlign=e,t.properties.horizontalAlign=e),this.updateProperties(this.currentProperties)},applyVerticalAlign(e){this.currentProperties.verticalAlign=e;const t=this.boxes.find(n=>n.id===this.selectedElement);t&&(t.properties.verticalAlign=e),this.updateProperties(this.currentProperties)},applyTextTransform(e){this.currentProperties.textTransform=e,this.updateProperties(this.currentProperties)},toggleTextStyle(e){e==="bold"?this.currentProperties.fontWeight=this.currentProperties.fontWeight==="bold"?"normal":"bold":e==="italic"?this.currentProperties.fontStyle=this.currentProperties.fontStyle==="italic"?"normal":"italic":e==="underline"&&(this.currentProperties.textDecoration=this.currentProperties.textDecoration==="underline"?"none":"underline"),this.updateProperties(this.currentProperties)},toggleLayerVisibility(e){const n=(this.activeSide==="front"?this.frontBoxes:this.backBoxes).find(r=>r.id===e);n&&(n.visible=!n.visible)},selectLayer(e){this.selectedElement=e,this.updateProperties()},setTextDirection(e,t){const n=this.boxes.find(r=>r.id===e);n&&(n.properties.direction=t,this.currentProperties.direction=t,this.updateProperties(this.currentProperties))},setBackground(e,t){t==="front"?this.frontBackground=e:this.backBackground=e},applyGradient(e,t){this.setBackground(e,t),this.showGradientModal=!1},applyColor(e,t){this.setBackground(e,t),this.showColorModal=!1}},persist:!0});export{me as _,ge as u};
//# sourceMappingURL=Dsa2KQgO.js.map
