{"version":3,"file":"CqzOgY9y.js","sources":["../../../../../../../modules/designbadge/components/ImageUploadModal.vue","../../../../../../../modules/designbadge/pages/design-badge/page-builder.vue"],"sourcesContent":["<template>\r\n  <div\r\n    role=\"dialog\"\r\n    aria-modal=\"true\"\r\n    aria-label=\"Image Manager\"\r\n    class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n    @click.self=\"$emit('close')\"\r\n  >\r\n    <div\r\n      class=\"bg-white rounded-2xl shadow-lg w-full max-w-2xl p-6 animate-fadeIn\"\r\n    >\r\n      <div class=\"flex justify-between items-center border-b pb-3 mb-4\">\r\n        <h3 class=\"text-xl font-semibold text-gray-800\">Image Manager</h3>\r\n        <button\r\n          class=\"text-gray-400 hover:text-red-500 transition\"\r\n          @click=\"$emit('close')\"\r\n        >\r\n          âœ•\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Tabs -->\r\n      <div class=\"flex space-x-2 mb-4\">\r\n        <button\r\n          class=\"px-4 py-2 rounded\"\r\n          :class=\"\r\n            activeTab === 'upload'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200 text-gray-700'\r\n          \"\r\n          @click=\"activeTab = 'upload'\"\r\n        >\r\n          Upload Image\r\n        </button>\r\n        <button\r\n          class=\"px-4 py-2 rounded\"\r\n          :class=\"\r\n            activeTab === 'library'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200 text-gray-700'\r\n          \"\r\n          @click=\"activeTab = 'library'\"\r\n        >\r\n          Uploaded Images\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Upload Tab -->\r\n      <div v-if=\"activeTab === 'upload'\">\r\n        <div\r\n          class=\"flex flex-col items-center justify-center p-6 border-2 border-dashed border-blue-400 rounded-lg cursor-pointer hover:bg-blue-50 transition\"\r\n          @click=\"triggerInput\"\r\n        >\r\n          <svg\r\n            class=\"w-12 h-12 text-blue-500 mb-2\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M3 15a4 4 0 014-4h1V7a4 4 0 014-4h2a4 4 0 014 4v4h1a4 4 0 014 4v5H3v-5z\"\r\n            />\r\n          </svg>\r\n          <p class=\"text-sm text-gray-600\">Click to select an image</p>\r\n          <input\r\n            ref=\"fileInput\"\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            multiple\r\n            class=\"hidden\"\r\n            @change=\"handleFileUpload\"\r\n          />\r\n        </div>\r\n\r\n        <div v-if=\"uploadProgress > 0\" class=\"mt-6\">\r\n          <div class=\"w-full bg-gray-200 rounded-full h-3\">\r\n            <div\r\n              class=\"bg-blue-500 h-3 rounded-full transition-all duration-300 ease-in-out\"\r\n              :style=\"{ width: uploadProgress + '%' }\"\r\n            ></div>\r\n          </div>\r\n          <p class=\"text-sm text-gray-700 text-center mt-2\">\r\n            Uploading... {{ uploadProgress }}%\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Uploaded Images Tab -->\r\n      <div v-if=\"activeTab === 'library'\">\r\n        <!-- Search + Category -->\r\n        <div class=\"flex justify-between items-center mb-4\">\r\n          <input\r\n            v-model=\"searchQuery\"\r\n            type=\"text\"\r\n            placeholder=\"Search image...\"\r\n            class=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n          <select\r\n            v-model=\"selectedCategory\"\r\n            class=\"ml-2 px-3 py-2 border rounded\"\r\n          >\r\n            <option value=\"\">All</option>\r\n            <option value=\"nature\">Nature</option>\r\n            <option value=\"tech\">Tech</option>\r\n            <option value=\"people\">People</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Preview List -->\r\n        <div\r\n          class=\"grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-64 overflow-y-auto\"\r\n        >\r\n          <div\r\n            v-for=\"(img, idx) in filteredImages\"\r\n            :key=\"idx\"\r\n            class=\"cursor-pointer border rounded hover:border-blue-500\"\r\n            @click=\"selectImage(img)\"\r\n          >\r\n            <img\r\n              :src=\"img.src\"\r\n              :alt=\"img.name\"\r\n              class=\"w-full h-24 object-cover rounded\"\r\n            />\r\n            <p class=\"text-xs text-center text-gray-500 truncate\">\r\n              {{ img.name }}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"mt-6 text-center\">\r\n        <button\r\n          class=\"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition\"\r\n          @click=\"$emit('close')\"\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst props = defineProps({\r\n  side: {\r\n    type: String,\r\n    default: \"front\", // or \"back\"\r\n  },\r\n});\r\n\r\nconst emit = defineEmits([\"uploaded\", \"close\"]);\r\n\r\nconst fileInput = ref(null);\r\nconst uploadProgress = ref(0);\r\nconst activeTab = ref(\"upload\");\r\nconst uploadedImages = ref([\r\n  {\r\n    src: \"https://placekitten.com/200/300\",\r\n    name: \"Kitten 1\",\r\n    category: \"nature\",\r\n  },\r\n  {\r\n    src: \"https://placekitten.com/300/300\",\r\n    name: \"Kitten 2\",\r\n    category: \"people\",\r\n  },\r\n  {\r\n    src: \"https://placekitten.com/400/300\",\r\n    name: \"Kitten 3\",\r\n    category: \"tech\",\r\n  },\r\n]);\r\nconst searchQuery = ref(\"\");\r\nconst selectedCategory = ref(\"\");\r\n\r\nconst filteredImages = computed(() => {\r\n  return uploadedImages.value.filter((img) => {\r\n    const matchesCategory = selectedCategory.value\r\n      ? img.category === selectedCategory.value\r\n      : true;\r\n    const matchesSearch = img.name\r\n      .toLowerCase()\r\n      .includes(searchQuery.value.toLowerCase());\r\n    return matchesCategory && matchesSearch;\r\n  });\r\n});\r\n\r\nfunction triggerInput() {\r\n  fileInput.value?.click();\r\n}\r\n\r\nfunction handleFileUpload(event) {\r\n  const files = Array.from(event.target.files);\r\n  if (!files.length) return;\r\n\r\n  let processed = 0;\r\n  uploadProgress.value = 0;\r\n\r\n  const simulateUpload = (file, idx) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const newImage = {\r\n        src: reader.result,\r\n        name: file.name,\r\n        category: \"uncategorized\",\r\n      };\r\n      uploadedImages.value.push(newImage);\r\n      emit(\"uploaded\", {\r\n        side: props.side,\r\n        src: reader.result,\r\n        name: file.name,\r\n        category: \"uncategorized\",\r\n      });\r\n\r\n      processed++;\r\n      uploadProgress.value = Math.round((processed / files.length) * 100);\r\n\r\n      if (processed === files.length) {\r\n        setTimeout(() => (uploadProgress.value = 0), 600);\r\n      }\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  files.forEach((file, idx) => simulateUpload(file, idx));\r\n}\r\n\r\nfunction selectImage(image) {\r\n  emit(\"uploaded\", {\r\n    side: props.side,\r\n    src: image.src,\r\n    name: image.name,\r\n    category: image.category,\r\n  });\r\n  emit(\"close\");\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale(0.9);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n}\r\n.animate-fadeIn {\r\n  animation: fadeIn 0.3s ease-out;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"flex h-screen bg-gray-100 overflow-hidden\">\r\n    <!-- Design Area -->\r\n    <div class=\"flex-1 flex flex-col items-center p-4\">\r\n      <!-- Top Controls -->\r\n      <div class=\"flex flex-col items-center w-full mb-4\">\r\n        <!-- Side Tabs -->\r\n        <div class=\"mb-4 max-w-xs w-full\">\r\n          <div class=\"flex border border-gray-300 rounded-md overflow-hidden\">\r\n            <button\r\n              class=\"flex-1 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              :class=\"{\r\n                'bg-blue-500 text-white': activeSide === 'front',\r\n                'bg-gray-200 text-gray-700 hover:bg-gray-300':\r\n                  activeSide !== 'front',\r\n                'rounded-l-md': true,\r\n              }\"\r\n              @click=\"switchSideTab('front')\"\r\n              :disabled=\"isFlipping\"\r\n            >\r\n              Front Side\r\n            </button>\r\n            <button\r\n              class=\"flex-1 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              :class=\"{\r\n                'bg-blue-500 text-white': activeSide === 'back',\r\n                'bg-gray-200 text-gray-700 hover:bg-gray-300':\r\n                  activeSide !== 'back',\r\n                'rounded-r-md': true,\r\n              }\"\r\n              @click=\"switchSideTab('back')\"\r\n              :disabled=\"isFlipping\"\r\n            >\r\n              Back Side\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- Zoom and Grid Controls -->\r\n        <div class=\"flex justify-end space-x-2 w-full\">\r\n          <button\r\n            class=\"p-1 bg-gray-200 rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n            @click=\"zoom(-10)\"\r\n          >\r\n            <Icon name=\"mdi:minus\" class=\"w-4 h-4\" />\r\n          </button>\r\n          <span class=\"px-2 py-1 bg-gray-200 rounded text-sm\"\r\n            >{{ zoomLevel }}%</span\r\n          >\r\n          <button\r\n            class=\"p-1 bg-gray-200 rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n            @click=\"zoom(10)\"\r\n          >\r\n            <Icon name=\"mdi:plus\" class=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            class=\"p-1 bg-gray-200 rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n            :class=\"{ 'bg-blue-500 text-white': showGrid }\"\r\n            @click=\"toggleGrid\"\r\n          >\r\n            <Icon name=\"mdi:grid\" class=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <!-- Design Page Wrapper -->\r\n      <div class=\"flex-1 w-full flex justify-center items-start overflow-auto\">\r\n        <div\r\n          ref=\"dropzone\"\r\n          class=\"design-page w-[400px] sm:w-[500px] h-[500px] sm:h-[600px] bg-white\"\r\n          :style=\"{\r\n            transform: `scale(${zoomScale})`,\r\n            transformOrigin: 'center top',\r\n          }\"\r\n          :class=\"{ 'grid-overlay': showGrid, flipped: activeSide === 'back' }\"\r\n          @dragover.prevent\r\n          @drop=\"handleDrop\"\r\n        >\r\n          <div class=\"card w-full h-full\">\r\n            <div\r\n              class=\"front border border-gray-300 w-full h-full absolute top-0 left-0\"\r\n            >\r\n              <!-- <h3 class=\"text-lg font-semibold mb-4\">Front Side</h3> -->\r\n              <Canvas\r\n                v-if=\"activeSide === 'front'\"\r\n                :modelValue=\"frontCanvas\"\r\n                :sendElement=\"sendElement\"\r\n                @addToFrontCanvas=\"frontCanvas.push($event)\"\r\n                @requestFrontImage=\"showFrontImageModal = true\"\r\n                @sendSelectedElement=\"receiveSelectElement\"\r\n              />\r\n            </div>\r\n\r\n            <div\r\n              class=\"back border border-gray-300 w-full h-full absolute top-0 left-0\"\r\n            >\r\n              <!-- <h3 class=\"text-lg font-semibold mb-4\">Back Side</h3> -->\r\n              <!-- Back -->\r\n              <Canvas\r\n                v-if=\"activeSide === 'back'\"\r\n                :modelValue=\"backCanvas\"\r\n                :sendElement=\"sendElement\"\r\n                @addToBackCanvas=\"backCanvas.push($event)\"\r\n                @requestBackImage=\"showBackImageModal = true\"\r\n                @sendSelectedElement=\"receiveSelectElement\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- Sidebar -->\r\n    <Sidebar\r\n      :selected-element=\"selectedElement\"\r\n      :selected-element-type=\"selectedElementType\"\r\n      :layers=\"layers\"\r\n      :selected-layer=\"selectedLayer\"\r\n      :current-properties=\"currentProperties\"\r\n      :display-option=\"displayOption\"\r\n      @drag-start=\"onDragStart\"\r\n      @drag-end=\"onDragEnd\"\r\n      @align-horizontal=\"alignHorizontal\"\r\n      @align-vertical=\"alignVertical\"\r\n      @update-properties=\"updateProperties\"\r\n      @apply-text-style=\"applyTextStyle\"\r\n      @make-transparent=\"makeTransparent\"\r\n      @apply-color=\"applyColor\"\r\n      @apply-text-align=\"applyTextAlign\"\r\n      @apply-vertical-align=\"applyVerticalAlign\"\r\n      @apply-text-transform=\"applyTextTransform\"\r\n      @toggle-text-style=\"toggleTextStyle\"\r\n      @apply-display-option=\"applyDisplayOption\"\r\n      @select-layer=\"selectLayer\"\r\n      @toggle-layer-visibility=\"toggleLayerVisibility\"\r\n    />\r\n\r\n    <ImageUploadModal\r\n      v-if=\"showFrontImageModal\"\r\n      side=\"front\"\r\n      @uploaded=\"handleFrontImageUploaded\"\r\n      @close=\"showFrontImageModal = false\"\r\n    />\r\n\r\n    <ImageUploadModal\r\n      v-if=\"showBackImageModal\"\r\n      side=\"back\"\r\n      @uploaded=\"handleBackImageUploaded\"\r\n      @close=\"showBackImageModal = false\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport interact from \"interactjs\";\r\n\r\nconst props = defineProps({\r\n  selectedElementId: {\r\n    type: [String, Number],\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst frontCanvas = ref([]);\r\nconst backCanvas = ref([]);\r\n\r\nconst activeSide = ref(\"front\");\r\nconst activeTab = ref(\"design\");\r\nconst zoomLevel = ref(100);\r\nconst showGrid = ref(false);\r\nconst isFlipping = ref(false);\r\nconst dropzone = ref(null);\r\n\r\nconst elementType = ref(null);\r\nconst sendElement = ref({});\r\n\r\nconst dropX = ref(null);\r\nconst dropY = ref(null);\r\n\r\nconst showFrontImageModal = ref(false);\r\nconst showBackImageModal = ref(false);\r\n\r\nconst zoomScale = computed(() => zoomLevel.value / 100);\r\n\r\nconst switchSideTab = (side) => {\r\n  if (isFlipping.value || activeSide.value === side) return;\r\n  isFlipping.value = true;\r\n  activeSide.value = side;\r\n  setTimeout(() => {\r\n    isFlipping.value = false;\r\n  }, 600);\r\n};\r\n\r\nconst switchTab = (tab) => {\r\n  activeTab.value = tab;\r\n};\r\n\r\nconst zoom = (delta) => {\r\n  zoomLevel.value = Math.max(50, Math.min(200, zoomLevel.value + delta));\r\n};\r\n\r\nconst toggleGrid = () => {\r\n  showGrid.value = !showGrid.value;\r\n};\r\n\r\n// Prepare draggable items\r\nconst onDragStart = (tag) => {\r\n  //   console.log(\"Dragging:\", tag);\r\n  //   sendElement.value = {\r\n  //     tag: tag,\r\n  //     side: activeSide.value,\r\n  //   };\r\n};\r\n\r\nfunction handleDrop(event) {\r\n  event.preventDefault();\r\n\r\n  const canvasRect = dropzone.value.getBoundingClientRect();\r\n\r\n  const mouseX = event.clientX;\r\n  const mouseY = event.clientY;\r\n\r\n  dropX.value = mouseX - canvasRect.left;\r\n  dropY.value = mouseY - canvasRect.top;\r\n\r\n  // const element = props.sendElement;\r\n  // if (!element || !element.tag) return;\r\n\r\n  // const newElement = {\r\n  //   ...element,\r\n  //   position: { top: dropY, left: dropX }, // Accurate mouse-based position\r\n  // };\r\n\r\n  // createElement(newElement);\r\n}\r\n\r\nconst onDragEnd = ({ item, x, y }) => {\r\n  const rect = dropzone.value.getBoundingClientRect();\r\n\r\n  const dropXPos = x - rect.left;\r\n  const dropYPos = y - rect.top;\r\n\r\n  sendElement.value = {\r\n    item: item,\r\n    side: activeSide.value,\r\n    position: { top: dropYPos, left: dropXPos },\r\n    properties: { y: dropYPos, x: dropXPos },\r\n  };\r\n};\r\n\r\nfunction handleFrontImageUploaded(dataUrl) {\r\n  frontCanvas.value.push({\r\n    id: Date.now(),\r\n    text: dataUrl,\r\n    type: \"img\",\r\n    label: `IMG Label`,\r\n    position: { top: 100, left: 100 },\r\n    size: { width: 250, height: 150 },\r\n    rotation: 0,\r\n    isSelected: false,\r\n    isDragging: false,\r\n    direction: \"ltr\",\r\n  });\r\n  showFrontImageModal.value = false;\r\n}\r\n\r\nfunction handleBackImageUploaded(dataUrl) {\r\n  backCanvas.value.push({\r\n    id: Date.now(),\r\n    text: dataUrl,\r\n    type: \"img\",\r\n    label: `IMG Label`,\r\n    position: { top: 100, left: 100 },\r\n    size: { width: 250, height: 150 },\r\n    rotation: 0,\r\n    isSelected: false,\r\n    isDragging: false,\r\n    direction: \"ltr\",\r\n  });\r\n  showBackImageModal.value = false;\r\n}\r\n\r\n// Sidebar Functionality\r\n\r\n// Canvas and elements\r\nconst canvas = ref(null);\r\nconst canvasSize = ref({ width: 210, height: 297 }); // A4 size in mm\r\nconst elements = ref([]);\r\nconst selectedElement = ref(null);\r\nconst selectedLayer = ref(null);\r\nconst layers = ref([]);\r\nconst displayOption = ref(\"both sides\");\r\nconst currentProperties = ref({});\r\nwatch(\r\n  () => [activeSide.value, frontCanvas.value, backCanvas.value], // Explicit dependencies\r\n  ([newActiveSide, newFrontCanvas, newBackCanvas]) => {\r\n    // Determine the active canvas based on activeSide\r\n    const newElementData =\r\n      newActiveSide === \"front\" ? newFrontCanvas : newBackCanvas;\r\n\r\n    // Validate newElementData\r\n    if (!newElementData || !Array.isArray(newElementData)) {\r\n      console.warn(\"Invalid canvas data:\", newElementData);\r\n      elements.value = []; // Fallback to empty array to avoid errors\r\n      return;\r\n    }\r\n\r\n    // Update elements\r\n    elements.value = [...newElementData]; // Create a new copy to ensure reactivity\r\n\r\n    // Optional: Handle element selection logic (uncomment if needed)\r\n    /*\r\n    const newId = newElementData.selectedId; // Adjust based on actual data structure\r\n    if (newId !== null && newId !== undefined) {\r\n      receiveSelectElement(newId);\r\n    } else {\r\n      selectedElement.value = null;\r\n      selectedLayer.value = null;\r\n      currentProperties.value = {};\r\n    }\r\n    */\r\n\r\n    // Debugging (only in development)\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      console.log(\"elements.value updated:\", elements.value);\r\n    }\r\n  },\r\n  { deep: true } // Enable deep watching if canvas data is an object/array\r\n);\r\n\r\n// Function to receive selected element from Canvas\r\nconst receiveSelectElement = (elementId) => {\r\n  console.log(\"Received selected element:\", elementId);\r\n  selectedElement.value = elementId;\r\n  // const element = elements.value.find((e) => e.id === elementId);\r\n  // if (element) {\r\n  //   selectedLayer.value = layers.value.findIndex(\r\n  //     (layer) => layer.id === elementId\r\n  //   );\r\n  //   updateProperties();\r\n  // } else {\r\n  //   selectedLayer.value = null;\r\n  //   currentProperties.value = {};\r\n  // }\r\n};\r\n\r\n// Computed property to get the selected element type\r\nconst selectedElementType = computed(() => {\r\n  if (selectedElement.value === null) return null;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  console.log(\"Selected Element Type:\", element.type);\r\n  return element ? element.type : null;\r\n});\r\n\r\n// Element types\r\nconst elementTypeMap = {\r\n  h1: {\r\n    properties: {\r\n      x: 40.1,\r\n      y: 130,\r\n      width: 317,\r\n      height: 55,\r\n      rotation: 0,\r\n      font: \"Roboto\",\r\n      fontStyle: \"Regular\",\r\n      fontSize: 16,\r\n      color: \"#000000\",\r\n      text: \"\",\r\n      exampleText: \"Sample Text\",\r\n      fillTransparency: false,\r\n      textDecoration: \"none\",\r\n      lock: false,\r\n      fillColor: \"#ffffff\",\r\n      textAlign: \"left\",\r\n      verticalAlign: \"top\",\r\n      textTransform: \"none\",\r\n    },\r\n  },\r\n  image: {\r\n    properties: {\r\n      x: 148.5,\r\n      y: 284,\r\n      width: 100,\r\n      height: 100,\r\n      rotation: 0,\r\n      src: \"https://via.placeholder.com/150\",\r\n      lock: false,\r\n      strokeColor: \"#eb2f2f\",\r\n      strokeWidth: 1,\r\n      associatedData: \"User ID\",\r\n    },\r\n  },\r\n  qrcode: {\r\n    properties: {\r\n      x: 20.5,\r\n      y: 25,\r\n      width: 100,\r\n      height: 100,\r\n      rotation: 0,\r\n      content: \"https://example.com\",\r\n      size: 100,\r\n      lock: false,\r\n    },\r\n  },\r\n  line: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 100,\r\n      height: 2,\r\n      rotation: 0,\r\n      color: \"#000000\",\r\n      thickness: 2,\r\n      lock: false,\r\n    },\r\n  },\r\n  background: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 210,\r\n      height: 297,\r\n      rotation: 0,\r\n      color: \"#ffffff\",\r\n      lock: false,\r\n    },\r\n  },\r\n  eventlogo: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 100,\r\n      height: 100,\r\n      rotation: 0,\r\n      src: \"https://via.placeholder.com/100\",\r\n      lock: false,\r\n    },\r\n  },\r\n  useravatar: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 50,\r\n      height: 50,\r\n      rotation: 0,\r\n      src: \"https://via.placeholder.com/50\",\r\n      lock: false,\r\n    },\r\n  },\r\n  punching_area: {\r\n    properties: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 100,\r\n      height: 20,\r\n      rotation: 0,\r\n      color: \"#000000\",\r\n      lock: false,\r\n    },\r\n  },\r\n};\r\n\r\nconst handleKeydown = (elementId, event) => {\r\n  if (displayOption.value !== \"right side only\") return;\r\n  const element = elements.value.find((e) => e.id === elementId);\r\n  if (!element || element.type !== \"text\") return;\r\n\r\n  // Handle space key\r\n  if (event.key === \" \" || event.key === \"Spacebar\") {\r\n    event.preventDefault(); // Prevent default space behavior\r\n    const target = event.target;\r\n    const text = target.textContent || \"\";\r\n    target.textContent = text + \" \"; // Append space to the end\r\n    element.properties.text = target.textContent; // Update element text\r\n    currentProperties.value.text = target.textContent; // Update current properties\r\n\r\n    // Move cursor to the end\r\n    const range = document.createRange();\r\n    const selection = window.getSelection();\r\n    range.selectNodeContents(target);\r\n    range.collapse(false); // Collapse to the end\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n  }\r\n};\r\n\r\n// Element management\r\nconst addElement = (type, x = 100, y = 100) => {\r\n  const id = Date.now();\r\n  const elementType = elementTypeMap[type];\r\n  if (!elementType) return;\r\n\r\n  const element = {\r\n    id,\r\n    type,\r\n    properties: { ...elementType.properties, x, y },\r\n  };\r\n\r\n  elements.value.push(element);\r\n  layers.value.push({\r\n    id,\r\n    name: `Layer ${layers.value.length + 1}`,\r\n    type,\r\n    visible: true,\r\n    locked: false,\r\n  });\r\n\r\n  nextTick(() => setupInteract(element));\r\n  return element;\r\n};\r\n\r\nconst setupInteract = (element) => {\r\n  const target = document.querySelector(`[data-element-id=\"${element.id}\"]`);\r\n  if (!target) return;\r\n\r\n  interact(target)\r\n    .draggable({\r\n      enabled: !element.properties.lock,\r\n      inertia: true,\r\n      modifiers: [\r\n        interact.modifiers.restrictRect({\r\n          restriction: canvas.value,\r\n          endOnly: true,\r\n        }),\r\n      ],\r\n      onmove: (event) => {\r\n        if (element.properties.lock) return;\r\n        const index = elements.value.findIndex((e) => e.id === element.id);\r\n        if (index !== -1) {\r\n          elements[index].properties.x += event.dx;\r\n          elements[index].properties.y += event.dy;\r\n          updateProperties();\r\n        }\r\n      },\r\n    })\r\n    .resizable({\r\n      enabled: !element.properties.lock,\r\n      edges: { left: true, right: true, bottom: true, top: true },\r\n      modifiers: [\r\n        interact.modifiers.restrictSize({\r\n          min: { width: 10, height: 10 },\r\n        }),\r\n      ],\r\n      onmove: (event) => {\r\n        if (element.properties.lock) return;\r\n        const index = elements.value.findIndex((e) => e.id === element.id);\r\n        if (index !== -1) {\r\n          elements[index].properties.width = event.rect.width;\r\n          elements[index].properties.height = event.rect.height;\r\n          elements[index].properties.x += event.deltaRect.left;\r\n          elements[index].properties.y += event.deltaRect.top;\r\n          updateProperties();\r\n        }\r\n      },\r\n    })\r\n    .on(\"tap\", () => selectElement(element.id));\r\n};\r\n\r\nconst selectElement = (elementId) => {\r\n  console.log(\"Selecting element:\", elementId);\r\n  selectedElement.value = elementId;\r\n  selectedLayer.value = layers.value.findIndex(\r\n    (layer) => layer.id === elementId\r\n  );\r\n  updateProperties();\r\n};\r\n\r\nconst selectLayer = (index) => {\r\n  console.log(\"Selecting layer:\", index);\r\n  selectedLayer.value = index;\r\n  selectedElement.value = layers.value[index].id;\r\n  updateProperties();\r\n};\r\n\r\nconst updateProperties = (newProperties = null) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element) return;\r\n\r\n  if (newProperties) {\r\n    if (element.type === \"text\") {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    } else if (\r\n      element.type === \"image\" ||\r\n      element.type === \"eventlogo\" ||\r\n      element.type === \"useravatar\"\r\n    ) {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    } else if (element.type === \"qrcode\") {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    } else {\r\n      element.properties = {\r\n        ...element.properties,\r\n        ...newProperties,\r\n        width: newProperties.w,\r\n        height: newProperties.h,\r\n        rotation: newProperties.r,\r\n      };\r\n    }\r\n  }\r\n\r\n  if (element.type === \"text\") {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 40.1,\r\n      y: element.properties.y || 130,\r\n      w: element.properties.width || 317,\r\n      h: element.properties.height || 55,\r\n      r: element.properties.rotation || 0,\r\n      font: element.properties.font || \"Roboto\",\r\n      fontStyle: element.properties.fontStyle || \"Regular\",\r\n      fontSize: element.properties.fontSize || 16,\r\n      fillColor: element.properties.fillColor || \"#ffffff\",\r\n      fillTransparency: element.properties.fillTransparency || false,\r\n      text: element.properties.text || element.properties.exampleText || \"\",\r\n      textDecoration: element.properties.textDecoration || \"none\",\r\n      color: element.properties.color || \"#000000\",\r\n      textAlign: element.properties.textAlign || \"left\",\r\n      verticalAlign: element.properties.verticalAlign || \"top\",\r\n      textTransform: element.properties.textTransform || \"none\",\r\n    };\r\n  } else if (element.type === \"img\") {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 148.5,\r\n      y: element.properties.y || 284,\r\n      w: element.properties.width || 100,\r\n      h: element.properties.height || 100,\r\n      r: element.properties.rotation || 0,\r\n      src: element.properties.src || \"https://via.placeholder.com/150\",\r\n      strokeColor: element.properties.strokeColor || \"#eb2f2f\",\r\n      strokeWidth: element.properties.strokeWidth || 1,\r\n      associatedData: element.properties.associatedData || \"User ID\",\r\n    };\r\n  } else if (element.type === \"qrcode\") {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 20.5,\r\n      y: element.properties.y || 25,\r\n      w: element.properties.width || 100,\r\n      h: element.properties.height || 100,\r\n      r: element.properties.rotation || 0,\r\n      content: element.properties.content || \"https://example.com\",\r\n      size: element.properties.size || 100,\r\n    };\r\n  } else {\r\n    currentProperties.value = {\r\n      x: element.properties.x || 0,\r\n      y: element.properties.y || 0,\r\n      w: element.properties.width || 100,\r\n      h: element.properties.height || 100,\r\n      r: element.properties.rotation || 0,\r\n    };\r\n  }\r\n};\r\n\r\nconst deleteElement = () => {\r\n  if (!selectedElement.value) return;\r\n\r\n  const index = elements.value.findIndex((e) => e.id === selectedElement.value);\r\n  if (index === -1) return;\r\n\r\n  elements.value.splice(index, 1);\r\n  layers.value = layers.value.filter(\r\n    (layer) => layer.id !== selectedElement.value\r\n  );\r\n  selectedElement.value = null;\r\n  selectedLayer.value = null;\r\n  currentProperties.value = {};\r\n};\r\n\r\nconst savePosition = () => {\r\n  if (selectedElement.value === null) return;\r\n\r\n  const index = elements.value.findIndex((e) => e.id === selectedElement.value);\r\n  if (index === -1) return;\r\n\r\n  // console.log(\"Saving position for element:\", elements.value[index].id);\r\n\r\n  const element = elements.value[index];\r\n  if (element.type === \"h1\") {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n      font: currentProperties.value.font,\r\n      fontStyle: currentProperties.value.fontStyle,\r\n      fontSize: currentProperties.value.fontSize,\r\n      fillColor: currentProperties.value.fillColor,\r\n      fillTransparency: currentProperties.value.fillTransparency,\r\n      text: currentProperties.value.text,\r\n      textDecoration: currentProperties.value.textDecoration,\r\n      color: currentProperties.value.color,\r\n      textAlign: currentProperties.value.textAlign,\r\n      verticalAlign: currentProperties.value.verticalAlign,\r\n      textTransform: currentProperties.value.textTransform,\r\n    };\r\n  } else if (\r\n    element.type === \"image\" ||\r\n    element.type === \"eventlogo\" ||\r\n    element.type === \"useravatar\"\r\n  ) {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n      src: currentProperties.value.src,\r\n      strokeColor: currentProperties.value.strokeColor,\r\n      strokeWidth: currentProperties.value.strokeWidth,\r\n      associatedData: currentProperties.value.associatedData,\r\n    };\r\n  } else if (element.type === \"qrcode\") {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n      content: currentProperties.value.content,\r\n      size: currentProperties.value.size,\r\n    };\r\n  } else {\r\n    element.properties = {\r\n      ...element.properties,\r\n      x: currentProperties.value.x,\r\n      y: currentProperties.value.y,\r\n      width: currentProperties.value.w,\r\n      height: currentProperties.value.h,\r\n      rotation: currentProperties.value.r,\r\n    };\r\n  }\r\n};\r\n\r\nconst saveDesign = () => {\r\n  const designData = {\r\n    elements: elements.value.map((element) => ({\r\n      ...element,\r\n      properties: { ...element.properties },\r\n    })),\r\n    layers: layers.value,\r\n    canvasSize: canvasSize.value,\r\n  };\r\n  console.log(\"Saving design:\", designData);\r\n  return designData;\r\n};\r\n\r\nconst loadDesign = (data) => {\r\n  elements = data.elements;\r\n  layers.value = data.layers;\r\n  canvasSize.value = data.canvasSize;\r\n  nextTick(() => elements.value.forEach(setupInteract));\r\n};\r\n\r\nconst handleCanvasClick = (event) => {\r\n  if (!event.target.closest(\"[data-element-id]\")) {\r\n    selectedElement.value = null;\r\n    selectedLayer.value = null;\r\n    currentProperties.value = {};\r\n  }\r\n};\r\n\r\nconst updateText = (elementId, event) => {\r\n  const element = elements.value.find((e) => e.id === elementId);\r\n  if (element && element.type === \"text\") {\r\n    element.properties.text = event.target.textContent;\r\n    currentProperties.value.text = event.target.textContent;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\n// const dragStart = (type) => {\r\n//   event.dataTransfer.setData(\"text/plain\", type);\r\n// };\r\n\r\n// const onDrop = (event) => {\r\n//   event.preventDefault();\r\n//   const rect = canvas.value.getBoundingClientRect();\r\n//   const x = event.clientX - rect.left;\r\n//   const y = event.clientY - rect.top;\r\n//   const type = event.dataTransfer.getData(\"text\");\r\n\r\n//   if (type) {\r\n//     const element = addElement(type, x, y);\r\n//     if (element) {\r\n//       selectElement(element.id);\r\n//     }\r\n//   }\r\n// };\r\n\r\nconst toggleLayerVisibility = (index) => {\r\n  layers.value[index].visible = !layers.value[index].visible;\r\n  const elementIndex = elements.value.findIndex(\r\n    (e) => e.id === layers.value[index].id\r\n  );\r\n  if (elementIndex !== -1) {\r\n    elements[elementIndex].properties.lock = !layers.value[index].visible;\r\n    updateProperties();\r\n  }\r\n};\r\n\r\n// Alignment methods\r\nconst alignHorizontal = (alignment) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element) return;\r\n\r\n  const canvasRect = canvas.value.getBoundingClientRect();\r\n  const elementWidth = currentProperties.value.w || element.properties.width;\r\n\r\n  switch (alignment) {\r\n    case \"left\":\r\n      currentProperties.value.x = 0;\r\n      break;\r\n    case \"center\":\r\n      currentProperties.value.x = (canvasRect.width - elementWidth) / 2;\r\n      break;\r\n    case \"right\":\r\n      currentProperties.value.x = canvasRect.width - elementWidth;\r\n      break;\r\n  }\r\n  savePosition();\r\n};\r\n\r\nconst alignVertical = (alignment) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element) return;\r\n\r\n  const canvasRect = canvas.value.getBoundingClientRect();\r\n  const elementHeight = currentProperties.value.h || element.properties.height;\r\n\r\n  switch (alignment) {\r\n    case \"top\":\r\n      currentProperties.value.y = 0;\r\n      break;\r\n    case \"middle\":\r\n      currentProperties.value.y = (canvasRect.height - elementHeight) / 2;\r\n      break;\r\n    case \"bottom\":\r\n      currentProperties.value.y = canvasRect.height - elementHeight;\r\n      break;\r\n  }\r\n  savePosition();\r\n};\r\n\r\n// Text style methods\r\nconst toggleTextStyle = (style) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element || element.type !== \"text\") return;\r\n\r\n  if (style === \"bold\") {\r\n    currentProperties.value.fontStyle =\r\n      currentProperties.value.fontStyle === \"Bold\" ? \"Regular\" : \"Bold\";\r\n  } else if (style === \"italic\") {\r\n    currentProperties.value.fontStyle =\r\n      currentProperties.value.fontStyle === \"Italic\" ? \"Regular\" : \"Italic\";\r\n  } else if (style === \"underline\") {\r\n    currentProperties.value.textDecoration =\r\n      currentProperties.value.textDecoration === \"underline\"\r\n        ? \"none\"\r\n        : \"underline\";\r\n  }\r\n  applyTextStyle();\r\n};\r\n\r\nconst applyTextStyle = (newProperties = null) => {\r\n  if (selectedElement.value === null) return;\r\n  const element = elements.value.find((e) => e.id === selectedElement.value);\r\n  if (!element || element.type !== \"text\") return;\r\n\r\n  if (newProperties) {\r\n    currentProperties.value = { ...currentProperties.value, ...newProperties };\r\n  }\r\n\r\n  const target = document.querySelector(\r\n    `[data-element-id=\"${element.id}\"] div[contenteditable]`\r\n  );\r\n  if (target) {\r\n    target.style.fontFamily = currentProperties.value.font;\r\n    target.style.fontSize = `${currentProperties.value.fontSize}px`;\r\n    target.style.fontWeight =\r\n      currentProperties.value.fontStyle === \"Bold\" ? \"bold\" : \"normal\";\r\n    target.style.fontStyle =\r\n      currentProperties.value.fontStyle === \"Italic\" ? \"italic\" : \"normal\";\r\n    target.style.color = currentProperties.value.color;\r\n    target.style.backgroundColor = currentProperties.value.fillTransparency\r\n      ? \"transparent\"\r\n      : currentProperties.value.fillColor;\r\n    target.style.textDecoration = currentProperties.value.textDecoration;\r\n    target.style.textAlign =\r\n      displayOption.value === \"right side only\"\r\n        ? \"right\"\r\n        : currentProperties.value.textAlign;\r\n    target.style.verticalAlign = currentProperties.value.verticalAlign;\r\n    target.style.textTransform = currentProperties.value.textTransform;\r\n    target.style.direction =\r\n      displayOption.value === \"right side only\" ? \"rtl\" : \"ltr\";\r\n    target.setAttribute(\r\n      \"dir\",\r\n      displayOption.value === \"right side only\" ? \"rtl\" : \"ltr\"\r\n    );\r\n    target.textContent =\r\n      currentProperties.value.text || element.properties.exampleText;\r\n\r\n    // Ensure cursor is at the end for RTL\r\n    if (displayOption.value === \"right side only\") {\r\n      const range = document.createRange();\r\n      const selection = window.getSelection();\r\n      range.selectNodeContents(target);\r\n      range.collapse(false); // Collapse to the end\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n    }\r\n  }\r\n  savePosition();\r\n};\r\n\r\nconst makeTransparent = () => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.fillColor = \"rgba(0, 0, 0, 0)\";\r\n    currentProperties.value.fillTransparency = true;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyColor = (color) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.fillColor = color;\r\n    currentProperties.value.fillTransparency = false;\r\n    applyTextStyle();\r\n    nextTick(() => {\r\n      const target = document.querySelector(\r\n        `[data-element-id=\"${selectedElement.value}\"] div[contenteditable]`\r\n      );\r\n      if (target)\r\n        target.style.backgroundColor = currentProperties.value.fillColor;\r\n    });\r\n  }\r\n};\r\n\r\nconst applyTextAlign = (align) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.textAlign = align;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyVerticalAlign = (align) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.verticalAlign = align;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyTextTransform = (transform) => {\r\n  if (selectedElementType.value === \"text\") {\r\n    currentProperties.value.textTransform = transform;\r\n    applyTextStyle();\r\n  }\r\n};\r\n\r\nconst applyDisplayOption = (option) => {\r\n  displayOption.value = option;\r\n  applyTextStyle();\r\n};\r\n\r\n// Watch selectedElement to update properties\r\nwatch(selectedElement, () => {\r\n  updateProperties();\r\n  if (selectedElement.value) applyTextStyle();\r\n});\r\n\r\n// Watch currentProperties to save changes\r\nwatch(currentProperties, () => savePosition(), { deep: true });\r\n\r\n// Initialize interact.js\r\nonMounted(() => {\r\n  elements.value.forEach(setupInteract);\r\n});\r\n\r\nwatch(displayOption, () => {\r\n  applyTextStyle();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  position: relative;\r\n  transform-style: preserve-3d;\r\n  transition: transform 0.6s ease-in-out;\r\n}\r\n\r\n.design-page {\r\n  transition: transform 0.3s ease-in-out;\r\n}\r\n\r\n.design-page.flipped .card {\r\n  transform: rotateY(180deg);\r\n}\r\n\r\n.front,\r\n.back {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  backface-visibility: hidden;\r\n}\r\n\r\n.back {\r\n  transform: rotateY(180deg);\r\n}\r\n\r\n.grid-overlay::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  inset: 0;\r\n  background-image: linear-gradient(\r\n      to right,\r\n      rgba(156, 163, 175, 0.2) 1px,\r\n      transparent 1px\r\n    ),\r\n    linear-gradient(to bottom, rgba(156, 163, 175, 0.2) 1px, transparent 1px),\r\n    linear-gradient(to right, rgba(156, 163, 175, 0.6) 1px, transparent 1px),\r\n    linear-gradient(to bottom, rgba(156, 163, 175, 0.6) 1px, transparent 1px);\r\n  background-size: calc(100% / 20) calc(100% / 20),\r\n    calc(100% / 20) calc(100% / 20), calc(100% / 4) 100%, 100% calc(100% / 6);\r\n  pointer-events: none;\r\n  z-index: 10;\r\n}\r\n\r\nbutton:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\ndetails[open] summary .rotate-180 {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n@media (max-width: 640px) {\r\n  .design-page {\r\n    width: 250px;\r\n    height: 350px;\r\n  }\r\n}\r\n</style>\r\n"],"names":["props","__props","emit","__emit","fileInput","ref","uploadProgress","activeTab","uploadedImages","searchQuery","selectedCategory","filteredImages","computed","img","matchesCategory","matchesSearch","triggerInput","handleFileUpload","event","files","processed","simulateUpload","file","idx","reader","newImage","selectImage","image","_createElementBlock","$emit","_createElementVNode","_hoisted_1","_hoisted_2","_cache","_hoisted_3","_unref","_hoisted_4","_openBlock","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","$event","_hoisted_10","_Fragment","_renderList","_hoisted_13","_hoisted_14","frontCanvas","backCanvas","activeSide","zoomLevel","showGrid","isFlipping","dropzone","sendElement","dropX","dropY","showFrontImageModal","showBackImageModal","zoomScale","switchSideTab","side","zoom","delta","toggleGrid","onDragStart","tag","handleDrop","canvasRect","mouseX","mouseY","onDragEnd","item","x","y","rect","dropXPos","dropYPos","handleFrontImageUploaded","dataUrl","handleBackImageUploaded","canvas","elements","selectedElement","selectedLayer","layers","displayOption","currentProperties","watch","newActiveSide","newFrontCanvas","newBackCanvas","newElementData","receiveSelectElement","elementId","selectedElementType","element","setupInteract","target","interact","index","e","updateProperties","selectElement","layer","selectLayer","newProperties","savePosition","toggleLayerVisibility","elementIndex","alignHorizontal","alignment","elementWidth","alignVertical","elementHeight","toggleTextStyle","style","applyTextStyle","range","selection","makeTransparent","applyColor","color","nextTick","applyTextAlign","align","applyVerticalAlign","applyTextTransform","transform","applyDisplayOption","option","onMounted","_createVNode","_component_Icon","_normalizeClass","_normalizeStyle","_hoisted_11","_hoisted_12","_createBlock","_component_Canvas","_component_Sidebar","_component_ImageUploadModal"],"mappings":"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"}