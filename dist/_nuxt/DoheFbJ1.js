import{ah as c,Z as g,u}from"./74hHYSrs.js";const d=c("page",{state:()=>({pageWidth:105,pageHeight:148,presetWidth:105,presetHeight:148,showModal:!1,badgeOrientation:"portrait",badgeSize:"A6",badgeSizePreset:"preset",customWidth:0,customHeight:0}),actions:{closeModal(){this.showModal=!1,this.badgeSizePreset="preset",this.badgeSize="A6",this.customWidth=105,this.customHeight=148,this.badgeOrientation="portrait"},saveBadgeConfig(){const t=g(),e=u();let i=this.customWidth,s=this.customHeight;if(this.badgeSizePreset==="preset")switch(this.badgeSize){case"A4":i=210,s=297;break;case"A6":i=105,s=148;break;case"A7":i=74,s=105;break;default:i=this.customWidth,s=this.customHeight}this.presetWidth=i,this.presetHeight=s,this.badgeOrientation==="landscape"&&([this.presetWidth,this.presetHeight]=[this.presetHeight,this.presetWidth]);const o=Math.round(this.presetWidth*3.78),r=Math.round(this.presetHeight*3.78);this.pageWidth=o,this.pageHeight=r,console.log("route.path",t.path),this.showModal=!1,t.path=="/design-badge"&&e.push("/design-badge/page-builder")},updateCustomSize(){if(this.badgeSizePreset==="preset")switch(this.badgeSize){case"A4":this.customWidth=210,this.customHeight=297;break;case"A6":this.customWidth=105,this.customHeight=148;break;case"A7":this.customWidth=74,this.customHeight=105;break;default:this.customWidth=0,this.customHeight=0}},setBadgeSize(t){this.badgeSize=t,this.updateCustomSize()},setBadgeSizePreset(t){this.badgeSizePreset=t,this.updateCustomSize()},setBadgeOrientation(t){this.badgeOrientation=t},toggleModal(){this.showModal=!this.showModal},getWidthLabel(){if(this.badgeSizePreset==="preset")switch(this.badgeSize){case"A7":return this.badgeOrientation==="landscape"?"105.0mm":"74.0mm";case"A6":return this.badgeOrientation==="landscape"?"148.0mm":"105.0mm";case"A4":default:return this.badgeOrientation==="landscape"?"297.0mm":"210.0mm"}return"0.0mm"},getHeightLabel(){if(this.badgeSizePreset==="preset")switch(this.badgeSize){case"A7":return this.badgeOrientation==="landscape"?"74.0mm":"105.0mm";case"A6":return this.badgeOrientation==="landscape"?"105.0mm":"148.0mm";case"A4":default:return this.badgeOrientation==="landscape"?"210.0mm":"297.0mm"}return"0.0mm"}}}),f=c("canvasStore",{state:()=>({activeTab:"design",frontBoxes:[],backBoxes:[],activeSide:"front",selectedElement:null,selectedElementType:null,currentProperties:{},dropzone:null,showImageModal:!1,showGradientModal:!1,showColorModal:!1,frontBackground:null,backBackground:null,pendingImagePosition:null,pendingImageSide:null,cursorPosition:null,dropdownOpen:!1,imageItem:null}),getters:{boxes:t=>t.activeSide==="front"?t.frontBoxes:t.backBoxes,currentBackground:t=>t.activeSide==="front"?t.frontBackground:t.backBackground},actions:{elementMachanism(t){const e=t.item,i=t.position;return{id:Date.now(),text:e.value||"Sample Text",type:e.type,label:`${e.label}`,position:i,properties:{size:{width:t.width??"",height:t.height??""},rotation:0,font:"Roboto",fontWeight:"normal",fontStyle:"normal",fontSize:"Auto",fillColor:e.type==="rectangle"?"blue":"transparent",fillTransparency:!1,textDecoration:"none",color:"black",textAlign:e.type==="h1"||e.type==="p"?"center":"",verticalAlign:e.type==="h1"||e.type==="p"?"middle":"",horizontalAlign:e.type==="h1"||e.type==="p"?"center":"",textTransform:"none",src:t.dataUrl??"",strokeColor:"",strokeWidth:0,associatedData:"",content:"",x:i.left,y:i.top,text:e.label||"Sample Text",displayOption:"both sides",qrcode:t.qrcode??"",direction:"ltr"},isSelected:!0,isDragging:!1,visible:!0}},addElementFromDrag(t,e){const i=d(),s=this.dropzone?.offsetWidth||i.presetWidth*3.78,o=this.dropzone?.offsetHeight||i.presetHeight*3.78,r=200,n=64,a={left:Math.max(0,Math.min(e.left,s-r)),top:Math.max(0,Math.min(e.top,o-n))},l={item:t,position:a,width:r,height:n},h=this.elementMachanism(l);this.addElement(h),this.selectedElement=h.id,this.updateProperties()},handleImageUploaded(t){const e={left:123,top:204};this.pendingImagePosition=e,this.pendingImageSide=this.activeSide;const i=d(),s={left:198,top:277},o=this.dropzone?.offsetWidth||i.presetWidth*3.78,r=this.dropzone?.offsetHeight||i.presetHeight*3.78,n=this.imageItem.type==="background"?i.presetWidth*3.78:150,a=this.imageItem.type==="background"?i.presetHeight*3.78:150,l={left:Math.max(0,Math.min(this.imageItem.type==="background"?s.left:this.pendingImagePosition.left,o-n)),top:Math.max(0,Math.min(this.imageItem.type==="background"?s.top:this.pendingImagePosition.top,r-a))},h={item:{text:this.imageItem.label,type:this.imageItem.type,label:this.imageItem.type==="background"?"background":"Image"},position:l,dataUrl:t,width:n,height:a},p=this.elementMachanism(h);this.pendingImageSide==="front"?this.frontBoxes.push(p):this.backBoxes.push(p),this.pendingImagePosition=null,this.pendingImageSide=null,this.selectedElement=p.id,this.updateProperties()},addElement(t){this.activeSide==="front"?this.frontBoxes.push(t):this.backBoxes.push(t)},handleQRCodeGenerator(t){const i={item:{text:"",type:"qrcode",label:"QR Code"},position:{left:43,top:188},width:150,height:150,qrcode:{value:t,variant:"pixelated",radius:1,blackColor:"#000000",whiteColor:"transparent"}},s=this.elementMachanism(i);this.addElement(s),this.selectedElement=s.id,this.updateProperties()},updateProperties(t){if(this.selectedElement===null){this.currentProperties={};return}const e=this.boxes.find(i=>i.id===this.selectedElement);e&&(t&&(e.position.left=t.x??e.position.left,e.position.top=t.y??e.position.top,e.properties={...e.properties,...t},e.text=t.text??e.text),this.currentProperties={x:Math.floor(e.position.left),y:Math.floor(e.position.top),size:{...e.properties.size},rotation:e.properties.rotation,font:e.properties.font,fontWeight:e.properties.fontWeight,fontStyle:e.properties.fontStyle,fontSize:e.properties.fontSize,fillColor:e.properties.fillColor,fillTransparency:e.properties.fillTransparency,textDecoration:e.properties.textDecoration,color:e.properties.color,textAlign:e.properties.textAlign,verticalAlign:e.properties.verticalAlign,horizontalAlign:e.properties.horizontalAlign,textTransform:e.properties.textTransform,src:e.properties.src,strokeColor:e.properties.strokeColor,strokeWidth:e.properties.strokeWidth,associatedData:e.properties.associatedData,content:e.properties.content,text:e.text,displayOption:e.properties.displayOption,qrcode:e.properties.qrcode,direction:e.properties.direction})},updateElementText(t,e){const s=(this.activeSide==="front"?this.frontBoxes:this.backBoxes).find(o=>o.id===t);s&&(s.text=e,s.properties.text=e)},alignHorizontal(t){if(this.selectedElement===null||!this.dropzone)return;const e=this.boxes.find(o=>o.id===this.selectedElement);if(!e)return;const i=this.dropzone.getBoundingClientRect(),s=e.properties.size.width;switch(t){case"left":e.position.left=0,e.properties.textAlign="left",e.properties.horizontalAlign="left";break;case"center":e.position.left=(i.width-s)/2,e.properties.textAlign="center",e.properties.horizontalAlign="center";break;case"right":e.position.left=i.width-s,e.properties.textAlign="right",e.properties.horizontalAlign="right";break}this.currentProperties.x=e.position.left,this.currentProperties.textAlign=t,this.currentProperties.horizontalAlign=t,this.updateProperties(this.currentProperties)},alignVertical(t){if(this.selectedElement===null||!this.dropzone)return;const e=this.boxes.find(o=>o.id===this.selectedElement);if(!e)return;const i=this.dropzone.getBoundingClientRect(),s=e.properties.size.height;switch(t){case"top":e.position.top=0,e.properties.verticalAlign="top";break;case"middle":e.position.top=(i.height-s)/2,e.properties.verticalAlign="middle";break;case"bottom":e.position.top=i.height-s,e.properties.verticalAlign="bottom";break}this.currentProperties.y=e.position.top,this.currentProperties.verticalAlign=t,this.updateProperties(this.currentProperties)},makeTransparent(t){t==="fillColor"?(this.currentProperties.fillTransparency=!0,this.currentProperties.fillColor="transparent",this.updateProperties(this.currentProperties)):(this.currentProperties.color="transparent",this.updateProperties(this.currentProperties))},applyTextAlign(t){this.currentProperties.textAlign=t,this.currentProperties.horizontalAlign=t;const e=this.boxes.find(i=>i.id===this.selectedElement);e&&(e.properties.textAlign=t,e.properties.horizontalAlign=t),this.updateProperties(this.currentProperties)},applyVerticalAlign(t){this.currentProperties.verticalAlign=t;const e=this.boxes.find(i=>i.id===this.selectedElement);e&&(e.properties.verticalAlign=t),this.updateProperties(this.currentProperties)},applyTextTransform(t){this.currentProperties.textTransform=t,this.updateProperties(this.currentProperties)},toggleTextStyle(t){t==="bold"?this.currentProperties.fontWeight=this.currentProperties.fontWeight==="bold"?"normal":"bold":t==="italic"?this.currentProperties.fontStyle=this.currentProperties.fontStyle==="italic"?"normal":"italic":t==="underline"&&(this.currentProperties.textDecoration=this.currentProperties.textDecoration==="underline"?"none":"underline"),this.updateProperties(this.currentProperties)},toggleLayerVisibility(t){const i=(this.activeSide==="front"?this.frontBoxes:this.backBoxes).find(s=>s.id===t);i&&(i.visible=!i.visible)},selectLayer(t){this.selectedElement=t,this.updateProperties()},setTextDirection(t,e){const i=this.boxes.find(s=>s.id===t);i&&(i.properties.direction=e,this.currentProperties.direction=e,this.updateProperties(this.currentProperties))},setBackground(t,e){e==="front"?this.frontBackground=t:this.backBackground=t},applyGradient(t,e){this.setBackground(t,e),this.showGradientModal=!1},applyColor(t,e){this.setBackground(t,e),this.showColorModal=!1}},persist:!0});export{f as a,d as u};
//# sourceMappingURL=DoheFbJ1.js.map
