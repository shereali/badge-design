{"version":3,"file":"DmEVysNc.js","sources":["../../../../../../../modules/designbadge/components/ImageUploadModal.vue"],"sourcesContent":["<template>\r\n  <div\r\n    role=\"dialog\"\r\n    aria-modal=\"true\"\r\n    aria-label=\"Image Manager\"\r\n    class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n    @click.self=\"$emit('close')\"\r\n  >\r\n    <div\r\n      class=\"bg-white rounded-2xl shadow-lg w-full max-w-2xl p-6 animate-fadeIn flex flex-col\"\r\n    >\r\n      <div class=\"flex justify-between items-center border-b pb-3 mb-4\">\r\n        <h3 class=\"text-xl font-semibold text-gray-800\">Image Manager</h3>\r\n        <button\r\n          class=\"text-gray-400 hover:text-red-500 transition\"\r\n          @click=\"$emit('close')\"\r\n        >\r\n          âœ•\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Tabs -->\r\n      <div class=\"flex space-x-2 mb-4\">\r\n        <button\r\n          class=\"px-4 py-2 rounded\"\r\n          :class=\"\r\n            activeTab === 'upload'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200 text-gray-700'\r\n          \"\r\n          @click=\"activeTab = 'upload'\"\r\n        >\r\n          Upload Image\r\n        </button>\r\n        <button\r\n          class=\"px-4 py-2 rounded\"\r\n          :class=\"\r\n            activeTab === 'library'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200 text-gray-700'\r\n          \"\r\n          @click=\"activeTab = 'library'\"\r\n        >\r\n          Uploaded Images\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Upload Tab -->\r\n      <div v-if=\"activeTab === 'upload'\">\r\n        <div\r\n          class=\"flex flex-col items-center justify-center p-6 border-2 border-dashed border-blue-400 rounded-lg cursor-pointer hover:bg-blue-50 transition\"\r\n          @click=\"triggerInput\"\r\n        >\r\n          <svg\r\n            class=\"w-12 h-12 text-blue-500 mb-2\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M3 15a4 4 0 014-4h1V7a4 4 0 014-4h2a4 4 0 014 4v4h1a4 4 0 014 4v5H3v-5z\"\r\n            />\r\n          </svg>\r\n          <p class=\"text-sm text-gray-600\">Click to select an image</p>\r\n          <input\r\n            ref=\"fileInput\"\r\n            type=\"file\"\r\n            accept=\"image(/*\"\r\n            multiple\r\n            class=\"hidden\"\r\n            @change=\"handleFileUpload\"\r\n          />\r\n        </div>\r\n\r\n        <div v-if=\"uploadProgress > 0\" class=\"mt-6\">\r\n          <div class=\"w-full bg-gray-200 rounded-full h-3\">\r\n            <div\r\n              class=\"bg-blue-500 h-3 rounded-full transition-all duration-300 ease-in-out\"\r\n              :style=\"{ width: uploadProgress + '%' }\"\r\n            ></div>\r\n          </div>\r\n          <p class=\"text-sm text-gray-700 text-center mt-2\">\r\n            Uploading... {{ uploadProgress }}%\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Uploaded Images Tab -->\r\n      <div v-if=\"activeTab === 'library'\">\r\n        <!-- Search + Category -->\r\n        <div class=\"flex justify-between items-center mb-4\">\r\n          <input\r\n            v-model=\"searchQuery\"\r\n            type=\"text\"\r\n            placeholder=\"Search image...\"\r\n            class=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n          <select\r\n            v-model=\"selectedCategory\"\r\n            class=\"ml-2 px-3 py-2 border rounded\"\r\n          >\r\n            <option value=\"\">All</option>\r\n            <option value=\"nature\">Nature</option>\r\n            <option value=\"tech\">Tech</option>\r\n            <option value=\"people\">People</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Preview List -->\r\n        <div\r\n          class=\"grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-64 overflow-y-auto\"\r\n        >\r\n          <div\r\n            v-for=\"(img, idx) in filteredImages\"\r\n            :key=\"idx\"\r\n            class=\"relative cursor-pointer border rounded hover:border-blue-500\"\r\n            :class=\"{ 'border-blue-500': img === selectedImage }\"\r\n            @click=\"selectImage(img)\"\r\n          >\r\n            <img\r\n              :src=\"img.src\"\r\n              :alt=\"img.name\"\r\n              class=\"w-full h-24 object-cover rounded\"\r\n            />\r\n            <p class=\"text-xs text-center text-gray-500 truncate\">\r\n              {{ img.name }}\r\n            </p>\r\n            <div\r\n              v-if=\"img === selectedImage\"\r\n              class=\"absolute top-1 right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center\"\r\n            >\r\n              <svg\r\n                class=\"w-3 h-3 text-white\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                  stroke-width=\"2\"\r\n                  d=\"M5 13l4 4L19 7\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Footer with Buttons -->\r\n      <div class=\"mt-6 flex justify-end space-x-2\">\r\n        <button\r\n          v-if=\"activeTab === 'library' && selectedImage\"\r\n          class=\"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition\"\r\n          @click=\"chooseImage\"\r\n        >\r\n          Choose\r\n        </button>\r\n        <button\r\n          class=\"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition\"\r\n          @click=\"$emit('close')\"\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from \"vue\";\r\n\r\nconst props = defineProps({\r\n  side: {\r\n    type: String,\r\n    default: \"front\", // or \"back\"\r\n  },\r\n});\r\n\r\nconst emit = defineEmits([\"uploaded\", \"close\"]);\r\n\r\nconst fileInput = ref(null);\r\nconst uploadProgress = ref(0);\r\nconst activeTab = ref(\"upload\");\r\nconst uploadedImages = ref([\r\n  {\r\n    src: \"https://placekitten.com/200/300\",\r\n    name: \"Kitten 1\",\r\n    category: \"nature\",\r\n  },\r\n  {\r\n    src: \"https://placekitten.com/300/300\",\r\n    name: \"Kitten 2\",\r\n    category: \"people\",\r\n  },\r\n  {\r\n    src: \"https://placekitten.com/400/300\",\r\n    name: \"Kitten 3\",\r\n    category: \"tech\",\r\n  },\r\n]);\r\nconst searchQuery = ref(\"\");\r\nconst selectedCategory = ref(\"\");\r\nconst selectedImage = ref(null);\r\n\r\nconst filteredImages = computed(() => {\r\n  return uploadedImages.value.filter((img) => {\r\n    const matchesCategory = selectedCategory.value\r\n      ? img.category === selectedCategory.value\r\n      : true;\r\n    const matchesSearch = img.name\r\n      .toLowerCase()\r\n      .includes(searchQuery.value.toLowerCase());\r\n    return matchesCategory && matchesSearch;\r\n  });\r\n});\r\n\r\nfunction triggerInput() {\r\n  fileInput.value?.click();\r\n}\r\n\r\nfunction handleFileUpload(event) {\r\n  const files = Array.from(event.target.files);\r\n  if (!files.length) return;\r\n\r\n  let processed = 0;\r\n  uploadProgress.value = 0;\r\n\r\n  const simulateUpload = (file, idx) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const newImage = {\r\n        src: reader.result,\r\n        name: file.name,\r\n        category: \"uncategorized\",\r\n      };\r\n      uploadedImages.value.push(newImage);\r\n      activeTab.value = \"library\"; // Switch to library tab\r\n      selectedImage.value = newImage; // Select the newly uploaded image\r\n      processed++;\r\n      uploadProgress.value = Math.round((processed / files.length) * 100);\r\n\r\n      if (processed === files.length) {\r\n        setTimeout(() => (uploadProgress.value = 0), 600);\r\n      }\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  files.forEach((file, idx) => simulateUpload(file, idx));\r\n}\r\n\r\nfunction selectImage(image) {\r\n  selectedImage.value = image;\r\n}\r\n\r\nfunction chooseImage() {\r\n  if (selectedImage.value) {\r\n    emit(\"uploaded\", {\r\n      side: props.side,\r\n      src: selectedImage.value.src,\r\n      name: selectedImage.value.name,\r\n      category: selectedImage.value.category,\r\n    });\r\n    emit(\"close\");\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale(0.9);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n}\r\n.animate-fadeIn {\r\n  animation: fadeIn 0.3s ease-out;\r\n}\r\n</style>\r\n"],"names":["props","__props","emit","__emit","fileInput","ref","uploadProgress","activeTab","uploadedImages","searchQuery","selectedCategory","selectedImage","filteredImages","computed","img","matchesCategory","matchesSearch","triggerInput","handleFileUpload","event","files","processed","simulateUpload","file","idx","reader","newImage","selectImage","image","chooseImage","_createElementBlock","$emit","_createElementVNode","_hoisted_1","_hoisted_2","_cache","_hoisted_3","_hoisted_4","_openBlock","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","$event","_hoisted_10","_Fragment","_renderList","_normalizeClass","_hoisted_13","_hoisted_14","_hoisted_15"],"mappings":"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"}