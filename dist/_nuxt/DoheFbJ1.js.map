{"version":3,"file":"DoheFbJ1.js","sources":["../../../../../../../modules/designbadge/stores/usePageStore.ts","../../../../../../../modules/designbadge/stores/useCanvasStore.ts"],"sourcesContent":["// stores/pageStore.ts\r\nimport { defineStore } from \"pinia\";\r\n\r\n// Define the state interface\r\nexport interface PageState {\r\n  pageWidth: number;\r\n  pageHeight: number;\r\n  showModal: boolean;\r\n  badgeOrientation: string;\r\n  badgeSize: string;\r\n  badgeSizePreset: string;\r\n  customWidth: number;\r\n  customHeight: number;\r\n  presetWidth: number;\r\n  presetHeight: number;\r\n}\r\n\r\n// Define the store\r\nexport const usePageStore = defineStore(\"page\", {\r\n  state: (): PageState => ({\r\n    pageWidth: 105, // default values\r\n    pageHeight: 148,\r\n    presetWidth: 105,\r\n    presetHeight: 148,\r\n    showModal: false,\r\n    badgeOrientation: \"portrait\",\r\n    badgeSize: \"A6\",\r\n    badgeSizePreset: \"preset\",\r\n    customWidth: 0,\r\n    customHeight: 0,\r\n  }),\r\n\r\n  actions: {\r\n    closeModal() {\r\n      this.showModal = false;\r\n      this.badgeSizePreset = \"preset\";\r\n      this.badgeSize = \"A6\";\r\n      this.customWidth = 105;\r\n      this.customHeight = 148;\r\n      this.badgeOrientation = \"portrait\";\r\n    },\r\n\r\n    saveBadgeConfig() {\r\n      const route = useRoute();\r\n      const router = useRouter();\r\n\r\n      let widthMM = this.customWidth;\r\n      let heightMM = this.customHeight;\r\n\r\n      // If preset, assign standard mm sizes\r\n      if (this.badgeSizePreset === \"preset\") {\r\n        switch (this.badgeSize) {\r\n          case \"A4\":\r\n            widthMM = 210;\r\n            heightMM = 297;\r\n            break;\r\n          case \"A6\":\r\n            widthMM = 105;\r\n            heightMM = 148;\r\n            break;\r\n          case \"A7\":\r\n            widthMM = 74;\r\n            heightMM = 105;\r\n            break;\r\n          default:\r\n            widthMM = this.customWidth;\r\n            heightMM = this.customHeight;\r\n        }\r\n      }\r\n\r\n      // Swap for landscape\r\n      this.presetWidth = widthMM;\r\n      this.presetHeight = heightMM;\r\n\r\n      if (this.badgeOrientation === \"landscape\") {\r\n        [this.presetWidth, this.presetHeight] = [\r\n          this.presetHeight,\r\n          this.presetWidth,\r\n        ];\r\n      }\r\n\r\n      // Convert mm → px (1mm ≈ 3.78px)\r\n      const finalWidthPX = Math.round(this.presetWidth * 3.78);\r\n      const finalHeightPX = Math.round(this.presetHeight * 3.78);\r\n\r\n      // Update pageWidth and pageHeight\r\n      this.pageWidth = finalWidthPX;\r\n      this.pageHeight = finalHeightPX;\r\n      console.log(\"route.path\", route.path);\r\n\r\n      // console.log(\"pageHeight\", this.pageHeight);\r\n\r\n      this.showModal = false;\r\n      if (route.path == \"/design-badge\") {\r\n        router.push(\"/design-badge/page-builder\");\r\n      }\r\n    },\r\n\r\n    updateCustomSize() {\r\n      if (this.badgeSizePreset === \"preset\") {\r\n        switch (this.badgeSize) {\r\n          case \"A4\":\r\n            this.customWidth = 210;\r\n            this.customHeight = 297;\r\n            break;\r\n          case \"A6\":\r\n            this.customWidth = 105;\r\n            this.customHeight = 148;\r\n            break;\r\n          case \"A7\":\r\n            this.customWidth = 74;\r\n            this.customHeight = 105;\r\n            break;\r\n          default:\r\n            this.customWidth = 0;\r\n            this.customHeight = 0;\r\n        }\r\n      }\r\n    },\r\n\r\n    setBadgeSize(size: string) {\r\n      this.badgeSize = size;\r\n      this.updateCustomSize();\r\n    },\r\n\r\n    setBadgeSizePreset(preset: string) {\r\n      this.badgeSizePreset = preset;\r\n      this.updateCustomSize();\r\n    },\r\n\r\n    setBadgeOrientation(orientation: string) {\r\n      this.badgeOrientation = orientation;\r\n    },\r\n\r\n    toggleModal() {\r\n      this.showModal = !this.showModal;\r\n    },\r\n\r\n    getWidthLabel() {\r\n      if (this.badgeSizePreset === \"preset\") {\r\n        switch (this.badgeSize) {\r\n          case \"A7\":\r\n            return this.badgeOrientation === \"landscape\" ? \"105.0mm\" : \"74.0mm\";\r\n          case \"A6\":\r\n            return this.badgeOrientation === \"landscape\"\r\n              ? \"148.0mm\"\r\n              : \"105.0mm\";\r\n          case \"A4\":\r\n          default:\r\n            return this.badgeOrientation === \"landscape\"\r\n              ? \"297.0mm\"\r\n              : \"210.0mm\";\r\n        }\r\n      }\r\n      return \"0.0mm\"; // Default case for custom\r\n    },\r\n\r\n    getHeightLabel() {\r\n      if (this.badgeSizePreset === \"preset\") {\r\n        switch (this.badgeSize) {\r\n          case \"A7\":\r\n            return this.badgeOrientation === \"landscape\" ? \"74.0mm\" : \"105.0mm\";\r\n          case \"A6\":\r\n            return this.badgeOrientation === \"landscape\"\r\n              ? \"105.0mm\"\r\n              : \"148.0mm\";\r\n          case \"A4\":\r\n          default:\r\n            return this.badgeOrientation === \"landscape\"\r\n              ? \"210.0mm\"\r\n              : \"297.0mm\";\r\n        }\r\n      }\r\n      return \"0.0mm\"; // Default case for custom\r\n    },\r\n  },\r\n});\r\n","import { defineStore } from \"pinia\";\r\nimport { usePageStore } from \"./usePageStore\";\r\ninterface Size {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\ninterface Variant {\r\n  inner: string;\r\n  marker: string;\r\n  pixel: string;\r\n}\r\n\r\ninterface QRCode {\r\n  value: string;\r\n  variant: string;\r\n  radius: number;\r\n  blackColor: string;\r\n  whiteColor: string;\r\n}\r\n\r\ninterface Position {\r\n  left: number;\r\n  top: number;\r\n}\r\n\r\ninterface ElementProperties {\r\n  size: Size;\r\n  rotation: number;\r\n  font: string;\r\n  fontWeight: string;\r\n  fontStyle: string;\r\n  fontSize: string | number;\r\n  fillColor: string;\r\n  fillTransparency: boolean;\r\n  textDecoration: string;\r\n  color: string;\r\n  textAlign: string;\r\n  verticalAlign: string;\r\n  horizontalAlign: string;\r\n  textTransform: string;\r\n  src: string;\r\n  strokeColor: string;\r\n  strokeWidth: number;\r\n  associatedData: string;\r\n  content: string;\r\n  x: number;\r\n  y: number;\r\n  text: string;\r\n  displayOption?: string;\r\n  qrcode: QRCode;\r\n  direction: string;\r\n}\r\n\r\ninterface CanvasElement {\r\n  id: string | number;\r\n  text: string;\r\n  type: string;\r\n  label: string;\r\n  position: Position;\r\n  properties: ElementProperties;\r\n  isSelected: boolean;\r\n  isDragging: boolean;\r\n  visible: boolean;\r\n}\r\n\r\nexport const useCanvasStore = defineStore(\"canvasStore\", {\r\n  state: () => ({\r\n    activeTab: \"design\" as string,\r\n    frontBoxes: [] as CanvasElement[],\r\n    backBoxes: [] as CanvasElement[],\r\n    activeSide: \"front\" as \"front\" | \"back\",\r\n    selectedElement: null as string | number | null,\r\n    selectedElementType: null as string | null,\r\n    currentProperties: {} as Partial<ElementProperties>,\r\n    dropzone: null as HTMLElement | null,\r\n    showImageModal: false,\r\n    showGradientModal: false,\r\n    showColorModal: false,\r\n    frontBackground: null as string | null, // Background for front side\r\n    backBackground: null as string | null, // Background for back side\r\n    pendingImagePosition: null as Position | null,\r\n    pendingImageSide: null as \"front\" | \"back\" | null,\r\n    cursorPosition: null as { node: Node; offset: number } | null,\r\n    dropdownOpen: false as boolean,\r\n    imageItem: null as string | any,\r\n  }),\r\n  getters: {\r\n    boxes: (state): CanvasElement[] =>\r\n      state.activeSide === \"front\" ? state.frontBoxes : state.backBoxes,\r\n    currentBackground: (state): string | null =>\r\n      state.activeSide === \"front\"\r\n        ? state.frontBackground\r\n        : state.backBackground,\r\n  },\r\n  actions: {\r\n    elementMachanism(data?: any) {\r\n      const item = data.item;\r\n      const position = data.position;\r\n\r\n      const newElement: CanvasElement = {\r\n        id: Date.now(),\r\n        text: item.value || \"Sample Text\",\r\n        type: item.type,\r\n        label: `${item.label}`,\r\n        position,\r\n        properties: {\r\n          size: { width: data.width ?? \"\", height: data.height ?? \"\" },\r\n          rotation: 0,\r\n          font: \"Roboto\",\r\n          fontWeight: \"normal\",\r\n          fontStyle: \"normal\",\r\n          fontSize: \"Auto\",\r\n          fillColor: item.type === \"rectangle\" ? \"blue\" : \"transparent\",\r\n          fillTransparency: false,\r\n          textDecoration: \"none\",\r\n          color: \"black\",\r\n          textAlign: item.type === \"h1\" || item.type === \"p\" ? \"center\" : \"\",\r\n          verticalAlign:\r\n            item.type === \"h1\" || item.type === \"p\" ? \"middle\" : \"\",\r\n          horizontalAlign:\r\n            item.type === \"h1\" || item.type === \"p\" ? \"center\" : \"\",\r\n          textTransform: \"none\",\r\n          src: data.dataUrl ?? \"\",\r\n          strokeColor: \"\",\r\n          strokeWidth: 0,\r\n          associatedData: \"\",\r\n          content: \"\",\r\n          x: position.left,\r\n          y: position.top,\r\n          text: item.label || \"Sample Text\",\r\n          displayOption: \"both sides\",\r\n          qrcode: data.qrcode ?? \"\",\r\n          direction: \"ltr\",\r\n        },\r\n        isSelected: true,\r\n        isDragging: false,\r\n        visible: true,\r\n      };\r\n\r\n      return newElement;\r\n    },\r\n    addElementFromDrag(item: any, position: Position) {\r\n      // Ensure position is within drop zone\r\n      const pageStore = usePageStore();\r\n      const canvasWidth =\r\n        this.dropzone?.offsetWidth || pageStore.presetWidth * 3.78;\r\n      const canvasHeight =\r\n        this.dropzone?.offsetHeight || pageStore.presetHeight * 3.78;\r\n      const elementWidth = 200; // Default width\r\n      const elementHeight = 64; // Default height\r\n\r\n      const adjustedPosition = {\r\n        left: Math.max(0, Math.min(position.left, canvasWidth - elementWidth)),\r\n        top: Math.max(0, Math.min(position.top, canvasHeight - elementHeight)),\r\n      };\r\n\r\n      const data = {\r\n        item: item,\r\n        position: adjustedPosition,\r\n        width: elementWidth,\r\n        height: elementHeight,\r\n      };\r\n\r\n      const newElement = this.elementMachanism(data);\r\n\r\n      this.addElement(newElement);\r\n      this.selectedElement = newElement.id;\r\n      this.updateProperties();\r\n    },\r\n\r\n    handleImageUploaded(dataUrl: string) {\r\n      // if (item.type === \"img\" || item.type === \"background\") {\r\n      //   this.imageItem = item;\r\n      //   this.showImageModal = true;\r\n      const position = { left: 123, top: 204 };\r\n      this.pendingImagePosition = position;\r\n      this.pendingImageSide = this.activeSide;\r\n      //   return;\r\n      // }\r\n\r\n      const pageStore = usePageStore();\r\n      const customPosition = {\r\n        left: 198,\r\n        top: 277,\r\n      };\r\n      const canvasWidth =\r\n        this.dropzone?.offsetWidth || pageStore.presetWidth * 3.78;\r\n      const canvasHeight =\r\n        this.dropzone?.offsetHeight || pageStore.presetHeight * 3.78;\r\n      const elementWidth =\r\n        this.imageItem.type === \"background\"\r\n          ? pageStore.presetWidth * 3.78\r\n          : 150;\r\n      const elementHeight =\r\n        this.imageItem.type === \"background\"\r\n          ? pageStore.presetHeight * 3.78\r\n          : 150;\r\n\r\n      // Ensure position is within drop zone\r\n      const adjustedPosition = {\r\n        left: Math.max(\r\n          0,\r\n          Math.min(\r\n            this.imageItem.type === \"background\"\r\n              ? customPosition.left\r\n              : this.pendingImagePosition.left,\r\n            canvasWidth - elementWidth\r\n          )\r\n        ),\r\n        top: Math.max(\r\n          0,\r\n          Math.min(\r\n            this.imageItem.type === \"background\"\r\n              ? customPosition.top\r\n              : this.pendingImagePosition.top,\r\n            canvasHeight - elementHeight\r\n          )\r\n        ),\r\n      };\r\n\r\n      const data = {\r\n        item: {\r\n          text: this.imageItem.label,\r\n          type: this.imageItem.type,\r\n          label: this.imageItem.type === \"background\" ? \"background\" : \"Image\",\r\n        },\r\n        position: adjustedPosition,\r\n        dataUrl: dataUrl,\r\n        width: elementWidth,\r\n        height: elementHeight,\r\n      };\r\n\r\n      const newElement = this.elementMachanism(data);\r\n\r\n      if (this.pendingImageSide === \"front\") {\r\n        this.frontBoxes.push(newElement);\r\n      } else {\r\n        this.backBoxes.push(newElement);\r\n      }\r\n      this.pendingImagePosition = null;\r\n      this.pendingImageSide = null;\r\n      this.selectedElement = newElement.id;\r\n      this.updateProperties();\r\n    },\r\n\r\n    addElement(element: CanvasElement) {\r\n      if (this.activeSide === \"front\") {\r\n        this.frontBoxes.push(element);\r\n      } else {\r\n        this.backBoxes.push(element);\r\n      }\r\n    },\r\n\r\n    // handleImageUploaded(dataUrl: string) {\r\n    //   if (this.pendingImagePosition && this.pendingImageSide) {\r\n    //     const pageStore = usePageStore();\r\n    //     const customPosition = {\r\n    //       left: 198,\r\n    //       top: 277,\r\n    //     };\r\n    //     const data = {\r\n    //       item: {\r\n    //         text: this.imageItem.label,\r\n    //         type: this.imageItem.type,\r\n    //         label:\r\n    //           this.imageItem.type === \"background\" ? \"background\" : \"Image\",\r\n    //       },\r\n    //       position:\r\n    //         this.imageItem.type === \"background\"\r\n    //           ? customPosition\r\n    //           : this.pendingImagePosition,\r\n    //       dataUrl: dataUrl,\r\n    //       width:\r\n    //         this.imageItem.type === \"background\"\r\n    //           ? pageStore.presetWidth * 3.78\r\n    //           : 150,\r\n    //       height:\r\n    //         this.imageItem.type === \"background\"\r\n    //           ? pageStore.presetHeight * 3.78\r\n    //           : 150,\r\n    //     };\r\n\r\n    //     const newElement = this.elementMachanism(data);\r\n\r\n    //     if (this.pendingImageSide === \"front\") {\r\n    //       this.frontBoxes.push(newElement);\r\n    //     } else {\r\n    //       this.backBoxes.push(newElement);\r\n    //     }\r\n    //     this.pendingImagePosition = null;\r\n    //     this.pendingImageSide = null;\r\n    //     this.selectedElement = newElement.id;\r\n    //     this.updateProperties();\r\n    //   }\r\n    // },\r\n\r\n    handleQRCodeGenerator(qrcodeValue: string) {\r\n      const qrcodeData = {\r\n        value: qrcodeValue,\r\n        variant: \"pixelated\",\r\n        radius: 1,\r\n        blackColor: \"#000000\", // 'var(--ui-text-highlighted)' if you are using `@nuxt/ui` v3\r\n        whiteColor: \"transparent\",\r\n      };\r\n      const data = {\r\n        item: {\r\n          text: \"\",\r\n          type: \"qrcode\",\r\n          label: \"QR Code\",\r\n        },\r\n        position: {\r\n          left: 43,\r\n          top: 188,\r\n        },\r\n        width: 150,\r\n        height: 150,\r\n        qrcode: qrcodeData,\r\n      };\r\n\r\n      const newElement = this.elementMachanism(data);\r\n\r\n      this.addElement(newElement);\r\n      this.selectedElement = newElement.id;\r\n      this.updateProperties();\r\n    },\r\n\r\n    updateProperties(newProperties?: Partial<ElementProperties>) {\r\n      if (this.selectedElement === null) {\r\n        this.currentProperties = {};\r\n        return;\r\n      }\r\n      const element = this.boxes.find((e) => e.id === this.selectedElement);\r\n      if (!element) return;\r\n\r\n      if (newProperties) {\r\n        element.position.left = newProperties.x ?? element.position.left;\r\n        element.position.top = newProperties.y ?? element.position.top;\r\n        element.properties = { ...element.properties, ...newProperties };\r\n        element.text = newProperties.text ?? element.text;\r\n      }\r\n      this.currentProperties = {\r\n        x: Math.floor(element.position.left),\r\n        y: Math.floor(element.position.top),\r\n        size: { ...element.properties.size },\r\n        rotation: element.properties.rotation,\r\n        font: element.properties.font,\r\n        fontWeight: element.properties.fontWeight,\r\n        fontStyle: element.properties.fontStyle,\r\n        fontSize: element.properties.fontSize,\r\n        fillColor: element.properties.fillColor,\r\n        fillTransparency: element.properties.fillTransparency,\r\n        textDecoration: element.properties.textDecoration,\r\n        color: element.properties.color,\r\n        textAlign: element.properties.textAlign,\r\n        verticalAlign: element.properties.verticalAlign,\r\n        horizontalAlign: element.properties.horizontalAlign,\r\n        textTransform: element.properties.textTransform,\r\n        src: element.properties.src,\r\n        strokeColor: element.properties.strokeColor,\r\n        strokeWidth: element.properties.strokeWidth,\r\n        associatedData: element.properties.associatedData,\r\n        content: element.properties.content,\r\n        text: element.text,\r\n        displayOption: element.properties.displayOption,\r\n        qrcode: element.properties.qrcode,\r\n        direction: element.properties.direction,\r\n      };\r\n    },\r\n\r\n    updateElementText(id: string | number, newText: string) {\r\n      const boxes =\r\n        this.activeSide === \"front\" ? this.frontBoxes : this.backBoxes;\r\n      const element = boxes.find((e) => e.id === id);\r\n      if (element) {\r\n        element.text = newText;\r\n        element.properties.text = newText;\r\n      }\r\n    },\r\n\r\n    alignHorizontal(alignment: \"left\" | \"center\" | \"right\") {\r\n      if (this.selectedElement === null || !this.dropzone) return;\r\n      const element = this.boxes.find((e) => e.id === this.selectedElement);\r\n      if (!element) return;\r\n      const canvasRect = this.dropzone.getBoundingClientRect();\r\n      const elementWidth = element.properties.size.width;\r\n      switch (alignment) {\r\n        case \"left\":\r\n          element.position.left = 0;\r\n          element.properties.textAlign = \"left\";\r\n          element.properties.horizontalAlign = \"left\";\r\n          break;\r\n        case \"center\":\r\n          element.position.left = (canvasRect.width - elementWidth) / 2;\r\n          element.properties.textAlign = \"center\";\r\n          element.properties.horizontalAlign = \"center\";\r\n          break;\r\n        case \"right\":\r\n          element.position.left = canvasRect.width - elementWidth;\r\n          element.properties.textAlign = \"right\";\r\n          element.properties.horizontalAlign = \"right\";\r\n          break;\r\n      }\r\n      this.currentProperties.x = element.position.left;\r\n      this.currentProperties.textAlign = alignment;\r\n      this.currentProperties.horizontalAlign = alignment;\r\n      this.updateProperties(this.currentProperties);\r\n    },\r\n\r\n    alignVertical(alignment: \"top\" | \"middle\" | \"bottom\") {\r\n      if (this.selectedElement === null || !this.dropzone) return;\r\n      const element = this.boxes.find((e) => e.id === this.selectedElement);\r\n      if (!element) return;\r\n      const canvasRect = this.dropzone.getBoundingClientRect();\r\n      const elementHeight = element.properties.size.height;\r\n      switch (alignment) {\r\n        case \"top\":\r\n          element.position.top = 0;\r\n          element.properties.verticalAlign = \"top\";\r\n          break;\r\n        case \"middle\":\r\n          element.position.top = (canvasRect.height - elementHeight) / 2;\r\n          element.properties.verticalAlign = \"middle\";\r\n          break;\r\n        case \"bottom\":\r\n          element.position.top = canvasRect.height - elementHeight;\r\n          element.properties.verticalAlign = \"bottom\";\r\n          break;\r\n      }\r\n      this.currentProperties.y = element.position.top;\r\n      this.currentProperties.verticalAlign = alignment;\r\n      this.updateProperties(this.currentProperties);\r\n    },\r\n\r\n    makeTransparent(color: string) {\r\n      if (color === \"fillColor\") {\r\n        this.currentProperties.fillTransparency = true;\r\n        this.currentProperties.fillColor = \"transparent\";\r\n        this.updateProperties(this.currentProperties);\r\n      } else {\r\n        this.currentProperties.color = \"transparent\";\r\n        this.updateProperties(this.currentProperties);\r\n      }\r\n    },\r\n\r\n    applyTextAlign(align: string) {\r\n      this.currentProperties.textAlign = align;\r\n      this.currentProperties.horizontalAlign = align;\r\n      const element = this.boxes.find((e) => e.id === this.selectedElement);\r\n      if (element) {\r\n        element.properties.textAlign = align;\r\n        element.properties.horizontalAlign = align;\r\n      }\r\n      this.updateProperties(this.currentProperties);\r\n    },\r\n\r\n    applyVerticalAlign(align: string) {\r\n      this.currentProperties.verticalAlign = align;\r\n      const element = this.boxes.find((e) => e.id === this.selectedElement);\r\n      if (element) {\r\n        element.properties.verticalAlign = align;\r\n      }\r\n      this.updateProperties(this.currentProperties);\r\n    },\r\n\r\n    applyTextTransform(transform: string) {\r\n      this.currentProperties.textTransform = transform;\r\n      this.updateProperties(this.currentProperties);\r\n    },\r\n\r\n    toggleTextStyle(style: \"bold\" | \"italic\" | \"underline\") {\r\n      if (style === \"bold\") {\r\n        this.currentProperties.fontWeight =\r\n          this.currentProperties.fontWeight === \"bold\" ? \"normal\" : \"bold\";\r\n      } else if (style === \"italic\") {\r\n        this.currentProperties.fontStyle =\r\n          this.currentProperties.fontStyle === \"italic\" ? \"normal\" : \"italic\";\r\n      } else if (style === \"underline\") {\r\n        this.currentProperties.textDecoration =\r\n          this.currentProperties.textDecoration === \"underline\"\r\n            ? \"none\"\r\n            : \"underline\";\r\n      }\r\n      this.updateProperties(this.currentProperties);\r\n    },\r\n\r\n    toggleLayerVisibility(id: string | number) {\r\n      const boxes =\r\n        this.activeSide === \"front\" ? this.frontBoxes : this.backBoxes;\r\n      const el = boxes.find((e) => e.id === id);\r\n      if (el) el.visible = !el.visible;\r\n    },\r\n\r\n    selectLayer(id: string | number) {\r\n      this.selectedElement = id;\r\n      this.updateProperties();\r\n    },\r\n\r\n    setTextDirection(id: string | number, direction: \"ltr\" | \"rtl\") {\r\n      const element = this.boxes.find((e) => e.id === id);\r\n      if (element) {\r\n        element.properties.direction = direction;\r\n        this.currentProperties.direction = direction;\r\n        this.updateProperties(this.currentProperties);\r\n      }\r\n    },\r\n\r\n    setBackground(background: string | null, side: \"front\" | \"back\") {\r\n      if (side === \"front\") {\r\n        this.frontBackground = background;\r\n      } else {\r\n        this.backBackground = background;\r\n      }\r\n    },\r\n\r\n    applyGradient(gradient: string, side: \"front\" | \"back\") {\r\n      this.setBackground(gradient, side);\r\n      this.showGradientModal = false;\r\n    },\r\n\r\n    applyColor(color: string, side: \"front\" | \"back\") {\r\n      this.setBackground(color, side);\r\n      this.showColorModal = false;\r\n    },\r\n  },\r\n  persist: true,\r\n});\r\n"],"names":["usePageStore","defineStore","route","useRoute","router","useRouter","widthMM","heightMM","finalWidthPX","finalHeightPX","size","preset","orientation","useCanvasStore","state","data","item","position","pageStore","canvasWidth","canvasHeight","elementWidth","elementHeight","adjustedPosition","newElement","dataUrl","customPosition","element","qrcodeValue","newProperties","e","id","newText","alignment","canvasRect","color","align","transform","style","el","direction","background","side","gradient"],"mappings":"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"}